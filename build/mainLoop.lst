ARM GAS  /tmp/ccJOVKBd.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"mainLoop.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._write,"ax",%progbits
  18              		.align	1
  19              		.global	_write
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	_write:
  27              	.LVL0:
  28              	.LFB133:
  29              		.file 1 "Core/Src/mainLoop.c"
   1:Core/Src/mainLoop.c **** #include "mainLoop.h"
   2:Core/Src/mainLoop.c **** 
   3:Core/Src/mainLoop.c **** #include <stdio.h>
   4:Core/Src/mainLoop.c **** 
   5:Core/Src/mainLoop.c **** #include "ad9520_function.h"
   6:Core/Src/mainLoop.c **** #include "main.h"
   7:Core/Src/mainLoop.c **** #include "math.h"
   8:Core/Src/mainLoop.c **** #include "max5307.h"
   9:Core/Src/mainLoop.c **** extern UART_HandleTypeDef huart2;
  10:Core/Src/mainLoop.c **** extern DAC_HandleTypeDef hdac;
  11:Core/Src/mainLoop.c **** extern TIM_HandleTypeDef htim4;
  12:Core/Src/mainLoop.c **** extern TIM_HandleTypeDef htim1;
  13:Core/Src/mainLoop.c **** extern TIM_HandleTypeDef htim5;  // Áî®Êù•ÂÅö1sÁöÑÂÆöÊó∂Âô®
  14:Core/Src/mainLoop.c **** extern ADC_HandleTypeDef hadc1;
  15:Core/Src/mainLoop.c **** extern ADC_HandleTypeDef hadc2;
  16:Core/Src/mainLoop.c **** // floating point support in printf isn't enabled by default. To enable, add -u
  17:Core/Src/mainLoop.c **** // _printf_float to your LDFLAGS.
  18:Core/Src/mainLoop.c **** // for ubuntu arm-none-eabi-gcc compile
  19:Core/Src/mainLoop.c **** int _write(int fd, char *ptr, int len) {
  30              		.loc 1 19 40 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 19 40 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
ARM GAS  /tmp/ccJOVKBd.s 			page 2


  40 0002 1446     		mov	r4, r2
  20:Core/Src/mainLoop.c ****   HAL_UART_Transmit(&huart2, (uint8_t *)ptr, len, HAL_MAX_DELAY);
  41              		.loc 1 20 3 is_stmt 1 view .LVU2
  42 0004 4FF0FF33 		mov	r3, #-1
  43 0008 92B2     		uxth	r2, r2
  44              	.LVL1:
  45              		.loc 1 20 3 is_stmt 0 view .LVU3
  46 000a 0248     		ldr	r0, .L3
  47              	.LVL2:
  48              		.loc 1 20 3 view .LVU4
  49 000c FFF7FEFF 		bl	HAL_UART_Transmit
  50              	.LVL3:
  21:Core/Src/mainLoop.c ****   return len;
  51              		.loc 1 21 3 is_stmt 1 view .LVU5
  22:Core/Src/mainLoop.c **** }
  52              		.loc 1 22 1 is_stmt 0 view .LVU6
  53 0010 2046     		mov	r0, r4
  54 0012 10BD     		pop	{r4, pc}
  55              	.LVL4:
  56              	.L4:
  57              		.loc 1 22 1 view .LVU7
  58              		.align	2
  59              	.L3:
  60 0014 00000000 		.word	huart2
  61              		.cfi_endproc
  62              	.LFE133:
  64              		.section	.text.transform_capNum_to_xNum,"ax",%progbits
  65              		.align	1
  66              		.global	transform_capNum_to_xNum
  67              		.syntax unified
  68              		.thumb
  69              		.thumb_func
  70              		.fpu fpv4-sp-d16
  72              	transform_capNum_to_xNum:
  73              	.LVL5:
  74              	.LFB134:
  23:Core/Src/mainLoop.c **** 
  24:Core/Src/mainLoop.c **** // for windows keil compile
  25:Core/Src/mainLoop.c **** //  int fputc(int ch, FILE *f)
  26:Core/Src/mainLoop.c **** //  {
  27:Core/Src/mainLoop.c **** //    /* Your implementation of fputc(). */
  28:Core/Src/mainLoop.c **** //  	HAL_UART_Transmit(&huart2, (uint8_t *)&ch, 1, HAL_MAX_DELAY);
  29:Core/Src/mainLoop.c **** //    return ch;
  30:Core/Src/mainLoop.c **** //  }
  31:Core/Src/mainLoop.c **** 
  32:Core/Src/mainLoop.c **** #define CAPNUM 100
  33:Core/Src/mainLoop.c **** uint32_t chanl1_capNum[CAPNUM];
  34:Core/Src/mainLoop.c **** uint32_t chanl2_capNum[CAPNUM];
  35:Core/Src/mainLoop.c **** int32_t chanl1_xNum[CAPNUM];
  36:Core/Src/mainLoop.c **** int32_t chanl2_xNum[CAPNUM];
  37:Core/Src/mainLoop.c **** float chanl1_capNum_f[CAPNUM];
  38:Core/Src/mainLoop.c **** float chanl2_capNum_f[CAPNUM];
  39:Core/Src/mainLoop.c **** int32_t chanl1_completed = 0;
  40:Core/Src/mainLoop.c **** int32_t chanl2_completed = 0;
  41:Core/Src/mainLoop.c **** float average_xNum1 = 0, average_xNum2 = 0;
  42:Core/Src/mainLoop.c **** int32_t chanl1_midx = 0, chanl2_midx = 0;  // ‰øùÂ≠òÂæ™ÁéØDMAÈòüÂàóÁöÑ‰∏≠Èó¥ÂèòÈáè
  43:Core/Src/mainLoop.c **** // tim4 dma
ARM GAS  /tmp/ccJOVKBd.s 			page 3


  44:Core/Src/mainLoop.c **** // ÊñπÂºèÔºåËé∑ÂæóÊï∞ÊçÆÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜÔºåÂàÜ‰∏∫ÂâçÂêé‰∏§‰∏™halfwordÔºåÊØè‰∏™halfwordÈÉΩ‰ª£Ë°®‰∏Ä‰∏
  45:Core/Src/mainLoop.c **** //  ËøôÊÆµ‰ª£Á†ÅÊòØÁî®Êù•Â§ÑÁêÜËøô‰∏§‰∏™halfwordÁöÑ
  46:Core/Src/mainLoop.c **** // ËæìÂÖ•ÂèÇÊï∞ canNum‰∏∫‰∏§‰∏™halfwordÁöÑÁªÑÂêàÊï∞ÔºåÊúâ‰∏ä‰∏™‰∏äÂçáÊ≤øÊó∂Èó¥,
  47:Core/Src/mainLoop.c **** // Áî±‰∫éÁ¨¨‰∏Ä‰∏™Êï∞ÈÄöÂ∏∏ÊòØÈîôËØØÁöÑÔºåÊâÄ‰ª•‰ªéÁ¨¨‰∫å‰∏™Êï∞ÂºÄÂßã
  48:Core/Src/mainLoop.c **** void transform_capNum_to_xNum(uint32_t *capNum, int32_t *xNum,
  49:Core/Src/mainLoop.c ****                               int32_t capNum_len) {
  75              		.loc 1 49 51 is_stmt 1 view -0
  76              		.cfi_startproc
  77              		@ args = 0, pretend = 0, frame = 0
  78              		@ frame_needed = 0, uses_anonymous_args = 0
  79              		@ link register save eliminated.
  80              		.loc 1 49 51 is_stmt 0 view .LVU9
  81 0000 30B4     		push	{r4, r5}
  82              	.LCFI1:
  83              		.cfi_def_cfa_offset 8
  84              		.cfi_offset 4, -8
  85              		.cfi_offset 5, -4
  50:Core/Src/mainLoop.c ****   int32_t i;
  86              		.loc 1 50 3 is_stmt 1 view .LVU10
  51:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len / 2; i++) {
  87              		.loc 1 51 3 view .LVU11
  88              	.LVL6:
  89              		.loc 1 51 10 is_stmt 0 view .LVU12
  90 0002 0023     		movs	r3, #0
  91              	.LVL7:
  92              	.L6:
  93              		.loc 1 51 15 is_stmt 1 discriminator 1 view .LVU13
  94              		.loc 1 51 30 is_stmt 0 discriminator 1 view .LVU14
  95 0004 02EBD274 		add	r4, r2, r2, lsr #31
  96              		.loc 1 51 3 discriminator 1 view .LVU15
  97 0008 B3EB640F 		cmp	r3, r4, asr #1
  98 000c 0BDA     		bge	.L9
  52:Core/Src/mainLoop.c ****     xNum[i * 2] = capNum[i] & 0xffff;
  99              		.loc 1 52 5 is_stmt 1 discriminator 3 view .LVU16
 100              		.loc 1 52 9 is_stmt 0 discriminator 3 view .LVU17
 101 000e DC00     		lsls	r4, r3, #3
 102              		.loc 1 52 29 discriminator 3 view .LVU18
 103 0010 30F82350 		ldrh	r5, [r0, r3, lsl #2]
 104              		.loc 1 52 17 discriminator 3 view .LVU19
 105 0014 41F83350 		str	r5, [r1, r3, lsl #3]
  53:Core/Src/mainLoop.c ****     xNum[i * 2 + 1] = capNum[i] >> 16;
 106              		.loc 1 53 5 is_stmt 1 discriminator 3 view .LVU20
 107              		.loc 1 53 29 is_stmt 0 discriminator 3 view .LVU21
 108 0018 50F82350 		ldr	r5, [r0, r3, lsl #2]
 109              		.loc 1 53 9 discriminator 3 view .LVU22
 110 001c 0434     		adds	r4, r4, #4
 111              		.loc 1 53 33 discriminator 3 view .LVU23
 112 001e 2D0C     		lsrs	r5, r5, #16
 113              		.loc 1 53 21 discriminator 3 view .LVU24
 114 0020 0D51     		str	r5, [r1, r4]
  51:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len / 2; i++) {
 115              		.loc 1 51 35 is_stmt 1 discriminator 3 view .LVU25
  51:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len / 2; i++) {
 116              		.loc 1 51 36 is_stmt 0 discriminator 3 view .LVU26
 117 0022 0133     		adds	r3, r3, #1
 118              	.LVL8:
  51:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len / 2; i++) {
ARM GAS  /tmp/ccJOVKBd.s 			page 4


 119              		.loc 1 51 36 discriminator 3 view .LVU27
 120 0024 EEE7     		b	.L6
 121              	.L9:
  54:Core/Src/mainLoop.c ****   }
  55:Core/Src/mainLoop.c **** }
 122              		.loc 1 55 1 view .LVU28
 123 0026 30BC     		pop	{r4, r5}
 124              	.LCFI2:
 125              		.cfi_restore 5
 126              		.cfi_restore 4
 127              		.cfi_def_cfa_offset 0
 128 0028 7047     		bx	lr
 129              		.cfi_endproc
 130              	.LFE134:
 132              		.section	.text.cal_average_xNum,"ax",%progbits
 133              		.align	1
 134              		.global	cal_average_xNum
 135              		.syntax unified
 136              		.thumb
 137              		.thumb_func
 138              		.fpu fpv4-sp-d16
 140              	cal_average_xNum:
 141              	.LVL9:
 142              	.LFB135:
  56:Core/Src/mainLoop.c **** 
  57:Core/Src/mainLoop.c **** // ËÆ°ÁÆóÂπ≥ÂùáxNumÔºå
  58:Core/Src/mainLoop.c **** // cal_average_xNum(chanl1_xNum, CAPNUM);
  59:Core/Src/mainLoop.c **** int32_t cal_average_xNum(int32_t *xNum, int32_t capNum_len) {
 143              		.loc 1 59 61 is_stmt 1 view -0
 144              		.cfi_startproc
 145              		@ args = 0, pretend = 0, frame = 0
 146              		@ frame_needed = 0, uses_anonymous_args = 0
 147              		@ link register save eliminated.
 148              		.loc 1 59 61 is_stmt 0 view .LVU30
 149 0000 70B4     		push	{r4, r5, r6}
 150              	.LCFI3:
 151              		.cfi_def_cfa_offset 12
 152              		.cfi_offset 4, -12
 153              		.cfi_offset 5, -8
 154              		.cfi_offset 6, -4
  60:Core/Src/mainLoop.c ****   int32_t i, sum = 0;
 155              		.loc 1 60 3 is_stmt 1 view .LVU31
 156              	.LVL10:
  61:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len - 1; i++) {
 157              		.loc 1 61 3 view .LVU32
  60:Core/Src/mainLoop.c ****   int32_t i, sum = 0;
 158              		.loc 1 60 14 is_stmt 0 view .LVU33
 159 0002 0025     		movs	r5, #0
 160              		.loc 1 61 10 view .LVU34
 161 0004 2B46     		mov	r3, r5
 162              	.LVL11:
 163              	.L11:
 164              		.loc 1 61 15 is_stmt 1 discriminator 1 view .LVU35
 165              		.loc 1 61 30 is_stmt 0 discriminator 1 view .LVU36
 166 0006 4A1E     		subs	r2, r1, #1
 167              		.loc 1 61 3 discriminator 1 view .LVU37
 168 0008 9A42     		cmp	r2, r3
ARM GAS  /tmp/ccJOVKBd.s 			page 5


 169 000a 0ADD     		ble	.L14
  62:Core/Src/mainLoop.c ****     xNum[i] = xNum[i + 1] - xNum[i];
 170              		.loc 1 62 5 is_stmt 1 discriminator 3 view .LVU38
 171              		.loc 1 62 19 is_stmt 0 discriminator 3 view .LVU39
 172 000c 5C1C     		adds	r4, r3, #1
 173 000e 50F82420 		ldr	r2, [r0, r4, lsl #2]
 174              		.loc 1 62 33 discriminator 3 view .LVU40
 175 0012 50F82360 		ldr	r6, [r0, r3, lsl #2]
 176              		.loc 1 62 27 discriminator 3 view .LVU41
 177 0016 921B     		subs	r2, r2, r6
 178              		.loc 1 62 13 discriminator 3 view .LVU42
 179 0018 40F82320 		str	r2, [r0, r3, lsl #2]
  63:Core/Src/mainLoop.c ****     sum += xNum[i];
 180              		.loc 1 63 5 is_stmt 1 discriminator 3 view .LVU43
 181              		.loc 1 63 9 is_stmt 0 discriminator 3 view .LVU44
 182 001c 1544     		add	r5, r5, r2
 183              	.LVL12:
  61:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len - 1; i++) {
 184              		.loc 1 61 35 is_stmt 1 discriminator 3 view .LVU45
  61:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len - 1; i++) {
 185              		.loc 1 61 36 is_stmt 0 discriminator 3 view .LVU46
 186 001e 2346     		mov	r3, r4
 187              	.LVL13:
  61:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len - 1; i++) {
 188              		.loc 1 61 36 discriminator 3 view .LVU47
 189 0020 F1E7     		b	.L11
 190              	.L14:
  64:Core/Src/mainLoop.c ****   }
  65:Core/Src/mainLoop.c ****   return sum / (capNum_len - 1);
 191              		.loc 1 65 3 is_stmt 1 view .LVU48
  66:Core/Src/mainLoop.c **** }
 192              		.loc 1 66 1 is_stmt 0 view .LVU49
 193 0022 95FBF2F0 		sdiv	r0, r5, r2
 194              	.LVL14:
 195              		.loc 1 66 1 view .LVU50
 196 0026 70BC     		pop	{r4, r5, r6}
 197              	.LCFI4:
 198              		.cfi_restore 6
 199              		.cfi_restore 5
 200              		.cfi_restore 4
 201              		.cfi_def_cfa_offset 0
 202              	.LVL15:
 203              		.loc 1 66 1 view .LVU51
 204 0028 7047     		bx	lr
 205              		.cfi_endproc
 206              	.LFE135:
 208              		.section	.text.enable_tim4_capture_Iterrupt,"ax",%progbits
 209              		.align	1
 210              		.global	enable_tim4_capture_Iterrupt
 211              		.syntax unified
 212              		.thumb
 213              		.thumb_func
 214              		.fpu fpv4-sp-d16
 216              	enable_tim4_capture_Iterrupt:
 217              	.LFB136:
  67:Core/Src/mainLoop.c **** 
  68:Core/Src/mainLoop.c **** void enable_tim4_capture_Iterrupt(void) {
ARM GAS  /tmp/ccJOVKBd.s 			page 6


 218              		.loc 1 68 41 is_stmt 1 view -0
 219              		.cfi_startproc
 220              		@ args = 0, pretend = 0, frame = 0
 221              		@ frame_needed = 0, uses_anonymous_args = 0
 222 0000 08B5     		push	{r3, lr}
 223              	.LCFI5:
 224              		.cfi_def_cfa_offset 8
 225              		.cfi_offset 3, -8
 226              		.cfi_offset 14, -4
  69:Core/Src/mainLoop.c ****   // HAL_TIM_Base_Start_IT(&htim4);
  70:Core/Src/mainLoop.c ****   // HAL_TIM_IC_Start_IT(&htim4, TIM_CHANNEL_1);
  71:Core/Src/mainLoop.c ****   // HAL_TIM_IC_Start_IT(&htim4, TIM_CHANNEL_2);
  72:Core/Src/mainLoop.c ****   // HAL_TIM_IC_Start_DMA(&htim4, TIM_CHANNEL_1, (uint32_t*)chanl1_capNum,
  73:Core/Src/mainLoop.c ****   // CAPNUM+4);
  74:Core/Src/mainLoop.c **** 
  75:Core/Src/mainLoop.c ****   // HAL_TIM_IC_Start_DMA(&htim4, TIM_CHANNEL_2, (uint32_t*)chanl2_capNum,
  76:Core/Src/mainLoop.c ****   // CAPNUM); HAL_TIM_IC_Start_DMA(&htim1, TIM_CHANNEL_4,
  77:Core/Src/mainLoop.c ****   // (uint32_t*)chanl1_capNum, CAPNUM);
  78:Core/Src/mainLoop.c ****   HAL_TIM_Base_Start_IT(&htim5);
 227              		.loc 1 78 3 view .LVU53
 228 0002 0548     		ldr	r0, .L17
 229 0004 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 230              	.LVL16:
  79:Core/Src/mainLoop.c ****   HAL_TIM_Base_Start_IT(&htim4);
 231              		.loc 1 79 3 view .LVU54
 232 0008 0448     		ldr	r0, .L17+4
 233 000a FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 234              	.LVL17:
  80:Core/Src/mainLoop.c ****   HAL_TIM_Base_Start_IT(&htim1);
 235              		.loc 1 80 3 view .LVU55
 236 000e 0448     		ldr	r0, .L17+8
 237 0010 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 238              	.LVL18:
  81:Core/Src/mainLoop.c **** }
 239              		.loc 1 81 1 is_stmt 0 view .LVU56
 240 0014 08BD     		pop	{r3, pc}
 241              	.L18:
 242 0016 00BF     		.align	2
 243              	.L17:
 244 0018 00000000 		.word	htim5
 245 001c 00000000 		.word	htim4
 246 0020 00000000 		.word	htim1
 247              		.cfi_endproc
 248              	.LFE136:
 250              		.global	__aeabi_i2d
 251              		.global	__aeabi_dmul
 252              		.global	__aeabi_dadd
 253              		.section	.text.generateSinWave,"ax",%progbits
 254              		.align	1
 255              		.global	generateSinWave
 256              		.syntax unified
 257              		.thumb
 258              		.thumb_func
 259              		.fpu fpv4-sp-d16
 261              	generateSinWave:
 262              	.LVL19:
 263              	.LFB137:
ARM GAS  /tmp/ccJOVKBd.s 			page 7


  82:Core/Src/mainLoop.c **** 
  83:Core/Src/mainLoop.c **** uint32_t i = 0;
  84:Core/Src/mainLoop.c **** float f = 3.14;
  85:Core/Src/mainLoop.c **** // int32_t chanl1_capNum = 0;
  86:Core/Src/mainLoop.c **** // int32_t chanl2_capNum = 0;
  87:Core/Src/mainLoop.c **** int32_t fre_dif = 0;
  88:Core/Src/mainLoop.c **** int32_t xx, yy, complete_sign;
  89:Core/Src/mainLoop.c **** int32_t xx_cnt, yy_cnt;
  90:Core/Src/mainLoop.c **** uint8_t buf[4];
  91:Core/Src/mainLoop.c **** float v_dianya;
  92:Core/Src/mainLoop.c **** uint32_t dacV;
  93:Core/Src/mainLoop.c **** double tmp;
  94:Core/Src/mainLoop.c **** #define NS 128
  95:Core/Src/mainLoop.c **** uint32_t Wave_LUT[NS] = {
  96:Core/Src/mainLoop.c ****     2048, 2149, 2250, 2350, 2450, 2549, 2646, 2742, 2837, 2929, 3020, 3108,
  97:Core/Src/mainLoop.c ****     3193, 3275, 3355, 3431, 3504, 3574, 3639, 3701, 3759, 3812, 3861, 3906,
  98:Core/Src/mainLoop.c ****     3946, 3982, 4013, 4039, 4060, 4076, 4087, 4094, 4095, 4091, 4082, 4069,
  99:Core/Src/mainLoop.c ****     4050, 4026, 3998, 3965, 3927, 3884, 3837, 3786, 3730, 3671, 3607, 3539,
 100:Core/Src/mainLoop.c ****     3468, 3394, 3316, 3235, 3151, 3064, 2975, 2883, 2790, 2695, 2598, 2500,
 101:Core/Src/mainLoop.c ****     2400, 2300, 2199, 2098, 1997, 1896, 1795, 1695, 1595, 1497, 1400, 1305,
 102:Core/Src/mainLoop.c ****     1212, 1120, 1031, 944,  860,  779,  701,  627,  556,  488,  424,  365,
 103:Core/Src/mainLoop.c ****     309,  258,  211,  168,  130,  97,   69,   45,   26,   13,   4,    0,
 104:Core/Src/mainLoop.c ****     1,    8,    19,   35,   56,   82,   113,  149,  189,  234,  283,  336,
 105:Core/Src/mainLoop.c ****     394,  456,  521,  591,  664,  740,  820,  902,  987,  1075, 1166, 1258,
 106:Core/Src/mainLoop.c ****     1353, 1449, 1546, 1645, 1745, 1845, 1946, 2047};
 107:Core/Src/mainLoop.c **** #define PI 3.14159265
 108:Core/Src/mainLoop.c **** #define AMPLITUDE 2048.0  // Ê≠£Âº¶Ê≥¢ÂπÖÂ∫¶
 109:Core/Src/mainLoop.c **** #define FREQUENCY 100.0   // Ê≠£Âº¶Ê≥¢È¢ëÁéáÔºàHzÔºâ
 110:Core/Src/mainLoop.c **** #define SAMPLE_RATE 4096  // ÈááÊ†∑ÁéáÔºàÊØèÁßíÈááÊ†∑Ê¨°Êï∞Ôºâ
 111:Core/Src/mainLoop.c **** 
 112:Core/Src/mainLoop.c **** void generateSinWave(int32_t i) {
 264              		.loc 1 112 33 is_stmt 1 view -0
 265              		.cfi_startproc
 266              		@ args = 0, pretend = 0, frame = 0
 267              		@ frame_needed = 0, uses_anonymous_args = 0
 268              		.loc 1 112 33 is_stmt 0 view .LVU58
 269 0000 08B5     		push	{r3, lr}
 270              	.LCFI6:
 271              		.cfi_def_cfa_offset 8
 272              		.cfi_offset 3, -8
 273              		.cfi_offset 14, -4
 113:Core/Src/mainLoop.c ****   double omega = 2.0 * PI * FREQUENCY / SAMPLE_RATE;
 274              		.loc 1 113 3 is_stmt 1 view .LVU59
 275              	.LVL20:
 114:Core/Src/mainLoop.c ****   tmp = AMPLITUDE * sin(omega * i) + AMPLITUDE;
 276              		.loc 1 114 3 view .LVU60
 277              		.loc 1 114 21 is_stmt 0 view .LVU61
 278 0002 FFF7FEFF 		bl	__aeabi_i2d
 279              	.LVL21:
 280              		.loc 1 114 21 view .LVU62
 281 0006 0EA3     		adr	r3, .L21+8
 282 0008 D3E90023 		ldrd	r2, [r3]
 283 000c FFF7FEFF 		bl	__aeabi_dmul
 284              	.LVL22:
 285 0010 41EC100B 		vmov	d0, r0, r1
 286 0014 FFF7FEFF 		bl	sin
 287              	.LVL23:
ARM GAS  /tmp/ccJOVKBd.s 			page 8


 288 0018 51EC100B 		vmov	r0, r1, d0
 289              		.loc 1 114 19 view .LVU63
 290 001c 0022     		movs	r2, #0
 291 001e 064B     		ldr	r3, .L21
 292 0020 FFF7FEFF 		bl	__aeabi_dmul
 293              	.LVL24:
 294              		.loc 1 114 36 view .LVU64
 295 0024 0022     		movs	r2, #0
 296 0026 044B     		ldr	r3, .L21
 297 0028 FFF7FEFF 		bl	__aeabi_dadd
 298              	.LVL25:
 299              		.loc 1 114 7 view .LVU65
 300 002c 034B     		ldr	r3, .L21+4
 301 002e C3E90001 		strd	r0, [r3]
 115:Core/Src/mainLoop.c **** }
 302              		.loc 1 115 1 view .LVU66
 303 0032 08BD     		pop	{r3, pc}
 304              	.L22:
 305 0034 AFF30080 		.align	3
 306              	.L21:
 307 0038 0000A040 		.word	1084227584
 308 003c 00000000 		.word	tmp
 309 0040 5CE67459 		.word	1500833372
 310 0044 8CA2C33F 		.word	1069785740
 311              		.cfi_endproc
 312              	.LFE137:
 314              		.global	__aeabi_f2d
 315              		.global	__aeabi_ddiv
 316              		.global	__aeabi_d2uiz
 317              		.section	.text.mainLoop,"ax",%progbits
 318              		.align	1
 319              		.global	mainLoop
 320              		.syntax unified
 321              		.thumb
 322              		.thumb_func
 323              		.fpu fpv4-sp-d16
 325              	mainLoop:
 326              	.LFB138:
 116:Core/Src/mainLoop.c **** void mainLoop(void) {
 327              		.loc 1 116 21 is_stmt 1 view -0
 328              		.cfi_startproc
 329              		@ args = 0, pretend = 0, frame = 0
 330              		@ frame_needed = 0, uses_anonymous_args = 0
 331 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 332              	.LCFI7:
 333              		.cfi_def_cfa_offset 24
 334              		.cfi_offset 3, -24
 335              		.cfi_offset 4, -20
 336              		.cfi_offset 5, -16
 337              		.cfi_offset 6, -12
 338              		.cfi_offset 7, -8
 339              		.cfi_offset 14, -4
 117:Core/Src/mainLoop.c ****   uint32_t dacN = 0;  //,dacV=0;
 340              		.loc 1 117 3 view .LVU68
 341              	.LVL26:
 118:Core/Src/mainLoop.c **** 
 119:Core/Src/mainLoop.c ****   int32_t dacSign = 1;
ARM GAS  /tmp/ccJOVKBd.s 			page 9


 342              		.loc 1 119 3 view .LVU69
 120:Core/Src/mainLoop.c ****   init_max5307();
 343              		.loc 1 120 3 view .LVU70
 344 0002 FFF7FEFF 		bl	init_max5307
 345              	.LVL27:
 121:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch8, 2048, max_outenable);
 346              		.loc 1 121 3 view .LVU71
 347 0006 0122     		movs	r2, #1
 348 0008 4FF40061 		mov	r1, #2048
 349 000c 0920     		movs	r0, #9
 350 000e FFF7FEFF 		bl	max5307_w_chanel
 351              	.LVL28:
 122:Core/Src/mainLoop.c ****   //	while(1){
 123:Core/Src/mainLoop.c ****   //	    HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 124:Core/Src/mainLoop.c ****   //   //HAL_Delay(3);
 125:Core/Src/mainLoop.c ****   //    HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 126:Core/Src/mainLoop.c ****   //   // HAL_Delay(300);
 127:Core/Src/mainLoop.c ****   //	HAL_GPIO_TogglePin(LED5_GPIO_Port, LED5_Pin);
 128:Core/Src/mainLoop.c ****   //	//HAL_Delay(300);
 129:Core/Src/mainLoop.c ****   //		//void max5307_w_chanel(uint32_t chanel, uint32_t val);
 130:Core/Src/mainLoop.c ****   //
 131:Core/Src/mainLoop.c ****   //		//max5307_w_chanel(0x02,dacN);
 132:Core/Src/mainLoop.c ****   //		generateSinWave(dacN%SAMPLE_RATE);
 133:Core/Src/mainLoop.c ****   //		max5307_w_chanel(max_ch1,round(tmp),max_outenable);
 134:Core/Src/mainLoop.c ****   //		max5307_w_chanel(DACP_1K,round(tmp),max_outenable);
 135:Core/Src/mainLoop.c ****   //		//max5307_loadpin();
 136:Core/Src/mainLoop.c ****   //		//max5307_w_chanel(0x0e,0x2f);
 137:Core/Src/mainLoop.c ****   ////		if(dacN>=0xfff){
 138:Core/Src/mainLoop.c ****   ////			dacSign = -1;
 139:Core/Src/mainLoop.c ****   ////		}else if(dacN==0){
 140:Core/Src/mainLoop.c ****   ////			dacSign = 1;
 141:Core/Src/mainLoop.c ****   ////		}
 142:Core/Src/mainLoop.c ****   //		dacN = dacN + dacSign;
 143:Core/Src/mainLoop.c **** 
 144:Core/Src/mainLoop.c ****   ////		tmp = (dacN%4096) * 3.14 /4096;
 145:Core/Src/mainLoop.c ****   ////		tmp = sin(tmp);
 146:Core/Src/mainLoop.c ****   ////		dacV = 4096*tmp;
 147:Core/Src/mainLoop.c ****   //	}
 148:Core/Src/mainLoop.c ****   int32_t xx_bak = 0;
 352              		.loc 1 148 3 view .LVU72
 149:Core/Src/mainLoop.c ****   int32_t yy_bak = 0;
 353              		.loc 1 149 3 view .LVU73
 150:Core/Src/mainLoop.c ****   // init_ad9520_spiport();
 151:Core/Src/mainLoop.c ****   complete_sign = 0;
 354              		.loc 1 151 3 view .LVU74
 355              		.loc 1 151 17 is_stmt 0 view .LVU75
 356 0012 0024     		movs	r4, #0
 357 0014 504B     		ldr	r3, .L31+8
 358 0016 1C60     		str	r4, [r3]
 152:Core/Src/mainLoop.c ****   xx = 0;
 359              		.loc 1 152 3 is_stmt 1 view .LVU76
 360              		.loc 1 152 6 is_stmt 0 view .LVU77
 361 0018 504B     		ldr	r3, .L31+12
 362 001a 1C60     		str	r4, [r3]
 153:Core/Src/mainLoop.c ****   yy = 0;
 363              		.loc 1 153 3 is_stmt 1 view .LVU78
 364              		.loc 1 153 6 is_stmt 0 view .LVU79
ARM GAS  /tmp/ccJOVKBd.s 			page 10


 365 001c 504B     		ldr	r3, .L31+16
 366 001e 1C60     		str	r4, [r3]
 154:Core/Src/mainLoop.c ****   fre_dif = 0;
 367              		.loc 1 154 3 is_stmt 1 view .LVU80
 368              		.loc 1 154 11 is_stmt 0 view .LVU81
 369 0020 504D     		ldr	r5, .L31+20
 370 0022 2C60     		str	r4, [r5]
 155:Core/Src/mainLoop.c ****   xx_cnt = 0;
 371              		.loc 1 155 3 is_stmt 1 view .LVU82
 372              		.loc 1 155 10 is_stmt 0 view .LVU83
 373 0024 504B     		ldr	r3, .L31+24
 374 0026 1C60     		str	r4, [r3]
 156:Core/Src/mainLoop.c ****   yy_cnt = 0;
 375              		.loc 1 156 3 is_stmt 1 view .LVU84
 376              		.loc 1 156 10 is_stmt 0 view .LVU85
 377 0028 504B     		ldr	r3, .L31+28
 378 002a 1C60     		str	r4, [r3]
 157:Core/Src/mainLoop.c ****   v_dianya = 1.65;
 379              		.loc 1 157 3 is_stmt 1 view .LVU86
 380              		.loc 1 157 12 is_stmt 0 view .LVU87
 381 002c 504F     		ldr	r7, .L31+32
 382 002e 514B     		ldr	r3, .L31+36
 383 0030 3B60     		str	r3, [r7]	@ float
 158:Core/Src/mainLoop.c ****   HAL_DAC_Start(&hdac, DAC_CHANNEL_1);
 384              		.loc 1 158 3 is_stmt 1 view .LVU88
 385 0032 514E     		ldr	r6, .L31+40
 386 0034 2146     		mov	r1, r4
 387 0036 3046     		mov	r0, r6
 388 0038 FFF7FEFF 		bl	HAL_DAC_Start
 389              	.LVL29:
 159:Core/Src/mainLoop.c ****   // HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 160:Core/Src/mainLoop.c ****   HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 390              		.loc 1 160 3 view .LVU89
 161:Core/Src/mainLoop.c ****                    (uint32_t)((v_dianya / 3.3) * 4096));
 391              		.loc 1 161 41 is_stmt 0 view .LVU90
 392 003c 3868     		ldr	r0, [r7]	@ float
 393 003e FFF7FEFF 		bl	__aeabi_f2d
 394              	.LVL30:
 395 0042 43A3     		adr	r3, .L31
 396 0044 D3E90023 		ldrd	r2, [r3]
 397 0048 FFF7FEFF 		bl	__aeabi_ddiv
 398              	.LVL31:
 399              		.loc 1 161 48 view .LVU91
 400 004c 0022     		movs	r2, #0
 401 004e 4B4B     		ldr	r3, .L31+44
 402 0050 FFF7FEFF 		bl	__aeabi_dmul
 403              	.LVL32:
 160:Core/Src/mainLoop.c ****                    (uint32_t)((v_dianya / 3.3) * 4096));
 404              		.loc 1 160 3 view .LVU92
 405 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 406              	.LVL33:
 407 0058 0346     		mov	r3, r0
 408 005a 2246     		mov	r2, r4
 409 005c 2146     		mov	r1, r4
 410 005e 3046     		mov	r0, r6
 411 0060 FFF7FEFF 		bl	HAL_DAC_SetValue
 412              	.LVL34:
ARM GAS  /tmp/ccJOVKBd.s 			page 11


 162:Core/Src/mainLoop.c ****   // HAL_UART_Receive_IT(UART_HandleTypeDef *huart, uint8_t *pData, uint16_t
 163:Core/Src/mainLoop.c ****   // Size)
 164:Core/Src/mainLoop.c ****   HAL_UART_Receive_IT(&huart2, (uint8_t *)(buf), 1);
 413              		.loc 1 164 3 is_stmt 1 view .LVU93
 414 0064 0122     		movs	r2, #1
 415 0066 4649     		ldr	r1, .L31+48
 416 0068 4648     		ldr	r0, .L31+52
 417 006a FFF7FEFF 		bl	HAL_UART_Receive_IT
 418              	.LVL35:
 165:Core/Src/mainLoop.c ****   init_ad9520();
 419              		.loc 1 165 3 view .LVU94
 420 006e FFF7FEFF 		bl	init_ad9520
 421              	.LVL36:
 166:Core/Src/mainLoop.c ****   enable_tim4_capture_Iterrupt();
 422              		.loc 1 166 3 view .LVU95
 423 0072 FFF7FEFF 		bl	enable_tim4_capture_Iterrupt
 424              	.LVL37:
 167:Core/Src/mainLoop.c ****   while (1) {
 425              		.loc 1 167 3 view .LVU96
 168:Core/Src/mainLoop.c ****     // do{
 169:Core/Src/mainLoop.c **** 
 170:Core/Src/mainLoop.c ****     // }while(0);
 171:Core/Src/mainLoop.c **** 
 172:Core/Src/mainLoop.c ****     i++;
 426              		.loc 1 172 5 view .LVU97
 427              		.loc 1 172 6 is_stmt 0 view .LVU98
 428 0076 444A     		ldr	r2, .L31+56
 429 0078 1368     		ldr	r3, [r2]
 430 007a 0133     		adds	r3, r3, #1
 431 007c 1360     		str	r3, [r2]
 173:Core/Src/mainLoop.c **** 
 174:Core/Src/mainLoop.c ****     // HAL_DAC_SetValue(DAC_HandleTypeDef* hdac, uint32_t Channel, uint32_t
 175:Core/Src/mainLoop.c ****     // Alignment, uint32_t Data)
 176:Core/Src/mainLoop.c **** 
 177:Core/Src/mainLoop.c ****     // HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R, i++);
 178:Core/Src/mainLoop.c ****     // init_ad9520();
 179:Core/Src/mainLoop.c ****     // set_ad9520_device();
 180:Core/Src/mainLoop.c ****     // HAL_GPIO_TogglePin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin)
 181:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 432              		.loc 1 181 5 is_stmt 1 view .LVU99
 433 007e 434E     		ldr	r6, .L31+60
 434 0080 4FF40061 		mov	r1, #2048
 435 0084 3046     		mov	r0, r6
 436 0086 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 437              	.LVL38:
 182:Core/Src/mainLoop.c ****     HAL_Delay(3);
 438              		.loc 1 182 5 view .LVU100
 439 008a 0320     		movs	r0, #3
 440 008c FFF7FEFF 		bl	HAL_Delay
 441              	.LVL39:
 183:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 442              		.loc 1 183 5 view .LVU101
 443 0090 4FF48051 		mov	r1, #4096
 444 0094 3046     		mov	r0, r6
 445 0096 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 446              	.LVL40:
 184:Core/Src/mainLoop.c ****     HAL_Delay(300);
ARM GAS  /tmp/ccJOVKBd.s 			page 12


 447              		.loc 1 184 5 view .LVU102
 448 009a 4FF49670 		mov	r0, #300
 449 009e FFF7FEFF 		bl	HAL_Delay
 450              	.LVL41:
 185:Core/Src/mainLoop.c ****     check_ad9520_status();
 451              		.loc 1 185 5 view .LVU103
 452 00a2 FFF7FEFF 		bl	check_ad9520_status
 453              	.LVL42:
 186:Core/Src/mainLoop.c ****     // printf("hello world %ld:float %f\n",i,f*i);
 187:Core/Src/mainLoop.c ****     fre_dif = chanl1_capNum - chanl2_capNum;
 454              		.loc 1 187 5 view .LVU104
 455              		.loc 1 187 29 is_stmt 0 view .LVU105
 456 00a6 3A4B     		ldr	r3, .L31+64
 457 00a8 3A4A     		ldr	r2, .L31+68
 458 00aa 9B1A     		subs	r3, r3, r2
 459 00ac 9B10     		asrs	r3, r3, #2
 460              		.loc 1 187 13 view .LVU106
 461 00ae 2B60     		str	r3, [r5]
 462 00b0 1FE0     		b	.L27
 463              	.LVL43:
 464              	.L29:
 188:Core/Src/mainLoop.c **** 
 189:Core/Src/mainLoop.c ****     while (1) {
 190:Core/Src/mainLoop.c ****       // if(chanl1_completed==1 ){
 191:Core/Src/mainLoop.c ****       //   chanl1_completed=0;
 192:Core/Src/mainLoop.c ****       //   transform_capNum_to_xNum((uint32_t *)(&chanl1_capNum[2]),
 193:Core/Src/mainLoop.c ****       //   chanl1_xNum, CAPNUM); average_xNum1 =
 194:Core/Src/mainLoop.c ****       //   (float)cal_average_xNum(chanl1_xNum, CAPNUM);
 195:Core/Src/mainLoop.c ****       //   //HAL_TIM_IC_Start_DMA(&htim4, TIM_CHANNEL_1,
 196:Core/Src/mainLoop.c ****       //   (uint32_t*)chanl1_capNum, CAPNUM);
 197:Core/Src/mainLoop.c **** 
 198:Core/Src/mainLoop.c ****       //   break;
 199:Core/Src/mainLoop.c ****       // }else if(chanl2_completed==1){
 200:Core/Src/mainLoop.c ****       //   chanl2_completed=0;
 201:Core/Src/mainLoop.c ****       //   //HAL_TIM_IC_Start_DMA(&htim4, TIM_CHANNEL_2,
 202:Core/Src/mainLoop.c ****       //   (uint32_t*)chanl2_capNum, CAPNUM); break;
 203:Core/Src/mainLoop.c ****       // }
 204:Core/Src/mainLoop.c ****       generateSinWave(dacN % SAMPLE_RATE);
 205:Core/Src/mainLoop.c ****       max5307_w_chanel(max_ch1, round(tmp), max_outenable);
 206:Core/Src/mainLoop.c ****       max5307_w_chanel(DACP_1, round(tmp), max_outenable);
 207:Core/Src/mainLoop.c ****       dacN = dacN + dacSign;
 208:Core/Src/mainLoop.c ****       if (v_dianya > 1) {
 209:Core/Src/mainLoop.c ****         v_dianya = 0;
 210:Core/Src/mainLoop.c ****       } else {
 211:Core/Src/mainLoop.c ****         v_dianya = 3.3;
 465              		.loc 1 211 9 is_stmt 1 view .LVU107
 466              		.loc 1 211 18 is_stmt 0 view .LVU108
 467 00b2 2F4B     		ldr	r3, .L31+32
 468 00b4 384A     		ldr	r2, .L31+72
 469 00b6 1A60     		str	r2, [r3]	@ float
 470              	.L26:
 212:Core/Src/mainLoop.c ****       }
 213:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 471              		.loc 1 213 7 is_stmt 1 view .LVU109
 214:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 472              		.loc 1 214 45 is_stmt 0 view .LVU110
 473 00b8 2D4B     		ldr	r3, .L31+32
ARM GAS  /tmp/ccJOVKBd.s 			page 13


 474 00ba 1868     		ldr	r0, [r3]	@ float
 475 00bc FFF7FEFF 		bl	__aeabi_f2d
 476              	.LVL44:
 477 00c0 23A3     		adr	r3, .L31
 478 00c2 D3E90023 		ldrd	r2, [r3]
 479 00c6 FFF7FEFF 		bl	__aeabi_ddiv
 480              	.LVL45:
 481              		.loc 1 214 52 view .LVU111
 482 00ca 0022     		movs	r2, #0
 483 00cc 2B4B     		ldr	r3, .L31+44
 484 00ce FFF7FEFF 		bl	__aeabi_dmul
 485              	.LVL46:
 213:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 486              		.loc 1 213 7 view .LVU112
 487 00d2 FFF7FEFF 		bl	__aeabi_d2uiz
 488              	.LVL47:
 489 00d6 0346     		mov	r3, r0
 490 00d8 0022     		movs	r2, #0
 491 00da 1146     		mov	r1, r2
 492 00dc 2648     		ldr	r0, .L31+40
 493 00de FFF7FEFF 		bl	HAL_DAC_SetValue
 494              	.LVL48:
 215:Core/Src/mainLoop.c ****       HAL_Delay(100);
 495              		.loc 1 215 7 is_stmt 1 view .LVU113
 496 00e2 6420     		movs	r0, #100
 497 00e4 FFF7FEFF 		bl	HAL_Delay
 498              	.LVL49:
 216:Core/Src/mainLoop.c ****       HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 499              		.loc 1 216 7 view .LVU114
 500 00e8 4FF48051 		mov	r1, #4096
 501 00ec 2748     		ldr	r0, .L31+60
 502 00ee FFF7FEFF 		bl	HAL_GPIO_TogglePin
 503              	.LVL50:
 189:Core/Src/mainLoop.c ****       // if(chanl1_completed==1 ){
 504              		.loc 1 189 11 view .LVU115
 505              	.L27:
 189:Core/Src/mainLoop.c ****       // if(chanl1_completed==1 ){
 506              		.loc 1 189 5 view .LVU116
 204:Core/Src/mainLoop.c ****       max5307_w_chanel(max_ch1, round(tmp), max_outenable);
 507              		.loc 1 204 7 view .LVU117
 508 00f2 C4F30B00 		ubfx	r0, r4, #0, #12
 509 00f6 FFF7FEFF 		bl	generateSinWave
 510              	.LVL51:
 205:Core/Src/mainLoop.c ****       max5307_w_chanel(DACP_1, round(tmp), max_outenable);
 511              		.loc 1 205 7 view .LVU118
 205:Core/Src/mainLoop.c ****       max5307_w_chanel(DACP_1, round(tmp), max_outenable);
 512              		.loc 1 205 33 is_stmt 0 view .LVU119
 513 00fa 284D     		ldr	r5, .L31+76
 514 00fc 95ED000B 		vldr.64	d0, [r5]
 515 0100 FFF7FEFF 		bl	round
 516              	.LVL52:
 517 0104 51EC100B 		vmov	r0, r1, d0
 205:Core/Src/mainLoop.c ****       max5307_w_chanel(DACP_1, round(tmp), max_outenable);
 518              		.loc 1 205 7 view .LVU120
 519 0108 FFF7FEFF 		bl	__aeabi_d2uiz
 520              	.LVL53:
 521 010c 0146     		mov	r1, r0
ARM GAS  /tmp/ccJOVKBd.s 			page 14


 522 010e 0122     		movs	r2, #1
 523 0110 0220     		movs	r0, #2
 524 0112 FFF7FEFF 		bl	max5307_w_chanel
 525              	.LVL54:
 206:Core/Src/mainLoop.c ****       dacN = dacN + dacSign;
 526              		.loc 1 206 7 is_stmt 1 view .LVU121
 206:Core/Src/mainLoop.c ****       dacN = dacN + dacSign;
 527              		.loc 1 206 32 is_stmt 0 view .LVU122
 528 0116 95ED000B 		vldr.64	d0, [r5]
 529 011a FFF7FEFF 		bl	round
 530              	.LVL55:
 531 011e 51EC100B 		vmov	r0, r1, d0
 206:Core/Src/mainLoop.c ****       dacN = dacN + dacSign;
 532              		.loc 1 206 7 view .LVU123
 533 0122 FFF7FEFF 		bl	__aeabi_d2uiz
 534              	.LVL56:
 535 0126 0146     		mov	r1, r0
 536 0128 0122     		movs	r2, #1
 537 012a 0620     		movs	r0, #6
 538 012c FFF7FEFF 		bl	max5307_w_chanel
 539              	.LVL57:
 207:Core/Src/mainLoop.c ****       if (v_dianya > 1) {
 540              		.loc 1 207 7 is_stmt 1 view .LVU124
 207:Core/Src/mainLoop.c ****       if (v_dianya > 1) {
 541              		.loc 1 207 12 is_stmt 0 view .LVU125
 542 0130 0134     		adds	r4, r4, #1
 543              	.LVL58:
 208:Core/Src/mainLoop.c ****         v_dianya = 0;
 544              		.loc 1 208 7 is_stmt 1 view .LVU126
 208:Core/Src/mainLoop.c ****         v_dianya = 0;
 545              		.loc 1 208 20 is_stmt 0 view .LVU127
 546 0132 0F4B     		ldr	r3, .L31+32
 547 0134 93ED007A 		vldr.32	s14, [r3]
 208:Core/Src/mainLoop.c ****         v_dianya = 0;
 548              		.loc 1 208 10 view .LVU128
 549 0138 F7EE007A 		vmov.f32	s15, #1.0e+0
 550 013c B4EEE77A 		vcmpe.f32	s14, s15
 551 0140 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 552 0144 B5DD     		ble	.L29
 209:Core/Src/mainLoop.c ****       } else {
 553              		.loc 1 209 9 is_stmt 1 view .LVU129
 209:Core/Src/mainLoop.c ****       } else {
 554              		.loc 1 209 18 is_stmt 0 view .LVU130
 555 0146 0022     		movs	r2, #0
 556 0148 1A60     		str	r2, [r3]	@ float
 557 014a B5E7     		b	.L26
 558              	.L32:
 559 014c AFF30080 		.align	3
 560              	.L31:
 561 0150 66666666 		.word	1717986918
 562 0154 66660A40 		.word	1074423398
 563 0158 00000000 		.word	complete_sign
 564 015c 00000000 		.word	xx
 565 0160 00000000 		.word	yy
 566 0164 00000000 		.word	.LANCHOR0
 567 0168 00000000 		.word	xx_cnt
 568 016c 00000000 		.word	yy_cnt
ARM GAS  /tmp/ccJOVKBd.s 			page 15


 569 0170 00000000 		.word	v_dianya
 570 0174 3333D33F 		.word	1070805811
 571 0178 00000000 		.word	hdac
 572 017c 0000B040 		.word	1085276160
 573 0180 00000000 		.word	buf
 574 0184 00000000 		.word	huart2
 575 0188 00000000 		.word	.LANCHOR1
 576 018c 00080240 		.word	1073874944
 577 0190 00000000 		.word	chanl1_capNum
 578 0194 00000000 		.word	chanl2_capNum
 579 0198 33335340 		.word	1079194419
 580 019c 00000000 		.word	tmp
 581              		.cfi_endproc
 582              	.LFE138:
 584              		.section	.text.HAL_TIM_IC_CaptureCallback,"ax",%progbits
 585              		.align	1
 586              		.global	HAL_TIM_IC_CaptureCallback
 587              		.syntax unified
 588              		.thumb
 589              		.thumb_func
 590              		.fpu fpv4-sp-d16
 592              	HAL_TIM_IC_CaptureCallback:
 593              	.LVL59:
 594              	.LFB139:
 217:Core/Src/mainLoop.c ****       // check_ad9520_status();
 218:Core/Src/mainLoop.c ****     }
 219:Core/Src/mainLoop.c **** 
 220:Core/Src/mainLoop.c ****     while (complete_sign == 0) {
 221:Core/Src/mainLoop.c ****       HAL_Delay(3);
 222:Core/Src/mainLoop.c ****     };
 223:Core/Src/mainLoop.c ****     complete_sign = 0;
 224:Core/Src/mainLoop.c ****     // fre_dif=chanl1_midx - chanl2_midx;
 225:Core/Src/mainLoop.c ****     // printf("%ld = %ld - %ld \n",fre_dif,xx,yy);
 226:Core/Src/mainLoop.c ****     // printf("cha1=%ld,cha2=%ld\n",xx-xx_bak,yy-yy_bak);
 227:Core/Src/mainLoop.c ****     xx_bak = xx;
 228:Core/Src/mainLoop.c ****     yy_bak = yy;
 229:Core/Src/mainLoop.c **** 
 230:Core/Src/mainLoop.c ****     HAL_Delay(2);
 231:Core/Src/mainLoop.c ****   }
 232:Core/Src/mainLoop.c **** }
 233:Core/Src/mainLoop.c **** 
 234:Core/Src/mainLoop.c **** void HAL_TIM_IC_CaptureCallback(TIM_HandleTypeDef *htim) {
 595              		.loc 1 234 58 is_stmt 1 view -0
 596              		.cfi_startproc
 597              		@ args = 0, pretend = 0, frame = 0
 598              		@ frame_needed = 0, uses_anonymous_args = 0
 599              		@ link register save eliminated.
 235:Core/Src/mainLoop.c ****   if (htim->Instance == TIM4) {
 600              		.loc 1 235 3 view .LVU132
 601              		.loc 1 235 11 is_stmt 0 view .LVU133
 602 0000 0368     		ldr	r3, [r0]
 603              		.loc 1 235 6 view .LVU134
 604 0002 104A     		ldr	r2, .L40
 605 0004 9342     		cmp	r3, r2
 606 0006 03D0     		beq	.L37
 236:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1) {
 237:Core/Src/mainLoop.c ****       // chanl1_capNum++;
ARM GAS  /tmp/ccJOVKBd.s 			page 16


 238:Core/Src/mainLoop.c ****       // chanl2_capNum = TIM4->CCR1;
 239:Core/Src/mainLoop.c ****       // xx = TIM4->CCR1;
 240:Core/Src/mainLoop.c ****       // for(i=1;i<CAPNUM;i++){
 241:Core/Src/mainLoop.c ****       //   chanl1_capNum[i-1]=chanl1_capNum[i]-chanl1_capNum[i-1];
 242:Core/Src/mainLoop.c ****       // }
 243:Core/Src/mainLoop.c ****       // yy = TIM4->CCR2;
 244:Core/Src/mainLoop.c ****       // chanl1_completed=1;
 245:Core/Src/mainLoop.c ****       chanl1_midx = chanl1_capNum[CAPNUM / 2 - 2] & 0xffff;
 246:Core/Src/mainLoop.c ****       // chanl2_midx = TIM4->CCR2;
 247:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_1;
 248:Core/Src/mainLoop.c ****     }
 249:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_2) {
 250:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 251:Core/Src/mainLoop.c ****       chanl2_midx = chanl2_capNum[CAPNUM / 2 - 2] & 0xffff;
 252:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 253:Core/Src/mainLoop.c ****     }
 254:Core/Src/mainLoop.c ****   } else if (htim->Instance == TIM1) {
 607              		.loc 1 254 10 is_stmt 1 view .LVU135
 608              		.loc 1 254 13 is_stmt 0 view .LVU136
 609 0008 0F4A     		ldr	r2, .L40+4
 610 000a 9342     		cmp	r3, r2
 611 000c 11D0     		beq	.L38
 612              	.L33:
 255:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_4) {
 256:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 257:Core/Src/mainLoop.c ****       chanl1_midx = chanl1_capNum[CAPNUM / 2 - 2] & 0xffff;
 258:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 259:Core/Src/mainLoop.c ****     }
 260:Core/Src/mainLoop.c ****   }
 261:Core/Src/mainLoop.c **** }
 613              		.loc 1 261 1 view .LVU137
 614 000e 7047     		bx	lr
 615              	.L37:
 236:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1) {
 616              		.loc 1 236 5 is_stmt 1 view .LVU138
 236:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1) {
 617              		.loc 1 236 13 is_stmt 0 view .LVU139
 618 0010 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 236:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1) {
 619              		.loc 1 236 8 view .LVU140
 620 0012 012B     		cmp	r3, #1
 621 0014 07D0     		beq	.L39
 622              	.L35:
 249:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 623              		.loc 1 249 5 is_stmt 1 view .LVU141
 249:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 624              		.loc 1 249 8 is_stmt 0 view .LVU142
 625 0016 022B     		cmp	r3, #2
 626 0018 F9D1     		bne	.L33
 251:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 627              		.loc 1 251 7 is_stmt 1 view .LVU143
 251:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 628              		.loc 1 251 51 is_stmt 0 view .LVU144
 629 001a 0C4B     		ldr	r3, .L40+8
 630 001c B3F8C020 		ldrh	r2, [r3, #192]
 251:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 631              		.loc 1 251 19 view .LVU145
ARM GAS  /tmp/ccJOVKBd.s 			page 17


 632 0020 0B4B     		ldr	r3, .L40+12
 633 0022 1A60     		str	r2, [r3]
 634 0024 7047     		bx	lr
 635              	.L39:
 245:Core/Src/mainLoop.c ****       // chanl2_midx = TIM4->CCR2;
 636              		.loc 1 245 7 is_stmt 1 view .LVU146
 245:Core/Src/mainLoop.c ****       // chanl2_midx = TIM4->CCR2;
 637              		.loc 1 245 51 is_stmt 0 view .LVU147
 638 0026 0B4A     		ldr	r2, .L40+16
 639 0028 B2F8C010 		ldrh	r1, [r2, #192]
 245:Core/Src/mainLoop.c ****       // chanl2_midx = TIM4->CCR2;
 640              		.loc 1 245 19 view .LVU148
 641 002c 0A4A     		ldr	r2, .L40+20
 642 002e 1160     		str	r1, [r2]
 643 0030 F1E7     		b	.L35
 644              	.L38:
 255:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 645              		.loc 1 255 5 is_stmt 1 view .LVU149
 255:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 646              		.loc 1 255 13 is_stmt 0 view .LVU150
 647 0032 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 255:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 648              		.loc 1 255 8 view .LVU151
 649 0034 082B     		cmp	r3, #8
 650 0036 EAD1     		bne	.L33
 257:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 651              		.loc 1 257 7 is_stmt 1 view .LVU152
 257:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 652              		.loc 1 257 51 is_stmt 0 view .LVU153
 653 0038 064B     		ldr	r3, .L40+16
 654 003a B3F8C020 		ldrh	r2, [r3, #192]
 257:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 655              		.loc 1 257 19 view .LVU154
 656 003e 064B     		ldr	r3, .L40+20
 657 0040 1A60     		str	r2, [r3]
 658              		.loc 1 261 1 view .LVU155
 659 0042 E4E7     		b	.L33
 660              	.L41:
 661              		.align	2
 662              	.L40:
 663 0044 00080040 		.word	1073743872
 664 0048 00000140 		.word	1073807360
 665 004c 00000000 		.word	chanl2_capNum
 666 0050 00000000 		.word	.LANCHOR3
 667 0054 00000000 		.word	chanl1_capNum
 668 0058 00000000 		.word	.LANCHOR2
 669              		.cfi_endproc
 670              	.LFE139:
 672              		.section	.text.HAL_TIM_PeriodElapsedCallback,"ax",%progbits
 673              		.align	1
 674              		.global	HAL_TIM_PeriodElapsedCallback
 675              		.syntax unified
 676              		.thumb
 677              		.thumb_func
 678              		.fpu fpv4-sp-d16
 680              	HAL_TIM_PeriodElapsedCallback:
 681              	.LVL60:
ARM GAS  /tmp/ccJOVKBd.s 			page 18


 682              	.LFB140:
 262:Core/Src/mainLoop.c **** 
 263:Core/Src/mainLoop.c **** void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim) {
 683              		.loc 1 263 61 is_stmt 1 view -0
 684              		.cfi_startproc
 685              		@ args = 0, pretend = 0, frame = 0
 686              		@ frame_needed = 0, uses_anonymous_args = 0
 687              		.loc 1 263 61 is_stmt 0 view .LVU157
 688 0000 08B5     		push	{r3, lr}
 689              	.LCFI8:
 690              		.cfi_def_cfa_offset 8
 691              		.cfi_offset 3, -8
 692              		.cfi_offset 14, -4
 264:Core/Src/mainLoop.c ****   // htim4.Init.Period = 65535; 1ms ÂÆöÊó∂
 265:Core/Src/mainLoop.c ****   //  if(htim == &htim4){
 266:Core/Src/mainLoop.c ****   //    HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 267:Core/Src/mainLoop.c ****   //    xx= HAL_TIM_ReadCapturedValue(&htim4, TIM_CHANNEL_1);
 268:Core/Src/mainLoop.c **** 
 269:Core/Src/mainLoop.c ****   //   yy = TIM4->CCR2;
 270:Core/Src/mainLoop.c ****   //   //TIM4->CCR1=0;
 271:Core/Src/mainLoop.c ****   //   //TIM4->CCR2=0;
 272:Core/Src/mainLoop.c ****   //   fre_dif = xx - yy;
 273:Core/Src/mainLoop.c ****   // }
 274:Core/Src/mainLoop.c ****   if (htim == &htim5) {
 693              		.loc 1 274 3 is_stmt 1 view .LVU158
 694              		.loc 1 274 6 is_stmt 0 view .LVU159
 695 0002 0C4B     		ldr	r3, .L46
 696 0004 8342     		cmp	r3, r0
 697 0006 00D0     		beq	.L45
 698              	.LVL61:
 699              	.L42:
 275:Core/Src/mainLoop.c ****     xx = TIM4->CNT;
 276:Core/Src/mainLoop.c ****     // yy = TIM4->CCR2;
 277:Core/Src/mainLoop.c ****     yy = TIM1->CNT;
 278:Core/Src/mainLoop.c ****     fre_dif = xx - yy;
 279:Core/Src/mainLoop.c ****     complete_sign = 1;
 280:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 281:Core/Src/mainLoop.c ****   }
 282:Core/Src/mainLoop.c ****   // if(htim == &htim1){
 283:Core/Src/mainLoop.c ****   //   xx_cnt++;
 284:Core/Src/mainLoop.c ****   // }
 285:Core/Src/mainLoop.c ****   // if(htim == &htim4){
 286:Core/Src/mainLoop.c ****   //   yy_cnt++;
 287:Core/Src/mainLoop.c ****   // }
 288:Core/Src/mainLoop.c **** }
 700              		.loc 1 288 1 view .LVU160
 701 0008 08BD     		pop	{r3, pc}
 702              	.LVL62:
 703              	.L45:
 275:Core/Src/mainLoop.c ****     xx = TIM4->CNT;
 704              		.loc 1 275 5 is_stmt 1 view .LVU161
 275:Core/Src/mainLoop.c ****     xx = TIM4->CNT;
 705              		.loc 1 275 14 is_stmt 0 view .LVU162
 706 000a 0B4B     		ldr	r3, .L46+4
 707 000c 5B6A     		ldr	r3, [r3, #36]
 275:Core/Src/mainLoop.c ****     xx = TIM4->CNT;
 708              		.loc 1 275 8 view .LVU163
ARM GAS  /tmp/ccJOVKBd.s 			page 19


 709 000e 0B4A     		ldr	r2, .L46+8
 710 0010 1360     		str	r3, [r2]
 277:Core/Src/mainLoop.c ****     fre_dif = xx - yy;
 711              		.loc 1 277 5 is_stmt 1 view .LVU164
 277:Core/Src/mainLoop.c ****     fre_dif = xx - yy;
 712              		.loc 1 277 14 is_stmt 0 view .LVU165
 713 0012 0B4A     		ldr	r2, .L46+12
 714 0014 526A     		ldr	r2, [r2, #36]
 277:Core/Src/mainLoop.c ****     fre_dif = xx - yy;
 715              		.loc 1 277 8 view .LVU166
 716 0016 0B49     		ldr	r1, .L46+16
 717 0018 0A60     		str	r2, [r1]
 278:Core/Src/mainLoop.c ****     complete_sign = 1;
 718              		.loc 1 278 5 is_stmt 1 view .LVU167
 278:Core/Src/mainLoop.c ****     complete_sign = 1;
 719              		.loc 1 278 18 is_stmt 0 view .LVU168
 720 001a 9B1A     		subs	r3, r3, r2
 278:Core/Src/mainLoop.c ****     complete_sign = 1;
 721              		.loc 1 278 13 view .LVU169
 722 001c 0A4A     		ldr	r2, .L46+20
 723 001e 1360     		str	r3, [r2]
 279:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 724              		.loc 1 279 5 is_stmt 1 view .LVU170
 279:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 725              		.loc 1 279 19 is_stmt 0 view .LVU171
 726 0020 0A4B     		ldr	r3, .L46+24
 727 0022 0122     		movs	r2, #1
 728 0024 1A60     		str	r2, [r3]
 280:Core/Src/mainLoop.c ****   }
 729              		.loc 1 280 5 is_stmt 1 view .LVU172
 730 0026 4FF40061 		mov	r1, #2048
 731 002a 0948     		ldr	r0, .L46+28
 732              	.LVL63:
 280:Core/Src/mainLoop.c ****   }
 733              		.loc 1 280 5 is_stmt 0 view .LVU173
 734 002c FFF7FEFF 		bl	HAL_GPIO_TogglePin
 735              	.LVL64:
 736              		.loc 1 288 1 view .LVU174
 737 0030 EAE7     		b	.L42
 738              	.L47:
 739 0032 00BF     		.align	2
 740              	.L46:
 741 0034 00000000 		.word	htim5
 742 0038 00080040 		.word	1073743872
 743 003c 00000000 		.word	xx
 744 0040 00000140 		.word	1073807360
 745 0044 00000000 		.word	yy
 746 0048 00000000 		.word	.LANCHOR0
 747 004c 00000000 		.word	complete_sign
 748 0050 00080240 		.word	1073874944
 749              		.cfi_endproc
 750              	.LFE140:
 752              		.global	__aeabi_d2f
 753              		.global	__aeabi_dsub
 754              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 755              		.align	1
 756              		.global	HAL_UART_RxCpltCallback
ARM GAS  /tmp/ccJOVKBd.s 			page 20


 757              		.syntax unified
 758              		.thumb
 759              		.thumb_func
 760              		.fpu fpv4-sp-d16
 762              	HAL_UART_RxCpltCallback:
 763              	.LVL65:
 764              	.LFB141:
 289:Core/Src/mainLoop.c **** 
 290:Core/Src/mainLoop.c **** // void HAL_GPIO_EXTI_Callback( uint16_t GPIO_Pin)
 291:Core/Src/mainLoop.c **** // {
 292:Core/Src/mainLoop.c **** // 	if(GPIO_Pin == capture_sig_it_Pin){
 293:Core/Src/mainLoop.c **** // 	   //This block will be triggered after pin activated.
 294:Core/Src/mainLoop.c **** //      chanl2_capNum++;
 295:Core/Src/mainLoop.c **** // 	}
 296:Core/Src/mainLoop.c **** // }
 297:Core/Src/mainLoop.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart) {
 765              		.loc 1 297 57 is_stmt 1 view -0
 766              		.cfi_startproc
 767              		@ args = 0, pretend = 0, frame = 0
 768              		@ frame_needed = 0, uses_anonymous_args = 0
 298:Core/Src/mainLoop.c ****   if (huart == &huart2) {
 769              		.loc 1 298 3 view .LVU176
 770              		.loc 1 298 6 is_stmt 0 view .LVU177
 771 0000 514B     		ldr	r3, .L63+24
 772 0002 8342     		cmp	r3, r0
 773 0004 00D0     		beq	.L58
 774 0006 7047     		bx	lr
 775              	.L58:
 297:Core/Src/mainLoop.c ****   if (huart == &huart2) {
 776              		.loc 1 297 57 view .LVU178
 777 0008 10B5     		push	{r4, lr}
 778              	.LCFI9:
 779              		.cfi_def_cfa_offset 8
 780              		.cfi_offset 4, -8
 781              		.cfi_offset 14, -4
 299:Core/Src/mainLoop.c ****     // xx++;
 300:Core/Src/mainLoop.c ****     // uint8_t tmp = (uint16_t)(huart->Instance->DR & (uint16_t)0x01FF);
 301:Core/Src/mainLoop.c ****     if (buf[0] == 'u') {
 782              		.loc 1 301 5 is_stmt 1 view .LVU179
 783              		.loc 1 301 12 is_stmt 0 view .LVU180
 784 000a 504B     		ldr	r3, .L63+28
 785 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 786              		.loc 1 301 8 view .LVU181
 787 000e 752B     		cmp	r3, #117
 788 0010 0BD0     		beq	.L59
 302:Core/Src/mainLoop.c ****       // HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 303:Core/Src/mainLoop.c ****       v_dianya += 0.1;
 304:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 305:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 306:Core/Src/mainLoop.c ****     } else if (buf[0] == 'd') {
 789              		.loc 1 306 12 is_stmt 1 view .LVU182
 790              		.loc 1 306 15 is_stmt 0 view .LVU183
 791 0012 642B     		cmp	r3, #100
 792 0014 29D0     		beq	.L60
 307:Core/Src/mainLoop.c ****       // HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 308:Core/Src/mainLoop.c ****       v_dianya -= 0.1;
 309:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
ARM GAS  /tmp/ccJOVKBd.s 			page 21


 310:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 311:Core/Src/mainLoop.c ****     } else if (buf[0] == 'r') {
 793              		.loc 1 311 12 is_stmt 1 view .LVU184
 794              		.loc 1 311 15 is_stmt 0 view .LVU185
 795 0016 722B     		cmp	r3, #114
 796 0018 47D0     		beq	.L61
 312:Core/Src/mainLoop.c ****       v_dianya += 0.01;
 313:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 314:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 315:Core/Src/mainLoop.c ****     } else if (buf[0] == 'x') {
 797              		.loc 1 315 12 is_stmt 1 view .LVU186
 798              		.loc 1 315 15 is_stmt 0 view .LVU187
 799 001a 782B     		cmp	r3, #120
 800 001c 65D0     		beq	.L62
 801              	.LVL66:
 802              	.L51:
 316:Core/Src/mainLoop.c ****       v_dianya -= 0.01;
 317:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 318:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 319:Core/Src/mainLoop.c ****     }
 320:Core/Src/mainLoop.c ****     HAL_UART_Receive_IT(&huart2, (uint8_t *)(buf), 1);
 803              		.loc 1 320 5 is_stmt 1 view .LVU188
 804 001e 0122     		movs	r2, #1
 805 0020 4A49     		ldr	r1, .L63+28
 806 0022 4948     		ldr	r0, .L63+24
 807 0024 FFF7FEFF 		bl	HAL_UART_Receive_IT
 808              	.LVL67:
 321:Core/Src/mainLoop.c ****   }
 322:Core/Src/mainLoop.c **** }
 809              		.loc 1 322 1 is_stmt 0 view .LVU189
 810 0028 10BD     		pop	{r4, pc}
 811              	.LVL68:
 812              	.L59:
 303:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 813              		.loc 1 303 7 is_stmt 1 view .LVU190
 303:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 814              		.loc 1 303 16 is_stmt 0 view .LVU191
 815 002a 494C     		ldr	r4, .L63+32
 816 002c 2068     		ldr	r0, [r4]	@ float
 817              	.LVL69:
 303:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 818              		.loc 1 303 16 view .LVU192
 819 002e FFF7FEFF 		bl	__aeabi_f2d
 820              	.LVL70:
 821 0032 3FA3     		adr	r3, .L63
 822 0034 D3E90023 		ldrd	r2, [r3]
 823 0038 FFF7FEFF 		bl	__aeabi_dadd
 824              	.LVL71:
 825 003c FFF7FEFF 		bl	__aeabi_d2f
 826              	.LVL72:
 827 0040 2060     		str	r0, [r4]	@ float
 304:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 828              		.loc 1 304 7 is_stmt 1 view .LVU193
 305:Core/Src/mainLoop.c ****     } else if (buf[0] == 'd') {
 829              		.loc 1 305 45 is_stmt 0 view .LVU194
 830 0042 FFF7FEFF 		bl	__aeabi_f2d
 831              	.LVL73:
ARM GAS  /tmp/ccJOVKBd.s 			page 22


 832 0046 3CA3     		adr	r3, .L63+8
 833 0048 D3E90023 		ldrd	r2, [r3]
 834 004c FFF7FEFF 		bl	__aeabi_ddiv
 835              	.LVL74:
 305:Core/Src/mainLoop.c ****     } else if (buf[0] == 'd') {
 836              		.loc 1 305 52 view .LVU195
 837 0050 0022     		movs	r2, #0
 838 0052 404B     		ldr	r3, .L63+36
 839 0054 FFF7FEFF 		bl	__aeabi_dmul
 840              	.LVL75:
 304:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 841              		.loc 1 304 7 view .LVU196
 842 0058 FFF7FEFF 		bl	__aeabi_d2uiz
 843              	.LVL76:
 844 005c 0346     		mov	r3, r0
 845 005e 0022     		movs	r2, #0
 846 0060 1146     		mov	r1, r2
 847 0062 3D48     		ldr	r0, .L63+40
 848 0064 FFF7FEFF 		bl	HAL_DAC_SetValue
 849              	.LVL77:
 850 0068 D9E7     		b	.L51
 851              	.LVL78:
 852              	.L60:
 308:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 853              		.loc 1 308 7 is_stmt 1 view .LVU197
 308:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 854              		.loc 1 308 16 is_stmt 0 view .LVU198
 855 006a 394C     		ldr	r4, .L63+32
 856 006c 2068     		ldr	r0, [r4]	@ float
 857              	.LVL79:
 308:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 858              		.loc 1 308 16 view .LVU199
 859 006e FFF7FEFF 		bl	__aeabi_f2d
 860              	.LVL80:
 861 0072 2FA3     		adr	r3, .L63
 862 0074 D3E90023 		ldrd	r2, [r3]
 863 0078 FFF7FEFF 		bl	__aeabi_dsub
 864              	.LVL81:
 865 007c FFF7FEFF 		bl	__aeabi_d2f
 866              	.LVL82:
 867 0080 2060     		str	r0, [r4]	@ float
 309:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 868              		.loc 1 309 7 is_stmt 1 view .LVU200
 310:Core/Src/mainLoop.c ****     } else if (buf[0] == 'r') {
 869              		.loc 1 310 45 is_stmt 0 view .LVU201
 870 0082 FFF7FEFF 		bl	__aeabi_f2d
 871              	.LVL83:
 872 0086 2CA3     		adr	r3, .L63+8
 873 0088 D3E90023 		ldrd	r2, [r3]
 874 008c FFF7FEFF 		bl	__aeabi_ddiv
 875              	.LVL84:
 310:Core/Src/mainLoop.c ****     } else if (buf[0] == 'r') {
 876              		.loc 1 310 52 view .LVU202
 877 0090 0022     		movs	r2, #0
 878 0092 304B     		ldr	r3, .L63+36
 879 0094 FFF7FEFF 		bl	__aeabi_dmul
 880              	.LVL85:
ARM GAS  /tmp/ccJOVKBd.s 			page 23


 309:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 881              		.loc 1 309 7 view .LVU203
 882 0098 FFF7FEFF 		bl	__aeabi_d2uiz
 883              	.LVL86:
 884 009c 0346     		mov	r3, r0
 885 009e 0022     		movs	r2, #0
 886 00a0 1146     		mov	r1, r2
 887 00a2 2D48     		ldr	r0, .L63+40
 888 00a4 FFF7FEFF 		bl	HAL_DAC_SetValue
 889              	.LVL87:
 890 00a8 B9E7     		b	.L51
 891              	.LVL88:
 892              	.L61:
 312:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 893              		.loc 1 312 7 is_stmt 1 view .LVU204
 312:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 894              		.loc 1 312 16 is_stmt 0 view .LVU205
 895 00aa 294C     		ldr	r4, .L63+32
 896 00ac 2068     		ldr	r0, [r4]	@ float
 897              	.LVL89:
 312:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 898              		.loc 1 312 16 view .LVU206
 899 00ae FFF7FEFF 		bl	__aeabi_f2d
 900              	.LVL90:
 901 00b2 23A3     		adr	r3, .L63+16
 902 00b4 D3E90023 		ldrd	r2, [r3]
 903 00b8 FFF7FEFF 		bl	__aeabi_dadd
 904              	.LVL91:
 905 00bc FFF7FEFF 		bl	__aeabi_d2f
 906              	.LVL92:
 907 00c0 2060     		str	r0, [r4]	@ float
 313:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 908              		.loc 1 313 7 is_stmt 1 view .LVU207
 314:Core/Src/mainLoop.c ****     } else if (buf[0] == 'x') {
 909              		.loc 1 314 45 is_stmt 0 view .LVU208
 910 00c2 FFF7FEFF 		bl	__aeabi_f2d
 911              	.LVL93:
 912 00c6 1CA3     		adr	r3, .L63+8
 913 00c8 D3E90023 		ldrd	r2, [r3]
 914 00cc FFF7FEFF 		bl	__aeabi_ddiv
 915              	.LVL94:
 314:Core/Src/mainLoop.c ****     } else if (buf[0] == 'x') {
 916              		.loc 1 314 52 view .LVU209
 917 00d0 0022     		movs	r2, #0
 918 00d2 204B     		ldr	r3, .L63+36
 919 00d4 FFF7FEFF 		bl	__aeabi_dmul
 920              	.LVL95:
 313:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 921              		.loc 1 313 7 view .LVU210
 922 00d8 FFF7FEFF 		bl	__aeabi_d2uiz
 923              	.LVL96:
 924 00dc 0346     		mov	r3, r0
 925 00de 0022     		movs	r2, #0
 926 00e0 1146     		mov	r1, r2
 927 00e2 1D48     		ldr	r0, .L63+40
 928 00e4 FFF7FEFF 		bl	HAL_DAC_SetValue
 929              	.LVL97:
ARM GAS  /tmp/ccJOVKBd.s 			page 24


 930 00e8 99E7     		b	.L51
 931              	.LVL98:
 932              	.L62:
 316:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 933              		.loc 1 316 7 is_stmt 1 view .LVU211
 316:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 934              		.loc 1 316 16 is_stmt 0 view .LVU212
 935 00ea 194C     		ldr	r4, .L63+32
 936 00ec 2068     		ldr	r0, [r4]	@ float
 937              	.LVL99:
 316:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 938              		.loc 1 316 16 view .LVU213
 939 00ee FFF7FEFF 		bl	__aeabi_f2d
 940              	.LVL100:
 941 00f2 13A3     		adr	r3, .L63+16
 942 00f4 D3E90023 		ldrd	r2, [r3]
 943 00f8 FFF7FEFF 		bl	__aeabi_dsub
 944              	.LVL101:
 945 00fc FFF7FEFF 		bl	__aeabi_d2f
 946              	.LVL102:
 947 0100 2060     		str	r0, [r4]	@ float
 317:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 948              		.loc 1 317 7 is_stmt 1 view .LVU214
 318:Core/Src/mainLoop.c ****     }
 949              		.loc 1 318 45 is_stmt 0 view .LVU215
 950 0102 FFF7FEFF 		bl	__aeabi_f2d
 951              	.LVL103:
 952 0106 0CA3     		adr	r3, .L63+8
 953 0108 D3E90023 		ldrd	r2, [r3]
 954 010c FFF7FEFF 		bl	__aeabi_ddiv
 955              	.LVL104:
 318:Core/Src/mainLoop.c ****     }
 956              		.loc 1 318 52 view .LVU216
 957 0110 0022     		movs	r2, #0
 958 0112 104B     		ldr	r3, .L63+36
 959 0114 FFF7FEFF 		bl	__aeabi_dmul
 960              	.LVL105:
 317:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 961              		.loc 1 317 7 view .LVU217
 962 0118 FFF7FEFF 		bl	__aeabi_d2uiz
 963              	.LVL106:
 964 011c 0346     		mov	r3, r0
 965 011e 0022     		movs	r2, #0
 966 0120 1146     		mov	r1, r2
 967 0122 0D48     		ldr	r0, .L63+40
 968 0124 FFF7FEFF 		bl	HAL_DAC_SetValue
 969              	.LVL107:
 970 0128 79E7     		b	.L51
 971              	.L64:
 972 012a 00BFAFF3 		.align	3
 972      0080
 973              	.L63:
 974 0130 9A999999 		.word	2576980378
 975 0134 9999B93F 		.word	1069128089
 976 0138 66666666 		.word	1717986918
 977 013c 66660A40 		.word	1074423398
 978 0140 7B14AE47 		.word	1202590843
ARM GAS  /tmp/ccJOVKBd.s 			page 25


 979 0144 E17A843F 		.word	1065646817
 980 0148 00000000 		.word	huart2
 981 014c 00000000 		.word	buf
 982 0150 00000000 		.word	v_dianya
 983 0154 0000B040 		.word	1085276160
 984 0158 00000000 		.word	hdac
 985              		.cfi_endproc
 986              	.LFE141:
 988              		.section	.text.set_dac_initVal,"ax",%progbits
 989              		.align	1
 990              		.global	set_dac_initVal
 991              		.syntax unified
 992              		.thumb
 993              		.thumb_func
 994              		.fpu fpv4-sp-d16
 996              	set_dac_initVal:
 997              	.LVL108:
 998              	.LFB142:
 323:Core/Src/mainLoop.c **** 
 324:Core/Src/mainLoop.c **** void set_dac_initVal(uint32_t *val) {
 999              		.loc 1 324 37 is_stmt 1 view -0
 1000              		.cfi_startproc
 1001              		@ args = 0, pretend = 0, frame = 0
 1002              		@ frame_needed = 0, uses_anonymous_args = 0
 1003              		.loc 1 324 37 is_stmt 0 view .LVU219
 1004 0000 10B5     		push	{r4, lr}
 1005              	.LCFI10:
 1006              		.cfi_def_cfa_offset 8
 1007              		.cfi_offset 4, -8
 1008              		.cfi_offset 14, -4
 1009 0002 0446     		mov	r4, r0
 325:Core/Src/mainLoop.c ****   // set all dac val
 326:Core/Src/mainLoop.c **** 
 327:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch1, *(val + 0), max_outdisable);
 1010              		.loc 1 327 3 is_stmt 1 view .LVU220
 1011 0004 0222     		movs	r2, #2
 1012 0006 0168     		ldr	r1, [r0]
 1013 0008 1046     		mov	r0, r2
 1014              	.LVL109:
 1015              		.loc 1 327 3 is_stmt 0 view .LVU221
 1016 000a FFF7FEFF 		bl	max5307_w_chanel
 1017              	.LVL110:
 328:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch2, *(val + 1), max_outdisable);
 1018              		.loc 1 328 3 is_stmt 1 view .LVU222
 1019 000e 0222     		movs	r2, #2
 1020 0010 6168     		ldr	r1, [r4, #4]
 1021 0012 0320     		movs	r0, #3
 1022 0014 FFF7FEFF 		bl	max5307_w_chanel
 1023              	.LVL111:
 329:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch3, *(val + 2), max_outdisable);
 1024              		.loc 1 329 3 view .LVU223
 1025 0018 0222     		movs	r2, #2
 1026 001a A168     		ldr	r1, [r4, #8]
 1027 001c 0420     		movs	r0, #4
 1028 001e FFF7FEFF 		bl	max5307_w_chanel
 1029              	.LVL112:
 330:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch4, *(val + 3), max_outdisable);
ARM GAS  /tmp/ccJOVKBd.s 			page 26


 1030              		.loc 1 330 3 view .LVU224
 1031 0022 0222     		movs	r2, #2
 1032 0024 E168     		ldr	r1, [r4, #12]
 1033 0026 0520     		movs	r0, #5
 1034 0028 FFF7FEFF 		bl	max5307_w_chanel
 1035              	.LVL113:
 331:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch5, *(val + 4), max_outdisable);
 1036              		.loc 1 331 3 view .LVU225
 1037 002c 0222     		movs	r2, #2
 1038 002e 2169     		ldr	r1, [r4, #16]
 1039 0030 0620     		movs	r0, #6
 1040 0032 FFF7FEFF 		bl	max5307_w_chanel
 1041              	.LVL114:
 332:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch6, *(val + 5), max_outdisable);
 1042              		.loc 1 332 3 view .LVU226
 1043 0036 0222     		movs	r2, #2
 1044 0038 6169     		ldr	r1, [r4, #20]
 1045 003a 0720     		movs	r0, #7
 1046 003c FFF7FEFF 		bl	max5307_w_chanel
 1047              	.LVL115:
 333:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch7, *(val + 6), max_outdisable);
 1048              		.loc 1 333 3 view .LVU227
 1049 0040 0222     		movs	r2, #2
 1050 0042 A169     		ldr	r1, [r4, #24]
 1051 0044 0820     		movs	r0, #8
 1052 0046 FFF7FEFF 		bl	max5307_w_chanel
 1053              	.LVL116:
 334:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch8, *(val + 7), max_outdisable);
 1054              		.loc 1 334 3 view .LVU228
 1055 004a 0222     		movs	r2, #2
 1056 004c E169     		ldr	r1, [r4, #28]
 1057 004e 0920     		movs	r0, #9
 1058 0050 FFF7FEFF 		bl	max5307_w_chanel
 1059              	.LVL117:
 335:Core/Src/mainLoop.c **** 
 336:Core/Src/mainLoop.c ****   max5307_loadpin();
 1060              		.loc 1 336 3 view .LVU229
 1061 0054 FFF7FEFF 		bl	max5307_loadpin
 1062              	.LVL118:
 337:Core/Src/mainLoop.c **** }
 1063              		.loc 1 337 1 is_stmt 0 view .LVU230
 1064 0058 10BD     		pop	{r4, pc}
 1065              		.loc 1 337 1 view .LVU231
 1066              		.cfi_endproc
 1067              	.LFE142:
 1069              		.section	.text.cal_k_value_cp,"ax",%progbits
 1070              		.align	1
 1071              		.global	cal_k_value_cp
 1072              		.syntax unified
 1073              		.thumb
 1074              		.thumb_func
 1075              		.fpu fpv4-sp-d16
 1077              	cal_k_value_cp:
 1078              	.LFB143:
 338:Core/Src/mainLoop.c **** #define ADC_BUF_SIZE 4000  // 200=1ms
 339:Core/Src/mainLoop.c **** #define ADC_TIMES_N (ADC_BUF_SIZE * 2)
 340:Core/Src/mainLoop.c **** uint32_t value_adc1[ADC_BUF_SIZE], value_adc2[ADC_BUF_SIZE];
ARM GAS  /tmp/ccJOVKBd.s 			page 27


 341:Core/Src/mainLoop.c **** #define CP_TIMES_N (ADC_TIMES_N)
 342:Core/Src/mainLoop.c **** int32_t value_cp[CP_TIMES_N];
 343:Core/Src/mainLoop.c **** 
 344:Core/Src/mainLoop.c **** int32_t cal_k_value_cp(void) {  // cal k
 1079              		.loc 1 344 30 is_stmt 1 view -0
 1080              		.cfi_startproc
 1081              		@ args = 0, pretend = 0, frame = 0
 1082              		@ frame_needed = 0, uses_anonymous_args = 0
 1083              		@ link register save eliminated.
 1084 0000 10B4     		push	{r4}
 1085              	.LCFI11:
 1086              		.cfi_def_cfa_offset 4
 1087              		.cfi_offset 4, -4
 345:Core/Src/mainLoop.c ****   int32_t kUp = 0, kDown = 0;
 1088              		.loc 1 345 3 view .LVU233
 1089              	.LVL119:
 346:Core/Src/mainLoop.c ****   int32_t i = 0;
 1090              		.loc 1 346 3 view .LVU234
 347:Core/Src/mainLoop.c ****   for (i = 1; i < CP_TIMES_N; i++) {
 1091              		.loc 1 347 3 view .LVU235
 1092              		.loc 1 347 10 is_stmt 0 view .LVU236
 1093 0002 0123     		movs	r3, #1
 1094              	.LVL120:
 1095              	.L68:
 1096              		.loc 1 347 15 is_stmt 1 discriminator 1 view .LVU237
 1097              		.loc 1 347 3 is_stmt 0 discriminator 1 view .LVU238
 1098 0004 B3F5FA5F 		cmp	r3, #8000
 1099 0008 0ADA     		bge	.L75
 348:Core/Src/mainLoop.c ****     value_cp[i - 1] = value_cp[i] - value_cp[i - 1];
 1100              		.loc 1 348 5 is_stmt 1 discriminator 3 view .LVU239
 1101              		.loc 1 348 31 is_stmt 0 discriminator 3 view .LVU240
 1102 000a 144A     		ldr	r2, .L77
 1103 000c 52F82310 		ldr	r1, [r2, r3, lsl #2]
 1104              		.loc 1 348 48 discriminator 3 view .LVU241
 1105 0010 581E     		subs	r0, r3, #1
 1106              		.loc 1 348 45 discriminator 3 view .LVU242
 1107 0012 52F82040 		ldr	r4, [r2, r0, lsl #2]
 1108              		.loc 1 348 35 discriminator 3 view .LVU243
 1109 0016 091B     		subs	r1, r1, r4
 1110              		.loc 1 348 21 discriminator 3 view .LVU244
 1111 0018 42F82010 		str	r1, [r2, r0, lsl #2]
 347:Core/Src/mainLoop.c ****   for (i = 1; i < CP_TIMES_N; i++) {
 1112              		.loc 1 347 31 is_stmt 1 discriminator 3 view .LVU245
 347:Core/Src/mainLoop.c ****   for (i = 1; i < CP_TIMES_N; i++) {
 1113              		.loc 1 347 32 is_stmt 0 discriminator 3 view .LVU246
 1114 001c 0133     		adds	r3, r3, #1
 1115              	.LVL121:
 347:Core/Src/mainLoop.c ****   for (i = 1; i < CP_TIMES_N; i++) {
 1116              		.loc 1 347 32 discriminator 3 view .LVU247
 1117 001e F1E7     		b	.L68
 1118              	.L75:
 349:Core/Src/mainLoop.c ****   }
 350:Core/Src/mainLoop.c ****   value_cp[CP_TIMES_N - 1] = 0;
 1119              		.loc 1 350 3 is_stmt 1 view .LVU248
 1120              		.loc 1 350 28 is_stmt 0 view .LVU249
 1121 0020 0020     		movs	r0, #0
 1122 0022 0E4A     		ldr	r2, .L77
ARM GAS  /tmp/ccJOVKBd.s 			page 28


 1123 0024 47F6FC43 		movw	r3, #31996
 1124              	.LVL122:
 1125              		.loc 1 350 28 view .LVU250
 1126 0028 D050     		str	r0, [r2, r3]
 351:Core/Src/mainLoop.c **** 
 352:Core/Src/mainLoop.c ****   for (i = 0; i < CP_TIMES_N; i++) {
 1127              		.loc 1 352 3 is_stmt 1 view .LVU251
 1128              	.LVL123:
 1129              		.loc 1 352 10 is_stmt 0 view .LVU252
 1130 002a 0346     		mov	r3, r0
 345:Core/Src/mainLoop.c ****   int32_t i = 0;
 1131              		.loc 1 345 20 view .LVU253
 1132 002c 0446     		mov	r4, r0
 1133              		.loc 1 352 3 view .LVU254
 1134 002e 01E0     		b	.L70
 1135              	.LVL124:
 1136              	.L72:
 1137              	.LBB2:
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 354:Core/Src/mainLoop.c ****       if (value_cp[i] > 0) {
 355:Core/Src/mainLoop.c ****         kUp += 1;
 356:Core/Src/mainLoop.c ****       } else {
 357:Core/Src/mainLoop.c ****         kDown += 1;
 1138              		.loc 1 357 9 is_stmt 1 view .LVU255
 1139              		.loc 1 357 15 is_stmt 0 view .LVU256
 1140 0030 0134     		adds	r4, r4, #1
 1141              	.LVL125:
 1142              	.L71:
 1143              		.loc 1 357 15 view .LVU257
 1144              	.LBE2:
 352:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1145              		.loc 1 352 31 is_stmt 1 discriminator 2 view .LVU258
 352:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1146              		.loc 1 352 32 is_stmt 0 discriminator 2 view .LVU259
 1147 0032 0133     		adds	r3, r3, #1
 1148              	.LVL126:
 1149              	.L70:
 352:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1150              		.loc 1 352 15 is_stmt 1 discriminator 1 view .LVU260
 352:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1151              		.loc 1 352 3 is_stmt 0 discriminator 1 view .LVU261
 1152 0034 B3F5FA5F 		cmp	r3, #8000
 1153 0038 0CDA     		bge	.L76
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1154              		.loc 1 353 5 is_stmt 1 view .LVU262
 1155              	.LBB3:
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1156              		.loc 1 353 21 is_stmt 0 view .LVU263
 1157 003a 084A     		ldr	r2, .L77
 1158 003c 52F82320 		ldr	r2, [r2, r3, lsl #2]
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1159              		.loc 1 353 9 view .LVU264
 1160 0040 82EAE271 		eor	r1, r2, r2, asr #31
 1161 0044 A1EBE271 		sub	r1, r1, r2, asr #31
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1162              		.loc 1 353 8 view .LVU265
 1163 0048 0429     		cmp	r1, #4
ARM GAS  /tmp/ccJOVKBd.s 			page 29


 1164 004a F2DD     		ble	.L71
 354:Core/Src/mainLoop.c ****         kUp += 1;
 1165              		.loc 1 354 7 is_stmt 1 view .LVU266
 354:Core/Src/mainLoop.c ****         kUp += 1;
 1166              		.loc 1 354 10 is_stmt 0 view .LVU267
 1167 004c 002A     		cmp	r2, #0
 1168 004e EFDD     		ble	.L72
 355:Core/Src/mainLoop.c ****       } else {
 1169              		.loc 1 355 9 is_stmt 1 view .LVU268
 355:Core/Src/mainLoop.c ****       } else {
 1170              		.loc 1 355 13 is_stmt 0 view .LVU269
 1171 0050 0130     		adds	r0, r0, #1
 1172              	.LVL127:
 355:Core/Src/mainLoop.c ****       } else {
 1173              		.loc 1 355 13 view .LVU270
 1174 0052 EEE7     		b	.L71
 1175              	.L76:
 355:Core/Src/mainLoop.c ****       } else {
 1176              		.loc 1 355 13 view .LVU271
 1177              	.LBE3:
 358:Core/Src/mainLoop.c ****       }
 359:Core/Src/mainLoop.c ****     }
 360:Core/Src/mainLoop.c ****   }
 361:Core/Src/mainLoop.c ****   return (kDown - kUp);
 1178              		.loc 1 361 3 is_stmt 1 view .LVU272
 362:Core/Src/mainLoop.c **** }
 1179              		.loc 1 362 1 is_stmt 0 view .LVU273
 1180 0054 201A     		subs	r0, r4, r0
 1181              	.LVL128:
 1182              		.loc 1 362 1 view .LVU274
 1183 0056 5DF8044B 		ldr	r4, [sp], #4
 1184              	.LCFI12:
 1185              		.cfi_restore 4
 1186              		.cfi_def_cfa_offset 0
 1187              	.LVL129:
 1188              		.loc 1 362 1 view .LVU275
 1189 005a 7047     		bx	lr
 1190              	.L78:
 1191              		.align	2
 1192              	.L77:
 1193 005c 00000000 		.word	value_cp
 1194              		.cfi_endproc
 1195              	.LFE143:
 1197              		.section	.text.cal_value_cp,"ax",%progbits
 1198              		.align	1
 1199              		.global	cal_value_cp
 1200              		.syntax unified
 1201              		.thumb
 1202              		.thumb_func
 1203              		.fpu fpv4-sp-d16
 1205              	cal_value_cp:
 1206              	.LFB144:
 363:Core/Src/mainLoop.c **** 
 364:Core/Src/mainLoop.c **** int32_t cal_value_cp(void) {
 1207              		.loc 1 364 28 is_stmt 1 view -0
 1208              		.cfi_startproc
 1209              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccJOVKBd.s 			page 30


 1210              		@ frame_needed = 0, uses_anonymous_args = 0
 1211 0000 08B5     		push	{r3, lr}
 1212              	.LCFI13:
 1213              		.cfi_def_cfa_offset 8
 1214              		.cfi_offset 3, -8
 1215              		.cfi_offset 14, -4
 365:Core/Src/mainLoop.c ****   int32_t i = 0;
 1216              		.loc 1 365 3 view .LVU277
 1217              	.LVL130:
 366:Core/Src/mainLoop.c ****   int32_t tmp1, tmp2, tmp3, tmp4, allSum = 0;
 1218              		.loc 1 366 3 view .LVU278
 367:Core/Src/mainLoop.c ****   for (i = 0; i < CP_TIMES_N; i++) {
 1219              		.loc 1 367 3 view .LVU279
 1220              		.loc 1 367 10 is_stmt 0 view .LVU280
 1221 0002 0023     		movs	r3, #0
 1222              	.LVL131:
 1223              	.L80:
 1224              		.loc 1 367 15 is_stmt 1 discriminator 1 view .LVU281
 1225              		.loc 1 367 3 is_stmt 0 discriminator 1 view .LVU282
 1226 0004 B3F5FA5F 		cmp	r3, #8000
 1227 0008 0CDA     		bge	.L83
 368:Core/Src/mainLoop.c ****     tmp1 = (int32_t)(value_adc1[i / 2 + 0] & 0x0fff);
 1228              		.loc 1 368 5 is_stmt 1 discriminator 3 view .LVU283
 1229              		.loc 1 368 39 is_stmt 0 discriminator 3 view .LVU284
 1230 000a 03EBD372 		add	r2, r3, r3, lsr #31
 1231 000e 5210     		asrs	r2, r2, #1
 1232              		.loc 1 368 32 discriminator 3 view .LVU285
 1233 0010 0649     		ldr	r1, .L84
 1234 0012 51F82220 		ldr	r2, [r1, r2, lsl #2]
 1235              		.loc 1 368 10 discriminator 3 view .LVU286
 1236 0016 C2F30B02 		ubfx	r2, r2, #0, #12
 1237              	.LVL132:
 369:Core/Src/mainLoop.c ****     // tmp2 = (int32_t)((value_adc1[i/2+0] >> 16)&(0x0fff));
 370:Core/Src/mainLoop.c ****     // tmp3 = (int32_t)(value_adc1[i*2+1] & 0xfff);
 371:Core/Src/mainLoop.c ****     // tmp4 = (int32_t)((value_adc1[i*2+1] >> 16)&(0x0fff));
 372:Core/Src/mainLoop.c ****     // value_cp[i] = (tmp1+tmp2)/2 + (tmp3+tmp4)/2;
 373:Core/Src/mainLoop.c ****     value_cp[i] = tmp1;
 1238              		.loc 1 373 5 is_stmt 1 discriminator 3 view .LVU287
 1239              		.loc 1 373 17 is_stmt 0 discriminator 3 view .LVU288
 1240 001a 0549     		ldr	r1, .L84+4
 1241 001c 41F82320 		str	r2, [r1, r3, lsl #2]
 374:Core/Src/mainLoop.c ****     allSum += value_cp[i];
 1242              		.loc 1 374 5 is_stmt 1 discriminator 3 view .LVU289
 367:Core/Src/mainLoop.c ****     tmp1 = (int32_t)(value_adc1[i / 2 + 0] & 0x0fff);
 1243              		.loc 1 367 31 discriminator 3 view .LVU290
 367:Core/Src/mainLoop.c ****     tmp1 = (int32_t)(value_adc1[i / 2 + 0] & 0x0fff);
 1244              		.loc 1 367 32 is_stmt 0 discriminator 3 view .LVU291
 1245 0020 0133     		adds	r3, r3, #1
 1246              	.LVL133:
 367:Core/Src/mainLoop.c ****     tmp1 = (int32_t)(value_adc1[i / 2 + 0] & 0x0fff);
 1247              		.loc 1 367 32 discriminator 3 view .LVU292
 1248 0022 EFE7     		b	.L80
 1249              	.LVL134:
 1250              	.L83:
 375:Core/Src/mainLoop.c ****   }
 376:Core/Src/mainLoop.c ****   return cal_k_value_cp();
 1251              		.loc 1 376 3 is_stmt 1 view .LVU293
ARM GAS  /tmp/ccJOVKBd.s 			page 31


 1252              		.loc 1 376 10 is_stmt 0 view .LVU294
 1253 0024 FFF7FEFF 		bl	cal_k_value_cp
 1254              	.LVL135:
 377:Core/Src/mainLoop.c ****   // return (allSum/CP_TIMES_N)-2048;
 378:Core/Src/mainLoop.c **** }
 1255              		.loc 1 378 1 view .LVU295
 1256 0028 08BD     		pop	{r3, pc}
 1257              	.L85:
 1258 002a 00BF     		.align	2
 1259              	.L84:
 1260 002c 00000000 		.word	value_adc1
 1261 0030 00000000 		.word	value_cp
 1262              		.cfi_endproc
 1263              	.LFE144:
 1265              		.global	__aeabi_d2iz
 1266              		.section	.text.cal_cp_output_dac,"ax",%progbits
 1267              		.align	1
 1268              		.global	cal_cp_output_dac
 1269              		.syntax unified
 1270              		.thumb
 1271              		.thumb_func
 1272              		.fpu fpv4-sp-d16
 1274              	cal_cp_output_dac:
 1275              	.LVL136:
 1276              	.LFB145:
 379:Core/Src/mainLoop.c **** 
 380:Core/Src/mainLoop.c **** // 1Hz 10
 381:Core/Src/mainLoop.c **** #define ADCSUMARRAY_SIZE (2)
 382:Core/Src/mainLoop.c **** // #define ADCSUMARRAY_SIZE (300)
 383:Core/Src/mainLoop.c **** int32_t adcSumArray[ADCSUMARRAY_SIZE];
 384:Core/Src/mainLoop.c **** int32_t pidP = 0, pidI = 0, pidD = 0;
 385:Core/Src/mainLoop.c **** double_t dletDac = 0;
 386:Core/Src/mainLoop.c **** 
 387:Core/Src/mainLoop.c **** // 1hz
 388:Core/Src/mainLoop.c **** // #define kP (-0.005)
 389:Core/Src/mainLoop.c **** // #define kI (+0.001)
 390:Core/Src/mainLoop.c **** // #define kD (0.005)
 391:Core/Src/mainLoop.c **** // void cal_cp_output_dac(struct adc_buf_t* adc_buf, uint32_t *dacP, uint32_t
 392:Core/Src/mainLoop.c **** // *dacN){ 	int32_t i=0; 	int32_t N=ADC_BUF_T_SIZE*2; 	int32_t allSum=0; 	uint32_t
 393:Core/Src/mainLoop.c **** //tmpUint32=0; 	for(i=0; i<N; i++){ 		allSum += (int32_t)
 394:Core/Src/mainLoop.c **** //((adc_buf->buf[i/2]&0x0fff));
 395:Core/Src/mainLoop.c **** //	}
 396:Core/Src/mainLoop.c **** //	allSum = allSum/N - TARGET_CPV;
 397:Core/Src/mainLoop.c **** //
 398:Core/Src/mainLoop.c **** //	for(i=0; i<ADCSUMARRAY_SIZE-1; i++){
 399:Core/Src/mainLoop.c **** //		adcSumArray[i] = adcSumArray[i+1];
 400:Core/Src/mainLoop.c **** //	}
 401:Core/Src/mainLoop.c **** //	adcSumArray[ADCSUMARRAY_SIZE-1] = allSum;
 402:Core/Src/mainLoop.c **** //
 403:Core/Src/mainLoop.c **** //	//pid
 404:Core/Src/mainLoop.c **** //	pidP = adcSumArray[ADCSUMARRAY_SIZE-1];
 405:Core/Src/mainLoop.c **** //	pidI = 0;
 406:Core/Src/mainLoop.c **** //	for(i=0; i<ADCSUMARRAY_SIZE; i++){
 407:Core/Src/mainLoop.c **** //		pidI += adcSumArray[i];
 408:Core/Src/mainLoop.c **** //	}
 409:Core/Src/mainLoop.c **** //	pidI = pidI/ADCSUMARRAY_SIZE;
 410:Core/Src/mainLoop.c **** //	pidD = adcSumArray[ADCSUMARRAY_SIZE-1] -
ARM GAS  /tmp/ccJOVKBd.s 			page 32


 411:Core/Src/mainLoop.c **** //adcSumArray[ADCSUMARRAY_SIZE-2]; 	dletDac = kP*((float_t)pidP) +
 412:Core/Src/mainLoop.c **** //kI*((float_t)pidI) + kD*((float_t)pidD); 	tmpUint32 = abs((int32_t) (dletDac));
 413:Core/Src/mainLoop.c **** //	(*dacP) += (int32_t) (dletDac);
 414:Core/Src/mainLoop.c **** //	(*dacN) -= (int32_t) (dletDac);
 415:Core/Src/mainLoop.c **** //	max5307_w_chanel(DACP_1,  (*dacP)>>12,      max_outenable);
 416:Core/Src/mainLoop.c **** //	max5307_w_chanel(DACP_1K, ((*dacP)&0xfff),  max_outenable);
 417:Core/Src/mainLoop.c **** //	max5307_w_chanel(DACN_1,  (*dacN)>>12,      max_outenable);
 418:Core/Src/mainLoop.c **** //	max5307_w_chanel(DACN_1K, ((*dacN)&0xfff),  max_outenable);
 419:Core/Src/mainLoop.c **** //
 420:Core/Src/mainLoop.c **** //	//clear buf
 421:Core/Src/mainLoop.c **** //	for(i=0; i<ADC_BUF_T_SIZE; i++){
 422:Core/Src/mainLoop.c **** //		adc_buf->buf[i]=0;
 423:Core/Src/mainLoop.c **** //	}
 424:Core/Src/mainLoop.c **** // }
 425:Core/Src/mainLoop.c **** // for test before 20231206
 426:Core/Src/mainLoop.c **** // #define kP (-0.0005)
 427:Core/Src/mainLoop.c **** // #define kI (+0.051)
 428:Core/Src/mainLoop.c **** // #define kD ( 0.00005)
 429:Core/Src/mainLoop.c **** 
 430:Core/Src/mainLoop.c **** // get jubuzhengdang, jiezhi
 431:Core/Src/mainLoop.c **** // #define kP (-0.0005)
 432:Core/Src/mainLoop.c **** // #define kI (+0.0051)
 433:Core/Src/mainLoop.c **** // #define kD (1.1275)
 434:Core/Src/mainLoop.c **** 
 435:Core/Src/mainLoop.c **** // for test 20231206 this is almost ok
 436:Core/Src/mainLoop.c **** #define kP (-0.0005)
 437:Core/Src/mainLoop.c **** #define kI (+0.0051)
 438:Core/Src/mainLoop.c **** #define kD (1.1275)
 439:Core/Src/mainLoop.c **** 
 440:Core/Src/mainLoop.c **** // #define kP (-0.0002)
 441:Core/Src/mainLoop.c **** // #define kI (+0.0031)
 442:Core/Src/mainLoop.c **** // #define kD (0.5275)
 443:Core/Src/mainLoop.c **** // #define TARGET_CPV  (2748)
 444:Core/Src/mainLoop.c **** #define TARGET_CPV (3096)
 445:Core/Src/mainLoop.c **** void cal_cp_output_dac(struct adc_buf_t *adc_buf, uint32_t *dacP,
 446:Core/Src/mainLoop.c ****                        uint32_t *dacN) {
 1277              		.loc 1 446 40 is_stmt 1 view -0
 1278              		.cfi_startproc
 1279              		@ args = 0, pretend = 0, frame = 0
 1280              		@ frame_needed = 0, uses_anonymous_args = 0
 1281              		.loc 1 446 40 is_stmt 0 view .LVU297
 1282 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1283              	.LCFI14:
 1284              		.cfi_def_cfa_offset 32
 1285              		.cfi_offset 4, -32
 1286              		.cfi_offset 5, -28
 1287              		.cfi_offset 6, -24
 1288              		.cfi_offset 7, -20
 1289              		.cfi_offset 8, -16
 1290              		.cfi_offset 9, -12
 1291              		.cfi_offset 10, -8
 1292              		.cfi_offset 14, -4
 1293 0004 0446     		mov	r4, r0
 1294 0006 0E46     		mov	r6, r1
 1295 0008 1546     		mov	r5, r2
 447:Core/Src/mainLoop.c ****   int32_t i = 0;
 1296              		.loc 1 447 3 is_stmt 1 view .LVU298
ARM GAS  /tmp/ccJOVKBd.s 			page 33


 1297              	.LVL137:
 448:Core/Src/mainLoop.c ****   int32_t N = ADC_BUF_T_SIZE * 2;
 1298              		.loc 1 448 3 view .LVU299
 449:Core/Src/mainLoop.c ****   int32_t allSum = 0;
 1299              		.loc 1 449 3 view .LVU300
 450:Core/Src/mainLoop.c ****   uint32_t tmpUint32 = 0;
 1300              		.loc 1 450 3 view .LVU301
 451:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1301              		.loc 1 451 3 view .LVU302
 449:Core/Src/mainLoop.c ****   int32_t allSum = 0;
 1302              		.loc 1 449 11 is_stmt 0 view .LVU303
 1303 000a 0023     		movs	r3, #0
 1304              		.loc 1 451 10 view .LVU304
 1305 000c 1A46     		mov	r2, r3
 1306              	.LVL138:
 1307              		.loc 1 451 3 view .LVU305
 1308 000e 09E0     		b	.L87
 1309              	.LVL139:
 1310              	.L88:
 452:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i / 2] & 0x0fff));
 1311              		.loc 1 452 5 is_stmt 1 discriminator 3 view .LVU306
 1312              		.loc 1 452 41 is_stmt 0 discriminator 3 view .LVU307
 1313 0010 02EBD271 		add	r1, r2, r2, lsr #31
 1314 0014 4910     		asrs	r1, r1, #1
 1315              		.loc 1 452 38 discriminator 3 view .LVU308
 1316 0016 04EB8101 		add	r1, r4, r1, lsl #2
 1317 001a 4968     		ldr	r1, [r1, #4]
 1318              		.loc 1 452 15 discriminator 3 view .LVU309
 1319 001c C1F30B01 		ubfx	r1, r1, #0, #12
 1320              		.loc 1 452 12 discriminator 3 view .LVU310
 1321 0020 0B44     		add	r3, r3, r1
 1322              	.LVL140:
 451:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1323              		.loc 1 451 22 is_stmt 1 discriminator 3 view .LVU311
 451:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1324              		.loc 1 451 23 is_stmt 0 discriminator 3 view .LVU312
 1325 0022 0132     		adds	r2, r2, #1
 1326              	.LVL141:
 1327              	.L87:
 451:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1328              		.loc 1 451 15 is_stmt 1 discriminator 1 view .LVU313
 451:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1329              		.loc 1 451 3 is_stmt 0 discriminator 1 view .LVU314
 1330 0024 C72A     		cmp	r2, #199
 1331 0026 F3DD     		ble	.L88
 453:Core/Src/mainLoop.c ****   }
 454:Core/Src/mainLoop.c ****   allSum = allSum / N - TARGET_CPV;
 1332              		.loc 1 454 3 is_stmt 1 view .LVU315
 1333              		.loc 1 454 19 is_stmt 0 view .LVU316
 1334 0028 554A     		ldr	r2, .L97+24
 1335              	.LVL142:
 1336              		.loc 1 454 19 view .LVU317
 1337 002a 82FB0312 		smull	r1, r2, r2, r3
 1338 002e D817     		asrs	r0, r3, #31
 1339              	.LVL143:
 1340              		.loc 1 454 19 view .LVU318
 1341 0030 C0EBA210 		rsb	r0, r0, r2, asr #6
ARM GAS  /tmp/ccJOVKBd.s 			page 34


 1342              		.loc 1 454 10 view .LVU319
 1343 0034 A0F61840 		subw	r0, r0, #3096
 1344              	.LVL144:
 455:Core/Src/mainLoop.c **** 
 456:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE - 1; i++) {
 1345              		.loc 1 456 3 is_stmt 1 view .LVU320
 1346              		.loc 1 456 10 is_stmt 0 view .LVU321
 1347 0038 0023     		movs	r3, #0
 1348              	.LVL145:
 1349              	.L89:
 1350              		.loc 1 456 15 is_stmt 1 discriminator 1 view .LVU322
 1351              		.loc 1 456 3 is_stmt 0 discriminator 1 view .LVU323
 1352 003a 002B     		cmp	r3, #0
 1353 003c 07DD     		ble	.L90
 457:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 458:Core/Src/mainLoop.c ****   }
 459:Core/Src/mainLoop.c ****   adcSumArray[ADCSUMARRAY_SIZE - 1] = allSum;
 1354              		.loc 1 459 3 is_stmt 1 view .LVU324
 1355              		.loc 1 459 37 is_stmt 0 view .LVU325
 1356 003e 514B     		ldr	r3, .L97+28
 1357              	.LVL146:
 1358              		.loc 1 459 37 view .LVU326
 1359 0040 5860     		str	r0, [r3, #4]
 460:Core/Src/mainLoop.c **** 
 461:Core/Src/mainLoop.c ****   // pid
 462:Core/Src/mainLoop.c ****   pidP = adcSumArray[ADCSUMARRAY_SIZE - 1];
 1360              		.loc 1 462 3 is_stmt 1 view .LVU327
 1361              		.loc 1 462 8 is_stmt 0 view .LVU328
 1362 0042 514B     		ldr	r3, .L97+32
 1363 0044 1860     		str	r0, [r3]
 463:Core/Src/mainLoop.c ****   pidI = 0;
 1364              		.loc 1 463 3 is_stmt 1 view .LVU329
 1365              		.loc 1 463 8 is_stmt 0 view .LVU330
 1366 0046 0023     		movs	r3, #0
 1367 0048 504A     		ldr	r2, .L97+36
 1368 004a 1360     		str	r3, [r2]
 464:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1369              		.loc 1 464 3 is_stmt 1 view .LVU331
 1370              	.LVL147:
 1371              		.loc 1 464 3 is_stmt 0 view .LVU332
 1372 004c 0FE0     		b	.L91
 1373              	.LVL148:
 1374              	.L90:
 457:Core/Src/mainLoop.c ****   }
 1375              		.loc 1 457 5 is_stmt 1 discriminator 3 view .LVU333
 457:Core/Src/mainLoop.c ****   }
 1376              		.loc 1 457 36 is_stmt 0 discriminator 3 view .LVU334
 1377 004e 5A1C     		adds	r2, r3, #1
 457:Core/Src/mainLoop.c ****   }
 1378              		.loc 1 457 33 discriminator 3 view .LVU335
 1379 0050 4C49     		ldr	r1, .L97+28
 1380 0052 51F82270 		ldr	r7, [r1, r2, lsl #2]
 457:Core/Src/mainLoop.c ****   }
 1381              		.loc 1 457 20 discriminator 3 view .LVU336
 1382 0056 41F82370 		str	r7, [r1, r3, lsl #2]
 456:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1383              		.loc 1 456 41 is_stmt 1 discriminator 3 view .LVU337
ARM GAS  /tmp/ccJOVKBd.s 			page 35


 1384              	.LVL149:
 456:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1385              		.loc 1 456 42 is_stmt 0 discriminator 3 view .LVU338
 1386 005a 1346     		mov	r3, r2
 1387 005c EDE7     		b	.L89
 1388              	.LVL150:
 1389              	.L92:
 465:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1390              		.loc 1 465 5 is_stmt 1 discriminator 3 view .LVU339
 1391              		.loc 1 465 24 is_stmt 0 discriminator 3 view .LVU340
 1392 005e 494A     		ldr	r2, .L97+28
 1393 0060 52F82370 		ldr	r7, [r2, r3, lsl #2]
 1394              		.loc 1 465 10 discriminator 3 view .LVU341
 1395 0064 4949     		ldr	r1, .L97+36
 1396 0066 0A68     		ldr	r2, [r1]
 1397 0068 3A44     		add	r2, r2, r7
 1398 006a 0A60     		str	r2, [r1]
 464:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1399              		.loc 1 464 37 is_stmt 1 discriminator 3 view .LVU342
 464:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1400              		.loc 1 464 38 is_stmt 0 discriminator 3 view .LVU343
 1401 006c 0133     		adds	r3, r3, #1
 1402              	.LVL151:
 1403              	.L91:
 464:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1404              		.loc 1 464 15 is_stmt 1 discriminator 1 view .LVU344
 464:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1405              		.loc 1 464 3 is_stmt 0 discriminator 1 view .LVU345
 1406 006e 012B     		cmp	r3, #1
 1407 0070 F5DD     		ble	.L92
 466:Core/Src/mainLoop.c ****   }
 467:Core/Src/mainLoop.c ****   pidI = pidI / ADCSUMARRAY_SIZE;
 1408              		.loc 1 467 3 is_stmt 1 view .LVU346
 1409              		.loc 1 467 15 is_stmt 0 view .LVU347
 1410 0072 464A     		ldr	r2, .L97+36
 1411 0074 1368     		ldr	r3, [r2]
 1412              	.LVL152:
 1413              		.loc 1 467 15 view .LVU348
 1414 0076 03EBD373 		add	r3, r3, r3, lsr #31
 1415 007a 5F10     		asrs	r7, r3, #1
 1416              		.loc 1 467 8 view .LVU349
 1417 007c 1760     		str	r7, [r2]
 468:Core/Src/mainLoop.c ****   pidD = adcSumArray[ADCSUMARRAY_SIZE - 1] - adcSumArray[ADCSUMARRAY_SIZE - 2];
 1418              		.loc 1 468 3 is_stmt 1 view .LVU350
 1419              		.loc 1 468 57 is_stmt 0 view .LVU351
 1420 007e 414B     		ldr	r3, .L97+28
 1421 0080 1B68     		ldr	r3, [r3]
 1422              		.loc 1 468 44 view .LVU352
 1423 0082 A0EB030A 		sub	r10, r0, r3
 1424              		.loc 1 468 8 view .LVU353
 1425 0086 424B     		ldr	r3, .L97+40
 1426 0088 C3F800A0 		str	r10, [r3]
 469:Core/Src/mainLoop.c ****   dletDac = kP * ((float_t)pidP) + kI * ((float_t)pidI) + kD * ((float_t)pidD);
 1427              		.loc 1 469 3 is_stmt 1 view .LVU354
 1428              		.loc 1 469 19 is_stmt 0 view .LVU355
 1429 008c 07EE900A 		vmov	s15, r0	@ int
 1430 0090 F8EEE77A 		vcvt.f32.s32	s15, s15
ARM GAS  /tmp/ccJOVKBd.s 			page 36


 1431 0094 17EE900A 		vmov	r0, s15
 1432              	.LVL153:
 1433              		.loc 1 469 19 view .LVU356
 1434 0098 FFF7FEFF 		bl	__aeabi_f2d
 1435              	.LVL154:
 1436              		.loc 1 469 16 view .LVU357
 1437 009c 32A3     		adr	r3, .L97
 1438 009e D3E90023 		ldrd	r2, [r3]
 1439 00a2 FFF7FEFF 		bl	__aeabi_dmul
 1440              	.LVL155:
 1441 00a6 8046     		mov	r8, r0
 1442 00a8 8946     		mov	r9, r1
 1443              		.loc 1 469 42 view .LVU358
 1444 00aa 07EE907A 		vmov	s15, r7	@ int
 1445 00ae F8EEE77A 		vcvt.f32.s32	s15, s15
 1446 00b2 17EE900A 		vmov	r0, s15
 1447 00b6 FFF7FEFF 		bl	__aeabi_f2d
 1448              	.LVL156:
 1449              		.loc 1 469 39 view .LVU359
 1450 00ba 2DA3     		adr	r3, .L97+8
 1451 00bc D3E90023 		ldrd	r2, [r3]
 1452 00c0 FFF7FEFF 		bl	__aeabi_dmul
 1453              	.LVL157:
 1454 00c4 0246     		mov	r2, r0
 1455 00c6 0B46     		mov	r3, r1
 1456              		.loc 1 469 34 view .LVU360
 1457 00c8 4046     		mov	r0, r8
 1458 00ca 4946     		mov	r1, r9
 1459 00cc FFF7FEFF 		bl	__aeabi_dadd
 1460              	.LVL158:
 1461 00d0 8046     		mov	r8, r0
 1462 00d2 8946     		mov	r9, r1
 1463              		.loc 1 469 65 view .LVU361
 1464 00d4 07EE90AA 		vmov	s15, r10	@ int
 1465 00d8 F8EEE77A 		vcvt.f32.s32	s15, s15
 1466 00dc 17EE900A 		vmov	r0, s15
 1467 00e0 FFF7FEFF 		bl	__aeabi_f2d
 1468              	.LVL159:
 1469              		.loc 1 469 62 view .LVU362
 1470 00e4 24A3     		adr	r3, .L97+16
 1471 00e6 D3E90023 		ldrd	r2, [r3]
 1472 00ea FFF7FEFF 		bl	__aeabi_dmul
 1473              	.LVL160:
 1474 00ee 0246     		mov	r2, r0
 1475 00f0 0B46     		mov	r3, r1
 1476              		.loc 1 469 57 view .LVU363
 1477 00f2 4046     		mov	r0, r8
 1478 00f4 4946     		mov	r1, r9
 1479 00f6 FFF7FEFF 		bl	__aeabi_dadd
 1480              	.LVL161:
 1481 00fa 0246     		mov	r2, r0
 1482 00fc 0B46     		mov	r3, r1
 1483              		.loc 1 469 11 view .LVU364
 1484 00fe 254F     		ldr	r7, .L97+44
 1485 0100 C7E90023 		strd	r2, [r7]
 470:Core/Src/mainLoop.c ****   tmpUint32 = abs((int32_t)(dletDac));
 1486              		.loc 1 470 3 is_stmt 1 view .LVU365
ARM GAS  /tmp/ccJOVKBd.s 			page 37


 1487              		.loc 1 470 19 is_stmt 0 view .LVU366
 1488 0104 FFF7FEFF 		bl	__aeabi_d2iz
 1489              	.LVL162:
 471:Core/Src/mainLoop.c ****   (*dacP) += (int32_t)(dletDac);
 1490              		.loc 1 471 3 is_stmt 1 view .LVU367
 1491              		.loc 1 471 11 is_stmt 0 view .LVU368
 1492 0108 3368     		ldr	r3, [r6]
 1493 010a 0344     		add	r3, r3, r0
 1494 010c 3360     		str	r3, [r6]
 472:Core/Src/mainLoop.c ****   (*dacN) -= (int32_t)(dletDac);
 1495              		.loc 1 472 3 is_stmt 1 view .LVU369
 1496              		.loc 1 472 14 is_stmt 0 view .LVU370
 1497 010e D7E90001 		ldrd	r0, [r7]
 1498              	.LVL163:
 1499              		.loc 1 472 14 view .LVU371
 1500 0112 FFF7FEFF 		bl	__aeabi_d2iz
 1501              	.LVL164:
 1502              		.loc 1 472 11 view .LVU372
 1503 0116 2B68     		ldr	r3, [r5]
 1504 0118 1B1A     		subs	r3, r3, r0
 1505 011a 2B60     		str	r3, [r5]
 473:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1, (*dacP) >> 12, max_outenable);
 1506              		.loc 1 473 3 is_stmt 1 view .LVU373
 1507              		.loc 1 473 29 is_stmt 0 view .LVU374
 1508 011c 3168     		ldr	r1, [r6]
 1509              		.loc 1 473 3 view .LVU375
 1510 011e 0122     		movs	r2, #1
 1511 0120 090B     		lsrs	r1, r1, #12
 1512 0122 0620     		movs	r0, #6
 1513 0124 FFF7FEFF 		bl	max5307_w_chanel
 1514              	.LVL165:
 474:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1K, ((*dacP) & 0xfff), max_outenable);
 1515              		.loc 1 474 3 is_stmt 1 view .LVU376
 1516              		.loc 1 474 31 is_stmt 0 view .LVU377
 1517 0128 3168     		ldr	r1, [r6]
 1518              		.loc 1 474 3 view .LVU378
 1519 012a 0122     		movs	r2, #1
 1520 012c C1F30B01 		ubfx	r1, r1, #0, #12
 1521 0130 0720     		movs	r0, #7
 1522 0132 FFF7FEFF 		bl	max5307_w_chanel
 1523              	.LVL166:
 475:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1, (*dacN) >> 12, max_outenable);
 1524              		.loc 1 475 3 is_stmt 1 view .LVU379
 1525              		.loc 1 475 29 is_stmt 0 view .LVU380
 1526 0136 2968     		ldr	r1, [r5]
 1527              		.loc 1 475 3 view .LVU381
 1528 0138 0122     		movs	r2, #1
 1529 013a 090B     		lsrs	r1, r1, #12
 1530 013c 0520     		movs	r0, #5
 1531 013e FFF7FEFF 		bl	max5307_w_chanel
 1532              	.LVL167:
 476:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1K, ((*dacN) & 0xfff), max_outenable);
 1533              		.loc 1 476 3 is_stmt 1 view .LVU382
 1534              		.loc 1 476 31 is_stmt 0 view .LVU383
 1535 0142 2968     		ldr	r1, [r5]
 1536              		.loc 1 476 3 view .LVU384
 1537 0144 0122     		movs	r2, #1
ARM GAS  /tmp/ccJOVKBd.s 			page 38


 1538 0146 C1F30B01 		ubfx	r1, r1, #0, #12
 1539 014a 0420     		movs	r0, #4
 1540 014c FFF7FEFF 		bl	max5307_w_chanel
 1541              	.LVL168:
 477:Core/Src/mainLoop.c **** 
 478:Core/Src/mainLoop.c ****   // clear buf
 479:Core/Src/mainLoop.c ****   for (i = 0; i < ADC_BUF_T_SIZE; i++) {
 1542              		.loc 1 479 3 is_stmt 1 view .LVU385
 1543              		.loc 1 479 10 is_stmt 0 view .LVU386
 1544 0150 0023     		movs	r3, #0
 1545              	.LVL169:
 1546              	.L93:
 1547              		.loc 1 479 15 is_stmt 1 discriminator 1 view .LVU387
 1548              		.loc 1 479 3 is_stmt 0 discriminator 1 view .LVU388
 1549 0152 632B     		cmp	r3, #99
 1550 0154 05DC     		bgt	.L96
 480:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 1551              		.loc 1 480 5 is_stmt 1 discriminator 3 view .LVU389
 1552              		.loc 1 480 21 is_stmt 0 discriminator 3 view .LVU390
 1553 0156 04EB8302 		add	r2, r4, r3, lsl #2
 1554 015a 0021     		movs	r1, #0
 1555 015c 5160     		str	r1, [r2, #4]
 479:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 1556              		.loc 1 479 35 is_stmt 1 discriminator 3 view .LVU391
 479:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 1557              		.loc 1 479 36 is_stmt 0 discriminator 3 view .LVU392
 1558 015e 0133     		adds	r3, r3, #1
 1559              	.LVL170:
 479:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 1560              		.loc 1 479 36 discriminator 3 view .LVU393
 1561 0160 F7E7     		b	.L93
 1562              	.L96:
 481:Core/Src/mainLoop.c ****   }
 482:Core/Src/mainLoop.c **** }
 1563              		.loc 1 482 1 view .LVU394
 1564 0162 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1565              	.LVL171:
 1566              	.L98:
 1567              		.loc 1 482 1 view .LVU395
 1568 0166 00BF     		.align	3
 1569              	.L97:
 1570 0168 FCA9F1D2 		.word	3539053052
 1571 016c 4D6240BF 		.word	-1086299571
 1572 0170 88855AD3 		.word	3545925000
 1573 0174 BCE3743F 		.word	1064625084
 1574 0178 0AD7A370 		.word	1889785610
 1575 017c 3D0AF23F 		.word	1072826941
 1576 0180 1F85EB51 		.word	1374389535
 1577 0184 00000000 		.word	adcSumArray
 1578 0188 00000000 		.word	.LANCHOR4
 1579 018c 00000000 		.word	.LANCHOR5
 1580 0190 00000000 		.word	.LANCHOR6
 1581 0194 00000000 		.word	.LANCHOR7
 1582              		.cfi_endproc
 1583              	.LFE145:
 1585              		.section	.text.insertMeanVal,"ax",%progbits
 1586              		.align	1
ARM GAS  /tmp/ccJOVKBd.s 			page 39


 1587              		.global	insertMeanVal
 1588              		.syntax unified
 1589              		.thumb
 1590              		.thumb_func
 1591              		.fpu fpv4-sp-d16
 1593              	insertMeanVal:
 1594              	.LVL172:
 1595              	.LFB146:
 483:Core/Src/mainLoop.c **** 
 484:Core/Src/mainLoop.c **** #define VALMEANARRAY_N 20
 485:Core/Src/mainLoop.c **** int32_t valMeanArray[VALMEANARRAY_N];
 486:Core/Src/mainLoop.c **** // ËÆ°ÁÆóvalMeanArrayÂ∫èÂàó‰∏≠ÁöÑÂùáÂÄºÂíåÂ∑ÆÂÄºÔºåËøôÁõ∏ÂΩì‰∏éadc‚ÄîdmaÈááÊ†∑200Ê¨°ÁöÑÂπ≥ÂùáÂ§ÑÁêÜ
 487:Core/Src/mainLoop.c **** void insertMeanVal(int32_t val, struct adc_buf_t *adc_buf) {
 1596              		.loc 1 487 60 is_stmt 1 view -0
 1597              		.cfi_startproc
 1598              		@ args = 0, pretend = 0, frame = 0
 1599              		@ frame_needed = 0, uses_anonymous_args = 0
 1600              		@ link register save eliminated.
 1601              		.loc 1 487 60 is_stmt 0 view .LVU397
 1602 0000 30B4     		push	{r4, r5}
 1603              	.LCFI15:
 1604              		.cfi_def_cfa_offset 8
 1605              		.cfi_offset 4, -8
 1606              		.cfi_offset 5, -4
 488:Core/Src/mainLoop.c ****   static int32_t currentP = 0;
 1607              		.loc 1 488 3 is_stmt 1 view .LVU398
 489:Core/Src/mainLoop.c ****   int32_t i = 0, sumval = 0, difval = 0;
 1608              		.loc 1 489 3 view .LVU399
 1609              	.LVL173:
 490:Core/Src/mainLoop.c ****   valMeanArray[currentP++] = val;
 1610              		.loc 1 490 3 view .LVU400
 1611              		.loc 1 490 24 is_stmt 0 view .LVU401
 1612 0002 1A4C     		ldr	r4, .L104
 1613 0004 2368     		ldr	r3, [r4]
 1614 0006 5A1C     		adds	r2, r3, #1
 1615              		.loc 1 490 28 view .LVU402
 1616 0008 194D     		ldr	r5, .L104+4
 1617 000a 45F82300 		str	r0, [r5, r3, lsl #2]
 491:Core/Src/mainLoop.c ****   currentP = currentP % VALMEANARRAY_N;
 1618              		.loc 1 491 3 is_stmt 1 view .LVU403
 1619              		.loc 1 491 23 is_stmt 0 view .LVU404
 1620 000e 1948     		ldr	r0, .L104+8
 1621              	.LVL174:
 1622              		.loc 1 491 23 view .LVU405
 1623 0010 80FB0230 		smull	r3, r0, r0, r2
 1624              	.LVL175:
 1625              		.loc 1 491 23 view .LVU406
 1626 0014 D317     		asrs	r3, r2, #31
 1627 0016 C3EBE003 		rsb	r3, r3, r0, asr #3
 1628 001a 03EB8303 		add	r3, r3, r3, lsl #2
 1629 001e A2EB8303 		sub	r3, r2, r3, lsl #2
 1630              		.loc 1 491 12 view .LVU407
 1631 0022 2360     		str	r3, [r4]
 1632              	.LVL176:
 492:Core/Src/mainLoop.c ****   for (i = 0; i < VALMEANARRAY_N - 1; i++) {
 1633              		.loc 1 492 3 is_stmt 1 view .LVU408
 489:Core/Src/mainLoop.c ****   valMeanArray[currentP++] = val;
ARM GAS  /tmp/ccJOVKBd.s 			page 40


 1634              		.loc 1 489 30 is_stmt 0 view .LVU409
 1635 0024 0020     		movs	r0, #0
 489:Core/Src/mainLoop.c ****   valMeanArray[currentP++] = val;
 1636              		.loc 1 489 18 view .LVU410
 1637 0026 0446     		mov	r4, r0
 1638              		.loc 1 492 10 view .LVU411
 1639 0028 0246     		mov	r2, r0
 1640              	.LVL177:
 1641              	.L100:
 1642              		.loc 1 492 15 is_stmt 1 discriminator 1 view .LVU412
 1643              		.loc 1 492 3 is_stmt 0 discriminator 1 view .LVU413
 1644 002a 122A     		cmp	r2, #18
 1645 002c 0CDC     		bgt	.L103
 1646              	.LBB4:
 493:Core/Src/mainLoop.c ****     sumval += valMeanArray[i];
 1647              		.loc 1 493 5 is_stmt 1 discriminator 3 view .LVU414
 1648              		.loc 1 493 27 is_stmt 0 discriminator 3 view .LVU415
 1649 002e 104B     		ldr	r3, .L104+4
 1650 0030 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1651              		.loc 1 493 12 discriminator 3 view .LVU416
 1652 0034 1C44     		add	r4, r4, r3
 1653              	.LVL178:
 494:Core/Src/mainLoop.c ****     difval += abs(valMeanArray[i] - adc_buf->adcMeanVal);
 1654              		.loc 1 494 5 is_stmt 1 discriminator 3 view .LVU417
 1655              		.loc 1 494 44 is_stmt 0 discriminator 3 view .LVU418
 1656 0036 D1F89451 		ldr	r5, [r1, #404]
 1657              		.loc 1 494 35 discriminator 3 view .LVU419
 1658 003a 5B1B     		subs	r3, r3, r5
 1659              		.loc 1 494 15 discriminator 3 view .LVU420
 1660 003c 002B     		cmp	r3, #0
 1661 003e B8BF     		it	lt
 1662 0040 5B42     		rsblt	r3, r3, #0
 1663              		.loc 1 494 12 discriminator 3 view .LVU421
 1664 0042 1844     		add	r0, r0, r3
 1665              	.LVL179:
 1666              		.loc 1 494 12 discriminator 3 view .LVU422
 1667              	.LBE4:
 492:Core/Src/mainLoop.c ****     sumval += valMeanArray[i];
 1668              		.loc 1 492 39 is_stmt 1 discriminator 3 view .LVU423
 492:Core/Src/mainLoop.c ****     sumval += valMeanArray[i];
 1669              		.loc 1 492 40 is_stmt 0 discriminator 3 view .LVU424
 1670 0044 0132     		adds	r2, r2, #1
 1671              	.LVL180:
 492:Core/Src/mainLoop.c ****     sumval += valMeanArray[i];
 1672              		.loc 1 492 40 discriminator 3 view .LVU425
 1673 0046 F0E7     		b	.L100
 1674              	.L103:
 495:Core/Src/mainLoop.c ****   }
 496:Core/Src/mainLoop.c ****   sumval = sumval / VALMEANARRAY_N;
 1675              		.loc 1 496 3 is_stmt 1 view .LVU426
 1676              		.loc 1 496 10 is_stmt 0 view .LVU427
 1677 0048 0A4B     		ldr	r3, .L104+8
 1678 004a 83FB0452 		smull	r5, r2, r3, r4
 1679              	.LVL181:
 1680              		.loc 1 496 10 view .LVU428
 1681 004e E417     		asrs	r4, r4, #31
 1682              	.LVL182:
ARM GAS  /tmp/ccJOVKBd.s 			page 41


 1683              		.loc 1 496 10 view .LVU429
 1684 0050 C4EBE204 		rsb	r4, r4, r2, asr #3
 1685              	.LVL183:
 497:Core/Src/mainLoop.c ****   difval = difval / VALMEANARRAY_N;
 1686              		.loc 1 497 3 is_stmt 1 view .LVU430
 1687              		.loc 1 497 10 is_stmt 0 view .LVU431
 1688 0054 83FB0023 		smull	r2, r3, r3, r0
 1689 0058 C017     		asrs	r0, r0, #31
 1690              	.LVL184:
 1691              		.loc 1 497 10 view .LVU432
 1692 005a C0EBE300 		rsb	r0, r0, r3, asr #3
 1693              	.LVL185:
 498:Core/Src/mainLoop.c ****   adc_buf->adcMeanVal = sumval;
 1694              		.loc 1 498 3 is_stmt 1 view .LVU433
 1695              		.loc 1 498 23 is_stmt 0 view .LVU434
 1696 005e C1F89441 		str	r4, [r1, #404]
 499:Core/Src/mainLoop.c ****   adc_buf->adcDif2 = difval;
 1697              		.loc 1 499 3 is_stmt 1 view .LVU435
 1698              		.loc 1 499 20 is_stmt 0 view .LVU436
 1699 0062 C1F89801 		str	r0, [r1, #408]
 500:Core/Src/mainLoop.c **** }
 1700              		.loc 1 500 1 view .LVU437
 1701 0066 30BC     		pop	{r4, r5}
 1702              	.LCFI16:
 1703              		.cfi_restore 5
 1704              		.cfi_restore 4
 1705              		.cfi_def_cfa_offset 0
 1706              	.LVL186:
 1707              		.loc 1 500 1 view .LVU438
 1708 0068 7047     		bx	lr
 1709              	.L105:
 1710 006a 00BF     		.align	2
 1711              	.L104:
 1712 006c 00000000 		.word	.LANCHOR8
 1713 0070 00000000 		.word	valMeanArray
 1714 0074 67666666 		.word	1717986919
 1715              		.cfi_endproc
 1716              	.LFE146:
 1718              		.section	.text.cal_cp_output_dac_ext,"ax",%progbits
 1719              		.align	1
 1720              		.global	cal_cp_output_dac_ext
 1721              		.syntax unified
 1722              		.thumb
 1723              		.thumb_func
 1724              		.fpu fpv4-sp-d16
 1726              	cal_cp_output_dac_ext:
 1727              	.LVL187:
 1728              	.LFB147:
 501:Core/Src/mainLoop.c **** struct log_para_t
 502:Core/Src/mainLoop.c ****     logPara;  // Áî®‰∫éÂêëhostÂèëÈÄÅË∞ÉËØïËøáÁ®ãÊï∞ÊçÆÔºåÂú®cal_cp_output_dac_extËøáÁ®ã‰∏≠‰øùÂ≠ò
 503:Core/Src/mainLoop.c **** int32_t meanVal_view = 0;
 504:Core/Src/mainLoop.c **** int32_t difVal_view = 0;
 505:Core/Src/mainLoop.c **** #define RUN_30S 180000  // about 90S
 506:Core/Src/mainLoop.c **** void cal_cp_output_dac_ext(struct adc_buf_t *adc_buf, uint32_t *dacP,
 507:Core/Src/mainLoop.c ****                            uint32_t *dacN, int32_t runTime500us) {
 1729              		.loc 1 507 66 is_stmt 1 view -0
 1730              		.cfi_startproc
ARM GAS  /tmp/ccJOVKBd.s 			page 42


 1731              		@ args = 0, pretend = 0, frame = 0
 1732              		@ frame_needed = 0, uses_anonymous_args = 0
 1733              		.loc 1 507 66 is_stmt 0 view .LVU440
 1734 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1735              	.LCFI17:
 1736              		.cfi_def_cfa_offset 40
 1737              		.cfi_offset 3, -40
 1738              		.cfi_offset 4, -36
 1739              		.cfi_offset 5, -32
 1740              		.cfi_offset 6, -28
 1741              		.cfi_offset 7, -24
 1742              		.cfi_offset 8, -20
 1743              		.cfi_offset 9, -16
 1744              		.cfi_offset 10, -12
 1745              		.cfi_offset 11, -8
 1746              		.cfi_offset 14, -4
 1747 0004 0446     		mov	r4, r0
 1748 0006 0D46     		mov	r5, r1
 1749 0008 1646     		mov	r6, r2
 508:Core/Src/mainLoop.c ****   int32_t i = 0;
 1750              		.loc 1 508 3 is_stmt 1 view .LVU441
 1751              	.LVL188:
 509:Core/Src/mainLoop.c ****   int32_t N = ADC_BUF_T_SIZE;
 1752              		.loc 1 509 3 view .LVU442
 510:Core/Src/mainLoop.c ****   uint32_t allSum = 0;
 1753              		.loc 1 510 3 view .LVU443
 511:Core/Src/mainLoop.c ****   uint16_t forSaveAllSum = 0;
 1754              		.loc 1 511 3 view .LVU444
 512:Core/Src/mainLoop.c ****   uint32_t tmpUint32 = 0;
 1755              		.loc 1 512 3 view .LVU445
 513:Core/Src/mainLoop.c ****   int32_t deltNoisV = 0;
 1756              		.loc 1 513 3 view .LVU446
 514:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_SET);
 1757              		.loc 1 514 3 view .LVU447
 1758 000a 0122     		movs	r2, #1
 1759              	.LVL189:
 1760              		.loc 1 514 3 is_stmt 0 view .LVU448
 1761 000c 4FF48051 		mov	r1, #4096
 1762              	.LVL190:
 1763              		.loc 1 514 3 view .LVU449
 1764 0010 6948     		ldr	r0, .L117+24
 1765              	.LVL191:
 1766              		.loc 1 514 3 view .LVU450
 1767 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1768              	.LVL192:
 515:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1769              		.loc 1 515 3 is_stmt 1 view .LVU451
 1770              		.loc 1 515 10 is_stmt 0 view .LVU452
 1771 0016 0023     		movs	r3, #0
 1772              		.loc 1 515 3 view .LVU453
 1773 0018 00E0     		b	.L107
 1774              	.LVL193:
 1775              	.L108:
 516:Core/Src/mainLoop.c ****     allSum += (uint32_t)((adc_buf->buf[i] & 0x0fff));
 1776              		.loc 1 516 5 is_stmt 1 discriminator 3 view .LVU454
 517:Core/Src/mainLoop.c ****     allSum += (uint32_t)(((adc_buf->buf[i] >> 16) & 0x0fff));
 1777              		.loc 1 517 5 discriminator 3 view .LVU455
ARM GAS  /tmp/ccJOVKBd.s 			page 43


 515:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1778              		.loc 1 515 22 discriminator 3 view .LVU456
 515:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1779              		.loc 1 515 23 is_stmt 0 discriminator 3 view .LVU457
 1780 001a 0133     		adds	r3, r3, #1
 1781              	.LVL194:
 1782              	.L107:
 515:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1783              		.loc 1 515 15 is_stmt 1 discriminator 1 view .LVU458
 515:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1784              		.loc 1 515 3 is_stmt 0 discriminator 1 view .LVU459
 1785 001c 632B     		cmp	r3, #99
 1786 001e FCDD     		ble	.L108
 518:Core/Src/mainLoop.c ****   }
 519:Core/Src/mainLoop.c ****   allSum = allSum / (N * 2);
 1787              		.loc 1 519 3 is_stmt 1 view .LVU460
 520:Core/Src/mainLoop.c ****   allSum = (adc_buf->buf[99] & 0x0fff);
 1788              		.loc 1 520 3 view .LVU461
 1789              		.loc 1 520 25 is_stmt 0 view .LVU462
 1790 0020 D4F89071 		ldr	r7, [r4, #400]
 1791              		.loc 1 520 10 view .LVU463
 1792 0024 C7F30B08 		ubfx	r8, r7, #0, #12
 1793              	.LVL195:
 521:Core/Src/mainLoop.c ****   forSaveAllSum = allSum;
 1794              		.loc 1 521 3 is_stmt 1 view .LVU464
 1795              		.loc 1 521 17 is_stmt 0 view .LVU465
 1796 0028 4746     		mov	r7, r8
 1797              	.LVL196:
 522:Core/Src/mainLoop.c ****   allSum = allSum - TARGET_CPV;
 1798              		.loc 1 522 3 is_stmt 1 view .LVU466
 1799              		.loc 1 522 10 is_stmt 0 view .LVU467
 1800 002a A8F61848 		subw	r8, r8, #3096
 1801              	.LVL197:
 523:Core/Src/mainLoop.c ****   insertMeanVal(allSum, adc_buf);
 1802              		.loc 1 523 3 is_stmt 1 view .LVU468
 1803 002e 2146     		mov	r1, r4
 1804 0030 4046     		mov	r0, r8
 1805 0032 FFF7FEFF 		bl	insertMeanVal
 1806              	.LVL198:
 524:Core/Src/mainLoop.c ****   meanVal_view = adc_buf->adcMeanVal;
 1807              		.loc 1 524 3 view .LVU469
 1808              		.loc 1 524 25 is_stmt 0 view .LVU470
 1809 0036 D4F89421 		ldr	r2, [r4, #404]
 1810              		.loc 1 524 16 view .LVU471
 1811 003a 604B     		ldr	r3, .L117+28
 1812 003c 1A60     		str	r2, [r3]
 525:Core/Src/mainLoop.c ****   difVal_view = adc_buf->adcDif2;
 1813              		.loc 1 525 3 is_stmt 1 view .LVU472
 1814              		.loc 1 525 24 is_stmt 0 view .LVU473
 1815 003e D4F89821 		ldr	r2, [r4, #408]
 1816              		.loc 1 525 15 view .LVU474
 1817 0042 5F4B     		ldr	r3, .L117+32
 1818 0044 1A60     		str	r2, [r3]
 526:Core/Src/mainLoop.c **** 
 527:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE - 1; i++) {
 1819              		.loc 1 527 3 is_stmt 1 view .LVU475
 1820              	.LVL199:
ARM GAS  /tmp/ccJOVKBd.s 			page 44


 1821              		.loc 1 527 10 is_stmt 0 view .LVU476
 1822 0046 0023     		movs	r3, #0
 1823              	.LVL200:
 1824              	.L109:
 1825              		.loc 1 527 15 is_stmt 1 discriminator 1 view .LVU477
 1826              		.loc 1 527 3 is_stmt 0 discriminator 1 view .LVU478
 1827 0048 002B     		cmp	r3, #0
 1828 004a 09DD     		ble	.L110
 528:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 529:Core/Src/mainLoop.c ****   }
 530:Core/Src/mainLoop.c ****   adcSumArray[ADCSUMARRAY_SIZE - 1] = allSum;
 1829              		.loc 1 530 3 is_stmt 1 view .LVU479
 1830              		.loc 1 530 37 is_stmt 0 view .LVU480
 1831 004c 5D4B     		ldr	r3, .L117+36
 1832              	.LVL201:
 1833              		.loc 1 530 37 view .LVU481
 1834 004e C3F80480 		str	r8, [r3, #4]
 531:Core/Src/mainLoop.c **** 
 532:Core/Src/mainLoop.c ****   // pid
 533:Core/Src/mainLoop.c ****   pidP = adcSumArray[ADCSUMARRAY_SIZE - 1];
 1835              		.loc 1 533 3 is_stmt 1 view .LVU482
 1836              		.loc 1 533 8 is_stmt 0 view .LVU483
 1837 0052 5D4B     		ldr	r3, .L117+40
 1838 0054 C3F80080 		str	r8, [r3]
 534:Core/Src/mainLoop.c ****   pidI = 0;
 1839              		.loc 1 534 3 is_stmt 1 view .LVU484
 1840              		.loc 1 534 8 is_stmt 0 view .LVU485
 1841 0058 0023     		movs	r3, #0
 1842 005a 5C4A     		ldr	r2, .L117+44
 1843 005c 1360     		str	r3, [r2]
 535:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1844              		.loc 1 535 3 is_stmt 1 view .LVU486
 1845              	.LVL202:
 1846              		.loc 1 535 3 is_stmt 0 view .LVU487
 1847 005e 0FE0     		b	.L111
 1848              	.LVL203:
 1849              	.L110:
 528:Core/Src/mainLoop.c ****   }
 1850              		.loc 1 528 5 is_stmt 1 discriminator 3 view .LVU488
 528:Core/Src/mainLoop.c ****   }
 1851              		.loc 1 528 36 is_stmt 0 discriminator 3 view .LVU489
 1852 0060 5A1C     		adds	r2, r3, #1
 528:Core/Src/mainLoop.c ****   }
 1853              		.loc 1 528 33 discriminator 3 view .LVU490
 1854 0062 5849     		ldr	r1, .L117+36
 1855 0064 51F82200 		ldr	r0, [r1, r2, lsl #2]
 528:Core/Src/mainLoop.c ****   }
 1856              		.loc 1 528 20 discriminator 3 view .LVU491
 1857 0068 41F82300 		str	r0, [r1, r3, lsl #2]
 527:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1858              		.loc 1 527 41 is_stmt 1 discriminator 3 view .LVU492
 1859              	.LVL204:
 527:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1860              		.loc 1 527 42 is_stmt 0 discriminator 3 view .LVU493
 1861 006c 1346     		mov	r3, r2
 1862 006e EBE7     		b	.L109
 1863              	.LVL205:
ARM GAS  /tmp/ccJOVKBd.s 			page 45


 1864              	.L112:
 536:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1865              		.loc 1 536 5 is_stmt 1 discriminator 3 view .LVU494
 1866              		.loc 1 536 24 is_stmt 0 discriminator 3 view .LVU495
 1867 0070 544A     		ldr	r2, .L117+36
 1868 0072 52F82300 		ldr	r0, [r2, r3, lsl #2]
 1869              		.loc 1 536 10 discriminator 3 view .LVU496
 1870 0076 5549     		ldr	r1, .L117+44
 1871 0078 0A68     		ldr	r2, [r1]
 1872 007a 0244     		add	r2, r2, r0
 1873 007c 0A60     		str	r2, [r1]
 535:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1874              		.loc 1 535 37 is_stmt 1 discriminator 3 view .LVU497
 535:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1875              		.loc 1 535 38 is_stmt 0 discriminator 3 view .LVU498
 1876 007e 0133     		adds	r3, r3, #1
 1877              	.LVL206:
 1878              	.L111:
 535:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1879              		.loc 1 535 15 is_stmt 1 discriminator 1 view .LVU499
 535:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1880              		.loc 1 535 3 is_stmt 0 discriminator 1 view .LVU500
 1881 0080 012B     		cmp	r3, #1
 1882 0082 F5DD     		ble	.L112
 537:Core/Src/mainLoop.c ****   }
 538:Core/Src/mainLoop.c ****   pidI = pidI / ADCSUMARRAY_SIZE;
 1883              		.loc 1 538 3 is_stmt 1 view .LVU501
 1884              		.loc 1 538 15 is_stmt 0 view .LVU502
 1885 0084 514A     		ldr	r2, .L117+44
 1886 0086 1368     		ldr	r3, [r2]
 1887              	.LVL207:
 1888              		.loc 1 538 15 view .LVU503
 1889 0088 03EBD373 		add	r3, r3, r3, lsr #31
 1890 008c 4FEA630A 		asr	r10, r3, #1
 1891              		.loc 1 538 8 view .LVU504
 1892 0090 C2F800A0 		str	r10, [r2]
 539:Core/Src/mainLoop.c ****   pidD = adcSumArray[ADCSUMARRAY_SIZE - 1] - adcSumArray[ADCSUMARRAY_SIZE - 2];
 1893              		.loc 1 539 3 is_stmt 1 view .LVU505
 1894              		.loc 1 539 57 is_stmt 0 view .LVU506
 1895 0094 4B4B     		ldr	r3, .L117+36
 1896 0096 1B68     		ldr	r3, [r3]
 1897              		.loc 1 539 44 view .LVU507
 1898 0098 A8EB030B 		sub	fp, r8, r3
 1899              		.loc 1 539 8 view .LVU508
 1900 009c 4C4B     		ldr	r3, .L117+48
 1901 009e C3F800B0 		str	fp, [r3]
 540:Core/Src/mainLoop.c ****   dletDac = kP * ((float_t)pidP) + kI * ((float_t)pidI) + kD * ((float_t)pidD);
 1902              		.loc 1 540 3 is_stmt 1 view .LVU509
 1903              		.loc 1 540 19 is_stmt 0 view .LVU510
 1904 00a2 07EE908A 		vmov	s15, r8	@ int
 1905 00a6 F8EEE77A 		vcvt.f32.s32	s15, s15
 1906 00aa 17EE900A 		vmov	r0, s15
 1907 00ae FFF7FEFF 		bl	__aeabi_f2d
 1908              	.LVL208:
 1909              		.loc 1 540 16 view .LVU511
 1910 00b2 3BA3     		adr	r3, .L117
 1911 00b4 D3E90023 		ldrd	r2, [r3]
ARM GAS  /tmp/ccJOVKBd.s 			page 46


 1912 00b8 FFF7FEFF 		bl	__aeabi_dmul
 1913              	.LVL209:
 1914 00bc 8046     		mov	r8, r0
 1915 00be 8946     		mov	r9, r1
 1916              		.loc 1 540 42 view .LVU512
 1917 00c0 07EE90AA 		vmov	s15, r10	@ int
 1918 00c4 F8EEE77A 		vcvt.f32.s32	s15, s15
 1919 00c8 17EE900A 		vmov	r0, s15
 1920 00cc FFF7FEFF 		bl	__aeabi_f2d
 1921              	.LVL210:
 1922              		.loc 1 540 39 view .LVU513
 1923 00d0 35A3     		adr	r3, .L117+8
 1924 00d2 D3E90023 		ldrd	r2, [r3]
 1925 00d6 FFF7FEFF 		bl	__aeabi_dmul
 1926              	.LVL211:
 1927 00da 0246     		mov	r2, r0
 1928 00dc 0B46     		mov	r3, r1
 1929              		.loc 1 540 34 view .LVU514
 1930 00de 4046     		mov	r0, r8
 1931 00e0 4946     		mov	r1, r9
 1932 00e2 FFF7FEFF 		bl	__aeabi_dadd
 1933              	.LVL212:
 1934 00e6 8046     		mov	r8, r0
 1935 00e8 8946     		mov	r9, r1
 1936              		.loc 1 540 65 view .LVU515
 1937 00ea 07EE90BA 		vmov	s15, fp	@ int
 1938 00ee F8EEE77A 		vcvt.f32.s32	s15, s15
 1939 00f2 17EE900A 		vmov	r0, s15
 1940 00f6 FFF7FEFF 		bl	__aeabi_f2d
 1941              	.LVL213:
 1942              		.loc 1 540 62 view .LVU516
 1943 00fa 2DA3     		adr	r3, .L117+16
 1944 00fc D3E90023 		ldrd	r2, [r3]
 1945 0100 FFF7FEFF 		bl	__aeabi_dmul
 1946              	.LVL214:
 1947 0104 0246     		mov	r2, r0
 1948 0106 0B46     		mov	r3, r1
 1949              		.loc 1 540 57 view .LVU517
 1950 0108 4046     		mov	r0, r8
 1951 010a 4946     		mov	r1, r9
 1952 010c FFF7FEFF 		bl	__aeabi_dadd
 1953              	.LVL215:
 1954 0110 0246     		mov	r2, r0
 1955 0112 0B46     		mov	r3, r1
 1956              		.loc 1 540 11 view .LVU518
 1957 0114 DFF8C080 		ldr	r8, .L117+56
 1958 0118 C8E90023 		strd	r2, [r8]
 541:Core/Src/mainLoop.c ****   tmpUint32 = abs((int32_t)(dletDac));
 1959              		.loc 1 541 3 is_stmt 1 view .LVU519
 1960              		.loc 1 541 19 is_stmt 0 view .LVU520
 1961 011c FFF7FEFF 		bl	__aeabi_d2iz
 1962              	.LVL216:
 542:Core/Src/mainLoop.c ****   // if(runTime500us < RUN_30S) { //nomal operate
 543:Core/Src/mainLoop.c ****   // 	deltNoisV = 0;
 544:Core/Src/mainLoop.c ****   // }else { //add noise
 545:Core/Src/mainLoop.c ****   // 	if((runTime500us&0x01) != 0){ //2ms
 546:Core/Src/mainLoop.c ****   // 		deltNoisV = 3;
ARM GAS  /tmp/ccJOVKBd.s 			page 47


 547:Core/Src/mainLoop.c ****   // 		HAL_GPIO_TogglePin(LED5_GPIO_Port, LED5_Pin);
 548:Core/Src/mainLoop.c ****   // 	}else{
 549:Core/Src/mainLoop.c ****   // 		deltNoisV = 0;
 550:Core/Src/mainLoop.c ****   // 		HAL_GPIO_TogglePin(LED5_GPIO_Port, LED5_Pin);
 551:Core/Src/mainLoop.c ****   // 	}
 552:Core/Src/mainLoop.c ****   // }
 553:Core/Src/mainLoop.c ****   deltNoisV = 0;
 1963              		.loc 1 553 3 is_stmt 1 view .LVU521
 554:Core/Src/mainLoop.c ****   (*dacP) += (int32_t)(dletDac);
 1964              		.loc 1 554 3 view .LVU522
 1965              		.loc 1 554 11 is_stmt 0 view .LVU523
 1966 0120 2B68     		ldr	r3, [r5]
 1967 0122 0344     		add	r3, r3, r0
 1968 0124 2B60     		str	r3, [r5]
 555:Core/Src/mainLoop.c ****   (*dacN) -= (int32_t)(dletDac);
 1969              		.loc 1 555 3 is_stmt 1 view .LVU524
 1970              		.loc 1 555 14 is_stmt 0 view .LVU525
 1971 0126 D8E90001 		ldrd	r0, [r8]
 1972              	.LVL217:
 1973              		.loc 1 555 14 view .LVU526
 1974 012a FFF7FEFF 		bl	__aeabi_d2iz
 1975              	.LVL218:
 1976              		.loc 1 555 11 view .LVU527
 1977 012e 3368     		ldr	r3, [r6]
 1978 0130 1B1A     		subs	r3, r3, r0
 1979 0132 3360     		str	r3, [r6]
 556:Core/Src/mainLoop.c ****   (*dacP) += deltNoisV;
 1980              		.loc 1 556 3 is_stmt 1 view .LVU528
 1981              		.loc 1 556 11 is_stmt 0 view .LVU529
 1982 0134 2968     		ldr	r1, [r5]
 557:Core/Src/mainLoop.c ****   (*dacN) -= deltNoisV;
 1983              		.loc 1 557 3 is_stmt 1 view .LVU530
 558:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1, (*dacP) >> 12, max_outenable);
 1984              		.loc 1 558 3 view .LVU531
 1985 0136 0122     		movs	r2, #1
 1986 0138 090B     		lsrs	r1, r1, #12
 1987 013a 0620     		movs	r0, #6
 1988 013c FFF7FEFF 		bl	max5307_w_chanel
 1989              	.LVL219:
 559:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1K, ((*dacP) & 0xfff), max_outenable);
 1990              		.loc 1 559 3 view .LVU532
 1991              		.loc 1 559 31 is_stmt 0 view .LVU533
 1992 0140 2968     		ldr	r1, [r5]
 1993              		.loc 1 559 3 view .LVU534
 1994 0142 0122     		movs	r2, #1
 1995 0144 C1F30B01 		ubfx	r1, r1, #0, #12
 1996 0148 0720     		movs	r0, #7
 1997 014a FFF7FEFF 		bl	max5307_w_chanel
 1998              	.LVL220:
 560:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1, (*dacN) >> 12, max_outenable);
 1999              		.loc 1 560 3 is_stmt 1 view .LVU535
 2000              		.loc 1 560 29 is_stmt 0 view .LVU536
 2001 014e 3168     		ldr	r1, [r6]
 2002              		.loc 1 560 3 view .LVU537
 2003 0150 0122     		movs	r2, #1
 2004 0152 090B     		lsrs	r1, r1, #12
 2005 0154 0520     		movs	r0, #5
ARM GAS  /tmp/ccJOVKBd.s 			page 48


 2006 0156 FFF7FEFF 		bl	max5307_w_chanel
 2007              	.LVL221:
 561:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1K, ((*dacN) & 0xfff), max_outenable);
 2008              		.loc 1 561 3 is_stmt 1 view .LVU538
 2009              		.loc 1 561 31 is_stmt 0 view .LVU539
 2010 015a 3168     		ldr	r1, [r6]
 2011              		.loc 1 561 3 view .LVU540
 2012 015c 0122     		movs	r2, #1
 2013 015e C1F30B01 		ubfx	r1, r1, #0, #12
 2014 0162 0420     		movs	r0, #4
 2015 0164 FFF7FEFF 		bl	max5307_w_chanel
 2016              	.LVL222:
 562:Core/Src/mainLoop.c **** 
 563:Core/Src/mainLoop.c ****   // clear buf
 564:Core/Src/mainLoop.c ****   for (i = 0; i < ADC_BUF_T_SIZE; i++) {
 2017              		.loc 1 564 3 is_stmt 1 view .LVU541
 2018              		.loc 1 564 10 is_stmt 0 view .LVU542
 2019 0168 0023     		movs	r3, #0
 2020              	.LVL223:
 2021              	.L113:
 2022              		.loc 1 564 15 is_stmt 1 discriminator 1 view .LVU543
 2023              		.loc 1 564 3 is_stmt 0 discriminator 1 view .LVU544
 2024 016a 632B     		cmp	r3, #99
 2025 016c 05DC     		bgt	.L116
 565:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2026              		.loc 1 565 5 is_stmt 1 discriminator 3 view .LVU545
 2027              		.loc 1 565 21 is_stmt 0 discriminator 3 view .LVU546
 2028 016e 04EB8302 		add	r2, r4, r3, lsl #2
 2029 0172 0021     		movs	r1, #0
 2030 0174 5160     		str	r1, [r2, #4]
 564:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2031              		.loc 1 564 35 is_stmt 1 discriminator 3 view .LVU547
 564:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2032              		.loc 1 564 36 is_stmt 0 discriminator 3 view .LVU548
 2033 0176 0133     		adds	r3, r3, #1
 2034              	.LVL224:
 564:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2035              		.loc 1 564 36 discriminator 3 view .LVU549
 2036 0178 F7E7     		b	.L113
 2037              	.L116:
 566:Core/Src/mainLoop.c ****   }
 567:Core/Src/mainLoop.c ****   logPara.mean_adc_val = forSaveAllSum;
 2038              		.loc 1 567 3 is_stmt 1 view .LVU550
 2039              		.loc 1 567 24 is_stmt 0 view .LVU551
 2040 017a 164B     		ldr	r3, .L117+52
 2041              	.LVL225:
 2042              		.loc 1 567 24 view .LVU552
 2043 017c A3F80170 		strh	r7, [r3, #1]	@ unaligned
 568:Core/Src/mainLoop.c ****   logPara.dac_val_n = (*dacN);
 2044              		.loc 1 568 3 is_stmt 1 view .LVU553
 2045              		.loc 1 568 24 is_stmt 0 view .LVU554
 2046 0180 3268     		ldr	r2, [r6]
 2047              		.loc 1 568 21 view .LVU555
 2048 0182 C3F80720 		str	r2, [r3, #7]	@ unaligned
 569:Core/Src/mainLoop.c ****   logPara.dac_val_p = (*dacP);
 2049              		.loc 1 569 3 is_stmt 1 view .LVU556
 2050              		.loc 1 569 24 is_stmt 0 view .LVU557
ARM GAS  /tmp/ccJOVKBd.s 			page 49


 2051 0186 2A68     		ldr	r2, [r5]
 2052              		.loc 1 569 21 view .LVU558
 2053 0188 C3F80320 		str	r2, [r3, #3]	@ unaligned
 570:Core/Src/mainLoop.c ****   // HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 571:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_RESET);
 2054              		.loc 1 571 3 is_stmt 1 view .LVU559
 2055 018c 0022     		movs	r2, #0
 2056 018e 4FF48051 		mov	r1, #4096
 2057 0192 0948     		ldr	r0, .L117+24
 2058 0194 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2059              	.LVL226:
 572:Core/Src/mainLoop.c **** }
 2060              		.loc 1 572 1 is_stmt 0 view .LVU560
 2061 0198 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2062              	.LVL227:
 2063              	.L118:
 2064              		.loc 1 572 1 view .LVU561
 2065 019c AFF30080 		.align	3
 2066              	.L117:
 2067 01a0 FCA9F1D2 		.word	3539053052
 2068 01a4 4D6240BF 		.word	-1086299571
 2069 01a8 88855AD3 		.word	3545925000
 2070 01ac BCE3743F 		.word	1064625084
 2071 01b0 0AD7A370 		.word	1889785610
 2072 01b4 3D0AF23F 		.word	1072826941
 2073 01b8 00080240 		.word	1073874944
 2074 01bc 00000000 		.word	.LANCHOR9
 2075 01c0 00000000 		.word	.LANCHOR10
 2076 01c4 00000000 		.word	adcSumArray
 2077 01c8 00000000 		.word	.LANCHOR4
 2078 01cc 00000000 		.word	.LANCHOR5
 2079 01d0 00000000 		.word	.LANCHOR6
 2080 01d4 00000000 		.word	logPara
 2081 01d8 00000000 		.word	.LANCHOR7
 2082              		.cfi_endproc
 2083              	.LFE147:
 2085              		.section	.text.cal_cp_output_dac_ext_1,"ax",%progbits
 2086              		.align	1
 2087              		.global	cal_cp_output_dac_ext_1
 2088              		.syntax unified
 2089              		.thumb
 2090              		.thumb_func
 2091              		.fpu fpv4-sp-d16
 2093              	cal_cp_output_dac_ext_1:
 2094              	.LVL228:
 2095              	.LFB148:
 573:Core/Src/mainLoop.c **** 
 574:Core/Src/mainLoop.c **** uint16_t forSaveAllSum = 1500;
 575:Core/Src/mainLoop.c **** // 2024.4.26Ë∞ÉÊï¥Ë∑üË∏™ÁÆóÊ≥ïÔºå‰ª•ÂâçÁöÑÁÆóÊ≥ïÊúâÂèØËÉΩ‰ºöÂá∫Áé∞ÂêåÊ≠•Áé∞Ë±°
 576:Core/Src/mainLoop.c **** #define TARGET_CPV_1 (2048)
 577:Core/Src/mainLoop.c **** void cal_cp_output_dac_ext_1(struct adc_buf_t *adc_buf, uint32_t *dacP,
 578:Core/Src/mainLoop.c ****                              uint32_t *dacN, int32_t runTime500us) {
 2096              		.loc 1 578 68 is_stmt 1 view -0
 2097              		.cfi_startproc
 2098              		@ args = 0, pretend = 0, frame = 0
 2099              		@ frame_needed = 0, uses_anonymous_args = 0
 2100              		.loc 1 578 68 is_stmt 0 view .LVU563
ARM GAS  /tmp/ccJOVKBd.s 			page 50


 2101 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2102              	.LCFI18:
 2103              		.cfi_def_cfa_offset 32
 2104              		.cfi_offset 4, -32
 2105              		.cfi_offset 5, -28
 2106              		.cfi_offset 6, -24
 2107              		.cfi_offset 7, -20
 2108              		.cfi_offset 8, -16
 2109              		.cfi_offset 9, -12
 2110              		.cfi_offset 10, -8
 2111              		.cfi_offset 14, -4
 2112 0004 0646     		mov	r6, r0
 2113 0006 0F46     		mov	r7, r1
 2114 0008 9046     		mov	r8, r2
 579:Core/Src/mainLoop.c ****   int32_t i = 0;
 2115              		.loc 1 579 3 is_stmt 1 view .LVU564
 2116              	.LVL229:
 580:Core/Src/mainLoop.c ****   int32_t N = ADC_BUF_T_SIZE;
 2117              		.loc 1 580 3 view .LVU565
 581:Core/Src/mainLoop.c ****   int32_t allSum = 0;
 2118              		.loc 1 581 3 view .LVU566
 582:Core/Src/mainLoop.c ****   
 583:Core/Src/mainLoop.c ****   uint32_t tmpUint32 = 0;
 2119              		.loc 1 583 3 view .LVU567
 584:Core/Src/mainLoop.c ****   int32_t deltNoisV = 0;
 2120              		.loc 1 584 3 view .LVU568
 585:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_SET);
 2121              		.loc 1 585 3 view .LVU569
 2122 000a 0122     		movs	r2, #1
 2123              	.LVL230:
 2124              		.loc 1 585 3 is_stmt 0 view .LVU570
 2125 000c 4FF48051 		mov	r1, #4096
 2126              	.LVL231:
 2127              		.loc 1 585 3 view .LVU571
 2128 0010 7148     		ldr	r0, .L130+24
 2129              	.LVL232:
 2130              		.loc 1 585 3 view .LVU572
 2131 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2132              	.LVL233:
 586:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 2133              		.loc 1 586 3 is_stmt 1 view .LVU573
 581:Core/Src/mainLoop.c ****   
 2134              		.loc 1 581 11 is_stmt 0 view .LVU574
 2135 0016 0023     		movs	r3, #0
 2136              		.loc 1 586 10 view .LVU575
 2137 0018 1A46     		mov	r2, r3
 2138              		.loc 1 586 3 view .LVU576
 2139 001a 09E0     		b	.L120
 2140              	.LVL234:
 2141              	.L121:
 587:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i] & 0x0fff));
 2142              		.loc 1 587 5 is_stmt 1 discriminator 3 view .LVU577
 2143              		.loc 1 587 38 is_stmt 0 discriminator 3 view .LVU578
 2144 001c 06EB8201 		add	r1, r6, r2, lsl #2
 2145 0020 4968     		ldr	r1, [r1, #4]
 2146              		.loc 1 587 15 discriminator 3 view .LVU579
 2147 0022 C1F30B00 		ubfx	r0, r1, #0, #12
ARM GAS  /tmp/ccJOVKBd.s 			page 51


 2148              		.loc 1 587 12 discriminator 3 view .LVU580
 2149 0026 0344     		add	r3, r3, r0
 2150              	.LVL235:
 588:Core/Src/mainLoop.c ****     allSum += (int32_t)(((adc_buf->buf[i] >> 16) & 0x0fff));
 2151              		.loc 1 588 5 is_stmt 1 discriminator 3 view .LVU581
 2152              		.loc 1 588 15 is_stmt 0 discriminator 3 view .LVU582
 2153 0028 C1F30B41 		ubfx	r1, r1, #16, #12
 2154              		.loc 1 588 12 discriminator 3 view .LVU583
 2155 002c 0B44     		add	r3, r3, r1
 2156              	.LVL236:
 586:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i] & 0x0fff));
 2157              		.loc 1 586 22 is_stmt 1 discriminator 3 view .LVU584
 586:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i] & 0x0fff));
 2158              		.loc 1 586 23 is_stmt 0 discriminator 3 view .LVU585
 2159 002e 0132     		adds	r2, r2, #1
 2160              	.LVL237:
 2161              	.L120:
 586:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i] & 0x0fff));
 2162              		.loc 1 586 15 is_stmt 1 discriminator 1 view .LVU586
 586:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i] & 0x0fff));
 2163              		.loc 1 586 3 is_stmt 0 discriminator 1 view .LVU587
 2164 0030 632A     		cmp	r2, #99
 2165 0032 F3DD     		ble	.L121
 589:Core/Src/mainLoop.c ****   }
 590:Core/Src/mainLoop.c ****   allSum = allSum / (N * 2);
 2166              		.loc 1 590 3 is_stmt 1 view .LVU588
 2167              		.loc 1 590 10 is_stmt 0 view .LVU589
 2168 0034 694A     		ldr	r2, .L130+28
 2169              	.LVL238:
 2170              		.loc 1 590 10 view .LVU590
 2171 0036 82FB0312 		smull	r1, r2, r2, r3
 2172 003a D817     		asrs	r0, r3, #31
 2173 003c C0EBA210 		rsb	r0, r0, r2, asr #6
 2174              	.LVL239:
 591:Core/Src/mainLoop.c ****   // allSum = (adc_buf->buf[99]&0x0fff);
 592:Core/Src/mainLoop.c ****   forSaveAllSum = allSum;
 2175              		.loc 1 592 3 is_stmt 1 view .LVU591
 593:Core/Src/mainLoop.c ****   allSum = allSum - TARGET_CPV_1;
 2176              		.loc 1 593 3 view .LVU592
 2177              		.loc 1 593 10 is_stmt 0 view .LVU593
 2178 0040 A0F50060 		sub	r0, r0, #2048
 2179              	.LVL240:
 594:Core/Src/mainLoop.c ****   forSaveAllSum = abs(allSum);
 2180              		.loc 1 594 3 is_stmt 1 view .LVU594
 2181              		.loc 1 594 19 is_stmt 0 view .LVU595
 2182 0044 80EAE072 		eor	r2, r0, r0, asr #31
 2183 0048 A2EBE072 		sub	r2, r2, r0, asr #31
 2184              		.loc 1 594 17 view .LVU596
 2185 004c 644B     		ldr	r3, .L130+32
 2186 004e 1A80     		strh	r2, [r3]	@ movhi
 595:Core/Src/mainLoop.c ****   // insertMeanVal(allSum,adc_buf);
 596:Core/Src/mainLoop.c ****   // meanVal_view = adc_buf->adcMeanVal;
 597:Core/Src/mainLoop.c ****   // difVal_view  = adc_buf->adcDif2;
 598:Core/Src/mainLoop.c **** 
 599:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE - 1; i++) {
 2187              		.loc 1 599 3 is_stmt 1 view .LVU597
 2188              	.LVL241:
ARM GAS  /tmp/ccJOVKBd.s 			page 52


 2189              		.loc 1 599 10 is_stmt 0 view .LVU598
 2190 0050 0023     		movs	r3, #0
 2191              	.LVL242:
 2192              	.L122:
 2193              		.loc 1 599 15 is_stmt 1 discriminator 1 view .LVU599
 2194              		.loc 1 599 3 is_stmt 0 discriminator 1 view .LVU600
 2195 0052 002B     		cmp	r3, #0
 2196 0054 07DD     		ble	.L123
 600:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 601:Core/Src/mainLoop.c ****   }
 602:Core/Src/mainLoop.c ****   adcSumArray[ADCSUMARRAY_SIZE - 1] = allSum;
 2197              		.loc 1 602 3 is_stmt 1 view .LVU601
 2198              		.loc 1 602 37 is_stmt 0 view .LVU602
 2199 0056 634B     		ldr	r3, .L130+36
 2200              	.LVL243:
 2201              		.loc 1 602 37 view .LVU603
 2202 0058 5860     		str	r0, [r3, #4]
 603:Core/Src/mainLoop.c **** 
 604:Core/Src/mainLoop.c ****   // pid
 605:Core/Src/mainLoop.c ****   pidP = adcSumArray[ADCSUMARRAY_SIZE - 1];
 2203              		.loc 1 605 3 is_stmt 1 view .LVU604
 2204              		.loc 1 605 8 is_stmt 0 view .LVU605
 2205 005a 634B     		ldr	r3, .L130+40
 2206 005c 1860     		str	r0, [r3]
 606:Core/Src/mainLoop.c ****   pidI = 0;
 2207              		.loc 1 606 3 is_stmt 1 view .LVU606
 2208              		.loc 1 606 8 is_stmt 0 view .LVU607
 2209 005e 0023     		movs	r3, #0
 2210 0060 624A     		ldr	r2, .L130+44
 2211 0062 1360     		str	r3, [r2]
 607:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 2212              		.loc 1 607 3 is_stmt 1 view .LVU608
 2213              	.LVL244:
 2214              		.loc 1 607 3 is_stmt 0 view .LVU609
 2215 0064 0FE0     		b	.L124
 2216              	.LVL245:
 2217              	.L123:
 600:Core/Src/mainLoop.c ****   }
 2218              		.loc 1 600 5 is_stmt 1 discriminator 3 view .LVU610
 600:Core/Src/mainLoop.c ****   }
 2219              		.loc 1 600 36 is_stmt 0 discriminator 3 view .LVU611
 2220 0066 5A1C     		adds	r2, r3, #1
 600:Core/Src/mainLoop.c ****   }
 2221              		.loc 1 600 33 discriminator 3 view .LVU612
 2222 0068 5E49     		ldr	r1, .L130+36
 2223 006a 51F82240 		ldr	r4, [r1, r2, lsl #2]
 600:Core/Src/mainLoop.c ****   }
 2224              		.loc 1 600 20 discriminator 3 view .LVU613
 2225 006e 41F82340 		str	r4, [r1, r3, lsl #2]
 599:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 2226              		.loc 1 599 41 is_stmt 1 discriminator 3 view .LVU614
 2227              	.LVL246:
 599:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 2228              		.loc 1 599 42 is_stmt 0 discriminator 3 view .LVU615
 2229 0072 1346     		mov	r3, r2
 2230 0074 EDE7     		b	.L122
 2231              	.LVL247:
ARM GAS  /tmp/ccJOVKBd.s 			page 53


 2232              	.L125:
 608:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 2233              		.loc 1 608 5 is_stmt 1 discriminator 3 view .LVU616
 2234              		.loc 1 608 24 is_stmt 0 discriminator 3 view .LVU617
 2235 0076 5B4A     		ldr	r2, .L130+36
 2236 0078 52F82340 		ldr	r4, [r2, r3, lsl #2]
 2237              		.loc 1 608 10 discriminator 3 view .LVU618
 2238 007c 5B49     		ldr	r1, .L130+44
 2239 007e 0A68     		ldr	r2, [r1]
 2240 0080 2244     		add	r2, r2, r4
 2241 0082 0A60     		str	r2, [r1]
 607:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 2242              		.loc 1 607 37 is_stmt 1 discriminator 3 view .LVU619
 607:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 2243              		.loc 1 607 38 is_stmt 0 discriminator 3 view .LVU620
 2244 0084 0133     		adds	r3, r3, #1
 2245              	.LVL248:
 2246              	.L124:
 607:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 2247              		.loc 1 607 15 is_stmt 1 discriminator 1 view .LVU621
 607:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 2248              		.loc 1 607 3 is_stmt 0 discriminator 1 view .LVU622
 2249 0086 012B     		cmp	r3, #1
 2250 0088 F5DD     		ble	.L125
 609:Core/Src/mainLoop.c ****   }
 610:Core/Src/mainLoop.c ****   pidI = pidI / ADCSUMARRAY_SIZE;
 2251              		.loc 1 610 3 is_stmt 1 view .LVU623
 2252              		.loc 1 610 15 is_stmt 0 view .LVU624
 2253 008a 584A     		ldr	r2, .L130+44
 2254 008c 1368     		ldr	r3, [r2]
 2255              	.LVL249:
 2256              		.loc 1 610 15 view .LVU625
 2257 008e 03EBD373 		add	r3, r3, r3, lsr #31
 2258 0092 4FEA630A 		asr	r10, r3, #1
 2259              		.loc 1 610 8 view .LVU626
 2260 0096 C2F800A0 		str	r10, [r2]
 611:Core/Src/mainLoop.c ****   pidD = adcSumArray[ADCSUMARRAY_SIZE - 1] - adcSumArray[ADCSUMARRAY_SIZE - 2];
 2261              		.loc 1 611 3 is_stmt 1 view .LVU627
 2262              		.loc 1 611 57 is_stmt 0 view .LVU628
 2263 009a 524B     		ldr	r3, .L130+36
 2264 009c 1B68     		ldr	r3, [r3]
 2265              		.loc 1 611 44 view .LVU629
 2266 009e A0EB0309 		sub	r9, r0, r3
 2267              		.loc 1 611 8 view .LVU630
 2268 00a2 534B     		ldr	r3, .L130+48
 2269 00a4 C3F80090 		str	r9, [r3]
 612:Core/Src/mainLoop.c **** 
 613:Core/Src/mainLoop.c **** #define kP_1 (-100.05)
 614:Core/Src/mainLoop.c **** #define kI_1 (+100.51)
 615:Core/Src/mainLoop.c **** #define kD_1 (100.1275)
 616:Core/Src/mainLoop.c **** //1,1k,1M‰∏âÊÆµÂèØ‰ª•Êî∂Êïõ
 617:Core/Src/mainLoop.c **** // #define kP_1 (-1000.05)
 618:Core/Src/mainLoop.c **** // #define kI_1 (+1000.51)
 619:Core/Src/mainLoop.c **** // #define kD_1 (1000.1275)
 620:Core/Src/mainLoop.c ****   //1,1k‰∏§ÊÆµÂèØ‰ª•Êî∂Êïõ
 621:Core/Src/mainLoop.c ****   // #define kP (-0.0005)
 622:Core/Src/mainLoop.c ****   // #define kI (+0.0051)
ARM GAS  /tmp/ccJOVKBd.s 			page 54


 623:Core/Src/mainLoop.c ****   // #define kD (1.1275)
 624:Core/Src/mainLoop.c ****   dletDac =
 2270              		.loc 1 624 3 is_stmt 1 view .LVU631
 625:Core/Src/mainLoop.c ****       kP_1 * ((double_t)pidP) + kI_1 * ((double_t)pidI) + kD_1 * ((double_t)pidD);
 2271              		.loc 1 625 15 is_stmt 0 view .LVU632
 2272 00a8 FFF7FEFF 		bl	__aeabi_i2d
 2273              	.LVL250:
 2274              		.loc 1 625 12 view .LVU633
 2275 00ac 44A3     		adr	r3, .L130
 2276 00ae D3E90023 		ldrd	r2, [r3]
 2277 00b2 FFF7FEFF 		bl	__aeabi_dmul
 2278              	.LVL251:
 2279 00b6 0446     		mov	r4, r0
 2280 00b8 0D46     		mov	r5, r1
 2281              		.loc 1 625 41 view .LVU634
 2282 00ba 5046     		mov	r0, r10
 2283 00bc FFF7FEFF 		bl	__aeabi_i2d
 2284              	.LVL252:
 2285              		.loc 1 625 38 view .LVU635
 2286 00c0 41A3     		adr	r3, .L130+8
 2287 00c2 D3E90023 		ldrd	r2, [r3]
 2288 00c6 FFF7FEFF 		bl	__aeabi_dmul
 2289              	.LVL253:
 2290 00ca 0246     		mov	r2, r0
 2291 00cc 0B46     		mov	r3, r1
 2292              		.loc 1 625 31 view .LVU636
 2293 00ce 2046     		mov	r0, r4
 2294 00d0 2946     		mov	r1, r5
 2295 00d2 FFF7FEFF 		bl	__aeabi_dadd
 2296              	.LVL254:
 2297 00d6 0446     		mov	r4, r0
 2298 00d8 0D46     		mov	r5, r1
 2299              		.loc 1 625 67 view .LVU637
 2300 00da 4846     		mov	r0, r9
 2301 00dc FFF7FEFF 		bl	__aeabi_i2d
 2302              	.LVL255:
 2303              		.loc 1 625 64 view .LVU638
 2304 00e0 3BA3     		adr	r3, .L130+16
 2305 00e2 D3E90023 		ldrd	r2, [r3]
 2306 00e6 FFF7FEFF 		bl	__aeabi_dmul
 2307              	.LVL256:
 2308 00ea 0246     		mov	r2, r0
 2309 00ec 0B46     		mov	r3, r1
 2310              		.loc 1 625 57 view .LVU639
 2311 00ee 2046     		mov	r0, r4
 2312 00f0 2946     		mov	r1, r5
 2313 00f2 FFF7FEFF 		bl	__aeabi_dadd
 2314              	.LVL257:
 2315 00f6 0246     		mov	r2, r0
 2316 00f8 0B46     		mov	r3, r1
 624:Core/Src/mainLoop.c ****       kP_1 * ((double_t)pidP) + kI_1 * ((double_t)pidI) + kD_1 * ((double_t)pidD);
 2317              		.loc 1 624 11 view .LVU640
 2318 00fa 3E4C     		ldr	r4, .L130+52
 2319 00fc C4E90023 		strd	r2, [r4]
 626:Core/Src/mainLoop.c ****   tmpUint32 = abs((int32_t)(dletDac));
 2320              		.loc 1 626 3 is_stmt 1 view .LVU641
 2321              		.loc 1 626 19 is_stmt 0 view .LVU642
ARM GAS  /tmp/ccJOVKBd.s 			page 55


 2322 0100 FFF7FEFF 		bl	__aeabi_d2iz
 2323              	.LVL258:
 627:Core/Src/mainLoop.c **** 
 628:Core/Src/mainLoop.c ****   deltNoisV = 0;
 2324              		.loc 1 628 3 is_stmt 1 view .LVU643
 629:Core/Src/mainLoop.c **** 
 630:Core/Src/mainLoop.c ****   // (*dacP) += (int32_t)(dletDac);
 631:Core/Src/mainLoop.c ****   // (*dacN) -= (int32_t)(dletDac);
 632:Core/Src/mainLoop.c ****   // (*dacP) += deltNoisV;
 633:Core/Src/mainLoop.c ****   // (*dacN) -= deltNoisV;
 634:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACP_1, ((*dacP)  >> 12)&0xfff, max_outdisable);
 635:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACP_1K, (((*dacP)>>0) & 0xfff), max_outdisable);
 636:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACN_1, ((*dacN)  >> 12)&0xfff, max_outdisable);
 637:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACN_1K, (((*dacN)>>0) & 0xfff), max_outdisable);
 638:Core/Src/mainLoop.c **** 
 639:Core/Src/mainLoop.c ****   (*dacP) += (int32_t)(dletDac);
 2325              		.loc 1 639 3 view .LVU644
 2326              		.loc 1 639 11 is_stmt 0 view .LVU645
 2327 0104 3B68     		ldr	r3, [r7]
 2328 0106 0344     		add	r3, r3, r0
 2329 0108 3B60     		str	r3, [r7]
 640:Core/Src/mainLoop.c ****   (*dacN) -= (int32_t)(dletDac);
 2330              		.loc 1 640 3 is_stmt 1 view .LVU646
 2331              		.loc 1 640 14 is_stmt 0 view .LVU647
 2332 010a D4E90001 		ldrd	r0, [r4]
 2333              	.LVL259:
 2334              		.loc 1 640 14 view .LVU648
 2335 010e FFF7FEFF 		bl	__aeabi_d2iz
 2336              	.LVL260:
 2337              		.loc 1 640 11 view .LVU649
 2338 0112 D8F80030 		ldr	r3, [r8]
 2339 0116 1B1A     		subs	r3, r3, r0
 2340 0118 C8F80030 		str	r3, [r8]
 641:Core/Src/mainLoop.c ****   (*dacP) += deltNoisV;
 2341              		.loc 1 641 3 is_stmt 1 view .LVU650
 2342              		.loc 1 641 11 is_stmt 0 view .LVU651
 2343 011c 3968     		ldr	r1, [r7]
 642:Core/Src/mainLoop.c ****   (*dacN) -= deltNoisV;
 2344              		.loc 1 642 3 is_stmt 1 view .LVU652
 643:Core/Src/mainLoop.c **** 	max5307_w_chanel(DACP_1,  (((*dacP) >> 20)&0xffc), max_outdisable);
 2345              		.loc 1 643 2 view .LVU653
 2346 011e 40F6FC74 		movw	r4, #4092
 2347 0122 0222     		movs	r2, #2
 2348 0124 04EA1151 		and	r1, r4, r1, lsr #20
 2349 0128 0620     		movs	r0, #6
 2350 012a FFF7FEFF 		bl	max5307_w_chanel
 2351              	.LVL261:
 644:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1K, (((*dacP) >> 10)&0xffc), max_outdisable);
 2352              		.loc 1 644 3 view .LVU654
 2353              		.loc 1 644 32 is_stmt 0 view .LVU655
 2354 012e 3968     		ldr	r1, [r7]
 2355              		.loc 1 644 3 view .LVU656
 2356 0130 0222     		movs	r2, #2
 2357 0132 04EA9121 		and	r1, r4, r1, lsr #10
 2358 0136 0720     		movs	r0, #7
 2359 0138 FFF7FEFF 		bl	max5307_w_chanel
 2360              	.LVL262:
ARM GAS  /tmp/ccJOVKBd.s 			page 56


 645:Core/Src/mainLoop.c **** 	max5307_w_chanel(DACP_1M, ((*dacP)&0xfff)&0xfff, max_outdisable);
 2361              		.loc 1 645 2 is_stmt 1 view .LVU657
 2362              		.loc 1 645 30 is_stmt 0 view .LVU658
 2363 013c 3968     		ldr	r1, [r7]
 2364              		.loc 1 645 2 view .LVU659
 2365 013e 0222     		movs	r2, #2
 2366 0140 C1F30B01 		ubfx	r1, r1, #0, #12
 2367 0144 0820     		movs	r0, #8
 2368 0146 FFF7FEFF 		bl	max5307_w_chanel
 2369              	.LVL263:
 646:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1,  (((*dacN) >> 20)&0xffc), max_outdisable);
 2370              		.loc 1 646 3 is_stmt 1 view .LVU660
 2371              		.loc 1 646 32 is_stmt 0 view .LVU661
 2372 014a D8F80010 		ldr	r1, [r8]
 2373              		.loc 1 646 3 view .LVU662
 2374 014e 0222     		movs	r2, #2
 2375 0150 04EA1151 		and	r1, r4, r1, lsr #20
 2376 0154 0520     		movs	r0, #5
 2377 0156 FFF7FEFF 		bl	max5307_w_chanel
 2378              	.LVL264:
 647:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1K, (((*dacN) >> 10)&0xffc), max_outdisable);
 2379              		.loc 1 647 3 is_stmt 1 view .LVU663
 2380              		.loc 1 647 32 is_stmt 0 view .LVU664
 2381 015a D8F80010 		ldr	r1, [r8]
 2382              		.loc 1 647 3 view .LVU665
 2383 015e 0222     		movs	r2, #2
 2384 0160 04EA9121 		and	r1, r4, r1, lsr #10
 2385 0164 0420     		movs	r0, #4
 2386 0166 FFF7FEFF 		bl	max5307_w_chanel
 2387              	.LVL265:
 648:Core/Src/mainLoop.c **** 	max5307_w_chanel(DACN_1M, ((*dacN)&0xfff)&0xfff, max_outdisable);
 2388              		.loc 1 648 2 is_stmt 1 view .LVU666
 2389              		.loc 1 648 30 is_stmt 0 view .LVU667
 2390 016a D8F80010 		ldr	r1, [r8]
 2391              		.loc 1 648 2 view .LVU668
 2392 016e 0222     		movs	r2, #2
 2393 0170 C1F30B01 		ubfx	r1, r1, #0, #12
 2394 0174 0320     		movs	r0, #3
 2395 0176 FFF7FEFF 		bl	max5307_w_chanel
 2396              	.LVL266:
 649:Core/Src/mainLoop.c **** 
 650:Core/Src/mainLoop.c **** 	do{
 2397              		.loc 1 650 2 is_stmt 1 view .LVU669
 2398              	.LBB5:
 651:Core/Src/mainLoop.c **** 		uint16_t chanelNo = 0;
 2399              		.loc 1 651 3 view .LVU670
 652:Core/Src/mainLoop.c **** 		chanelNo = 0x01<<(DACP_1+2)  | 
 2400              		.loc 1 652 3 view .LVU671
 653:Core/Src/mainLoop.c **** 							 0x01<<(DACP_1K+2) |
 654:Core/Src/mainLoop.c **** 							 0x01<<(DACP_1M+2) |
 655:Core/Src/mainLoop.c **** 							 0x01<<(DACN_1+2)  |
 656:Core/Src/mainLoop.c **** 							 0x01<<(DACN_1K+2) |
 657:Core/Src/mainLoop.c **** 							 0x01<<(DACN_1M+2) ; 
 658:Core/Src/mainLoop.c **** 		max5307_enable_ori_chanel(chanelNo);
 2401              		.loc 1 658 3 view .LVU672
 2402 017a 4FF4FC60 		mov	r0, #2016
 2403 017e FFF7FEFF 		bl	max5307_enable_ori_chanel
ARM GAS  /tmp/ccJOVKBd.s 			page 57


 2404              	.LVL267:
 2405              	.LBE5:
 659:Core/Src/mainLoop.c **** 	}while(0);
 2406              		.loc 1 659 8 view .LVU673
 660:Core/Src/mainLoop.c **** 	
 661:Core/Src/mainLoop.c ****   // clear buf
 662:Core/Src/mainLoop.c ****   for (i = 0; i < ADC_BUF_T_SIZE; i++) {
 2407              		.loc 1 662 3 view .LVU674
 2408              		.loc 1 662 10 is_stmt 0 view .LVU675
 2409 0182 0023     		movs	r3, #0
 2410              	.LVL268:
 2411              	.L126:
 2412              		.loc 1 662 15 is_stmt 1 discriminator 1 view .LVU676
 2413              		.loc 1 662 3 is_stmt 0 discriminator 1 view .LVU677
 2414 0184 632B     		cmp	r3, #99
 2415 0186 05DC     		bgt	.L129
 663:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2416              		.loc 1 663 5 is_stmt 1 discriminator 3 view .LVU678
 2417              		.loc 1 663 21 is_stmt 0 discriminator 3 view .LVU679
 2418 0188 06EB8304 		add	r4, r6, r3, lsl #2
 2419 018c 0025     		movs	r5, #0
 2420 018e 6560     		str	r5, [r4, #4]
 662:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2421              		.loc 1 662 35 is_stmt 1 discriminator 3 view .LVU680
 662:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2422              		.loc 1 662 36 is_stmt 0 discriminator 3 view .LVU681
 2423 0190 0133     		adds	r3, r3, #1
 2424              	.LVL269:
 662:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2425              		.loc 1 662 36 discriminator 3 view .LVU682
 2426 0192 F7E7     		b	.L126
 2427              	.L129:
 664:Core/Src/mainLoop.c ****   }
 665:Core/Src/mainLoop.c ****   logPara.mean_adc_val = forSaveAllSum;
 2428              		.loc 1 665 3 is_stmt 1 view .LVU683
 2429              		.loc 1 665 24 is_stmt 0 view .LVU684
 2430 0194 184B     		ldr	r3, .L130+56
 2431              	.LVL270:
 2432              		.loc 1 665 24 view .LVU685
 2433 0196 124A     		ldr	r2, .L130+32
 2434 0198 1288     		ldrh	r2, [r2]
 2435 019a A3F80120 		strh	r2, [r3, #1]	@ unaligned
 666:Core/Src/mainLoop.c ****   // logPara.mean_adc_val = pidI;
 667:Core/Src/mainLoop.c ****   logPara.dac_val_n = (*dacN);
 2436              		.loc 1 667 3 is_stmt 1 view .LVU686
 2437              		.loc 1 667 24 is_stmt 0 view .LVU687
 2438 019e D8F80020 		ldr	r2, [r8]
 2439              		.loc 1 667 21 view .LVU688
 2440 01a2 C3F80720 		str	r2, [r3, #7]	@ unaligned
 668:Core/Src/mainLoop.c ****   logPara.dac_val_p = (*dacP);
 2441              		.loc 1 668 3 is_stmt 1 view .LVU689
 2442              		.loc 1 668 24 is_stmt 0 view .LVU690
 2443 01a6 3A68     		ldr	r2, [r7]
 2444              		.loc 1 668 21 view .LVU691
 2445 01a8 C3F80320 		str	r2, [r3, #3]	@ unaligned
 669:Core/Src/mainLoop.c ****   // HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 670:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_RESET);
ARM GAS  /tmp/ccJOVKBd.s 			page 58


 2446              		.loc 1 670 3 is_stmt 1 view .LVU692
 2447 01ac 0022     		movs	r2, #0
 2448 01ae 4FF48051 		mov	r1, #4096
 2449 01b2 0948     		ldr	r0, .L130+24
 2450 01b4 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2451              	.LVL271:
 671:Core/Src/mainLoop.c **** }
 2452              		.loc 1 671 1 is_stmt 0 view .LVU693
 2453 01b8 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2454              	.LVL272:
 2455              	.L131:
 2456              		.loc 1 671 1 view .LVU694
 2457 01bc AFF30080 		.align	3
 2458              	.L130:
 2459 01c0 33333333 		.word	858993459
 2460 01c4 330359C0 		.word	-1067908301
 2461 01c8 713D0AD7 		.word	3607772529
 2462 01cc A3205940 		.word	1079582883
 2463 01d0 5C8FC2F5 		.word	4123168604
 2464 01d4 28085940 		.word	1079576616
 2465 01d8 00080240 		.word	1073874944
 2466 01dc 1F85EB51 		.word	1374389535
 2467 01e0 00000000 		.word	.LANCHOR11
 2468 01e4 00000000 		.word	adcSumArray
 2469 01e8 00000000 		.word	.LANCHOR4
 2470 01ec 00000000 		.word	.LANCHOR5
 2471 01f0 00000000 		.word	.LANCHOR6
 2472 01f4 00000000 		.word	.LANCHOR7
 2473 01f8 00000000 		.word	logPara
 2474              		.cfi_endproc
 2475              	.LFE148:
 2477              		.section	.text.fakeDelay,"ax",%progbits
 2478              		.align	1
 2479              		.global	fakeDelay
 2480              		.syntax unified
 2481              		.thumb
 2482              		.thumb_func
 2483              		.fpu fpv4-sp-d16
 2485              	fakeDelay:
 2486              	.LVL273:
 2487              	.LFB149:
 672:Core/Src/mainLoop.c **** 
 673:Core/Src/mainLoop.c **** uint32_t adc1_ok = 0, adc2_ok = 0;
 674:Core/Src/mainLoop.c **** #define MID_CP_VALUE (2048)
 675:Core/Src/mainLoop.c **** uint32_t value_dacP = 0x8020200, value_dacN = 0x8020200;
 676:Core/Src/mainLoop.c **** int32_t mainCp = 0, mainCpLast = 0;
 677:Core/Src/mainLoop.c **** struct adc_buf_t adc1_t1, adc1_t2;
 678:Core/Src/mainLoop.c **** 
 679:Core/Src/mainLoop.c **** void fakeDelay(int32_t delay) {
 2488              		.loc 1 679 31 is_stmt 1 view -0
 2489              		.cfi_startproc
 2490              		@ args = 0, pretend = 0, frame = 0
 2491              		@ frame_needed = 0, uses_anonymous_args = 0
 2492              		@ link register save eliminated.
 2493              		.loc 1 679 31 is_stmt 0 view .LVU696
 2494 0000 0146     		mov	r1, r0
 680:Core/Src/mainLoop.c ****   int32_t i = 0, k = 0;
ARM GAS  /tmp/ccJOVKBd.s 			page 59


 2495              		.loc 1 680 3 is_stmt 1 view .LVU697
 2496              	.LVL274:
 681:Core/Src/mainLoop.c ****   int32_t tmp = 0;
 2497              		.loc 1 681 3 view .LVU698
 682:Core/Src/mainLoop.c ****   for (k = 0; k < delay; k++) {
 2498              		.loc 1 682 3 view .LVU699
 2499              		.loc 1 682 10 is_stmt 0 view .LVU700
 2500 0002 0022     		movs	r2, #0
 2501              		.loc 1 682 3 view .LVU701
 2502 0004 00E0     		b	.L133
 2503              	.LVL275:
 2504              	.L138:
 2505              		.loc 1 682 26 is_stmt 1 discriminator 2 view .LVU702
 2506              		.loc 1 682 27 is_stmt 0 discriminator 2 view .LVU703
 2507 0006 0132     		adds	r2, r2, #1
 2508              	.LVL276:
 2509              	.L133:
 2510              		.loc 1 682 15 is_stmt 1 discriminator 1 view .LVU704
 2511              		.loc 1 682 3 is_stmt 0 discriminator 1 view .LVU705
 2512 0008 8A42     		cmp	r2, r1
 2513 000a 04DA     		bge	.L137
 683:Core/Src/mainLoop.c ****     for (i = 0; i < 100; i++) {
 2514              		.loc 1 683 12 view .LVU706
 2515 000c 0023     		movs	r3, #0
 2516              	.L135:
 2517              	.LVL277:
 2518              		.loc 1 683 17 is_stmt 1 discriminator 1 view .LVU707
 2519              		.loc 1 683 5 is_stmt 0 discriminator 1 view .LVU708
 2520 000e 632B     		cmp	r3, #99
 2521 0010 F9DC     		bgt	.L138
 684:Core/Src/mainLoop.c ****       tmp++;
 2522              		.loc 1 684 7 is_stmt 1 discriminator 3 view .LVU709
 683:Core/Src/mainLoop.c ****     for (i = 0; i < 100; i++) {
 2523              		.loc 1 683 26 discriminator 3 view .LVU710
 683:Core/Src/mainLoop.c ****     for (i = 0; i < 100; i++) {
 2524              		.loc 1 683 27 is_stmt 0 discriminator 3 view .LVU711
 2525 0012 0133     		adds	r3, r3, #1
 2526              	.LVL278:
 683:Core/Src/mainLoop.c ****     for (i = 0; i < 100; i++) {
 2527              		.loc 1 683 27 discriminator 3 view .LVU712
 2528 0014 FBE7     		b	.L135
 2529              	.LVL279:
 2530              	.L137:
 685:Core/Src/mainLoop.c ****     }
 686:Core/Src/mainLoop.c ****   }
 687:Core/Src/mainLoop.c **** }
 2531              		.loc 1 687 1 view .LVU713
 2532 0016 7047     		bx	lr
 2533              		.cfi_endproc
 2534              	.LFE149:
 2536              		.section	.text.preMainLoop1,"ax",%progbits
 2537              		.align	1
 2538              		.global	preMainLoop1
 2539              		.syntax unified
 2540              		.thumb
 2541              		.thumb_func
 2542              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccJOVKBd.s 			page 60


 2544              	preMainLoop1:
 2545              	.LFB150:
 688:Core/Src/mainLoop.c **** 
 689:Core/Src/mainLoop.c **** extern SPI_HandleTypeDef hspi1;
 690:Core/Src/mainLoop.c **** void preMainLoop1(void) {
 2546              		.loc 1 690 25 is_stmt 1 view -0
 2547              		.cfi_startproc
 2548              		@ args = 0, pretend = 0, frame = 0
 2549              		@ frame_needed = 0, uses_anonymous_args = 0
 2550 0000 08B5     		push	{r3, lr}
 2551              	.LCFI19:
 2552              		.cfi_def_cfa_offset 8
 2553              		.cfi_offset 3, -8
 2554              		.cfi_offset 14, -4
 691:Core/Src/mainLoop.c ****   do {
 2555              		.loc 1 691 3 view .LVU715
 692:Core/Src/mainLoop.c ****     hspi1.Instance = SPI1;
 2556              		.loc 1 692 5 view .LVU716
 2557              		.loc 1 692 20 is_stmt 0 view .LVU717
 2558 0002 1048     		ldr	r0, .L143
 2559 0004 104B     		ldr	r3, .L143+4
 2560 0006 0360     		str	r3, [r0]
 693:Core/Src/mainLoop.c ****     hspi1.Init.Mode = SPI_MODE_MASTER;
 2561              		.loc 1 693 5 is_stmt 1 view .LVU718
 2562              		.loc 1 693 21 is_stmt 0 view .LVU719
 2563 0008 4FF48273 		mov	r3, #260
 2564 000c 4360     		str	r3, [r0, #4]
 694:Core/Src/mainLoop.c ****     hspi1.Init.Direction = SPI_DIRECTION_2LINES;
 2565              		.loc 1 694 5 is_stmt 1 view .LVU720
 2566              		.loc 1 694 26 is_stmt 0 view .LVU721
 2567 000e 0023     		movs	r3, #0
 2568 0010 8360     		str	r3, [r0, #8]
 695:Core/Src/mainLoop.c ****     hspi1.Init.DataSize = SPI_DATASIZE_16BIT;
 2569              		.loc 1 695 5 is_stmt 1 view .LVU722
 2570              		.loc 1 695 25 is_stmt 0 view .LVU723
 2571 0012 4FF40062 		mov	r2, #2048
 2572 0016 C260     		str	r2, [r0, #12]
 696:Core/Src/mainLoop.c ****     hspi1.Init.CLKPolarity = SPI_POLARITY_LOW;
 2573              		.loc 1 696 5 is_stmt 1 view .LVU724
 2574              		.loc 1 696 28 is_stmt 0 view .LVU725
 2575 0018 0361     		str	r3, [r0, #16]
 697:Core/Src/mainLoop.c ****     hspi1.Init.CLKPhase = SPI_PHASE_1EDGE;
 2576              		.loc 1 697 5 is_stmt 1 view .LVU726
 2577              		.loc 1 697 25 is_stmt 0 view .LVU727
 2578 001a 4361     		str	r3, [r0, #20]
 698:Core/Src/mainLoop.c ****     hspi1.Init.NSS = SPI_NSS_SOFT;
 2579              		.loc 1 698 5 is_stmt 1 view .LVU728
 2580              		.loc 1 698 20 is_stmt 0 view .LVU729
 2581 001c 4FF40072 		mov	r2, #512
 2582 0020 8261     		str	r2, [r0, #24]
 699:Core/Src/mainLoop.c ****     hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_128;
 2583              		.loc 1 699 5 is_stmt 1 view .LVU730
 2584              		.loc 1 699 34 is_stmt 0 view .LVU731
 2585 0022 3022     		movs	r2, #48
 2586 0024 C261     		str	r2, [r0, #28]
 700:Core/Src/mainLoop.c ****     hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 2587              		.loc 1 700 5 is_stmt 1 view .LVU732
ARM GAS  /tmp/ccJOVKBd.s 			page 61


 2588              		.loc 1 700 25 is_stmt 0 view .LVU733
 2589 0026 0362     		str	r3, [r0, #32]
 701:Core/Src/mainLoop.c ****     hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
 2590              		.loc 1 701 5 is_stmt 1 view .LVU734
 2591              		.loc 1 701 23 is_stmt 0 view .LVU735
 2592 0028 4362     		str	r3, [r0, #36]
 702:Core/Src/mainLoop.c ****     hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 2593              		.loc 1 702 5 is_stmt 1 view .LVU736
 2594              		.loc 1 702 31 is_stmt 0 view .LVU737
 2595 002a 8362     		str	r3, [r0, #40]
 703:Core/Src/mainLoop.c ****     hspi1.Init.CRCPolynomial = 10;
 2596              		.loc 1 703 5 is_stmt 1 view .LVU738
 2597              		.loc 1 703 30 is_stmt 0 view .LVU739
 2598 002c 0A23     		movs	r3, #10
 2599 002e C362     		str	r3, [r0, #44]
 704:Core/Src/mainLoop.c ****     if (HAL_SPI_Init(&hspi1) != HAL_OK) {
 2600              		.loc 1 704 5 is_stmt 1 view .LVU740
 2601              		.loc 1 704 9 is_stmt 0 view .LVU741
 2602 0030 FFF7FEFF 		bl	HAL_SPI_Init
 2603              	.LVL280:
 2604              		.loc 1 704 8 view .LVU742
 2605 0034 10B9     		cbnz	r0, .L142
 2606              	.L140:
 705:Core/Src/mainLoop.c ****       Error_Handler();
 706:Core/Src/mainLoop.c ****     }
 707:Core/Src/mainLoop.c ****   } while (0);
 2607              		.loc 1 707 11 is_stmt 1 view .LVU743
 708:Core/Src/mainLoop.c ****   init_ad9520();
 2608              		.loc 1 708 3 view .LVU744
 2609 0036 FFF7FEFF 		bl	init_ad9520
 2610              	.LVL281:
 709:Core/Src/mainLoop.c **** }
 2611              		.loc 1 709 1 is_stmt 0 view .LVU745
 2612 003a 08BD     		pop	{r3, pc}
 2613              	.L142:
 705:Core/Src/mainLoop.c ****       Error_Handler();
 2614              		.loc 1 705 7 is_stmt 1 view .LVU746
 2615 003c FFF7FEFF 		bl	Error_Handler
 2616              	.LVL282:
 2617 0040 F9E7     		b	.L140
 2618              	.L144:
 2619 0042 00BF     		.align	2
 2620              	.L143:
 2621 0044 00000000 		.word	hspi1
 2622 0048 00300140 		.word	1073819648
 2623              		.cfi_endproc
 2624              	.LFE150:
 2626              		.section	.text.mainLoop1,"ax",%progbits
 2627              		.align	1
 2628              		.global	mainLoop1
 2629              		.syntax unified
 2630              		.thumb
 2631              		.thumb_func
 2632              		.fpu fpv4-sp-d16
 2634              	mainLoop1:
 2635              	.LFB151:
 710:Core/Src/mainLoop.c **** 
ARM GAS  /tmp/ccJOVKBd.s 			page 62


 711:Core/Src/mainLoop.c **** struct log_para_t logBufDma;
 712:Core/Src/mainLoop.c **** uint16_t ad9520_reg = 0;
 713:Core/Src/mainLoop.c **** uint32_t locked = 0;
 714:Core/Src/mainLoop.c **** uint32_t adcVal, lastAdcVal;
 715:Core/Src/mainLoop.c **** void mainLoop1(void) {
 2636              		.loc 1 715 22 view -0
 2637              		.cfi_startproc
 2638              		@ args = 0, pretend = 0, frame = 32
 2639              		@ frame_needed = 0, uses_anonymous_args = 0
 2640 0000 70B5     		push	{r4, r5, r6, lr}
 2641              	.LCFI20:
 2642              		.cfi_def_cfa_offset 16
 2643              		.cfi_offset 4, -16
 2644              		.cfi_offset 5, -12
 2645              		.cfi_offset 6, -8
 2646              		.cfi_offset 14, -4
 2647 0002 88B0     		sub	sp, sp, #32
 2648              	.LCFI21:
 2649              		.cfi_def_cfa_offset 48
 716:Core/Src/mainLoop.c **** #define CONST_DELTDA (0X000)
 717:Core/Src/mainLoop.c ****   uint32_t dac_default_val[8] = {0, 0, 0, 0, 0, 0, 0, 0};
 2650              		.loc 1 717 3 view .LVU748
 2651              		.loc 1 717 12 is_stmt 0 view .LVU749
 2652 0004 2022     		movs	r2, #32
 2653 0006 0021     		movs	r1, #0
 2654 0008 6846     		mov	r0, sp
 2655 000a FFF7FEFF 		bl	memset
 2656              	.LVL283:
 718:Core/Src/mainLoop.c ****   int32_t runTimes =
 2657              		.loc 1 718 3 is_stmt 1 view .LVU750
 719:Core/Src/mainLoop.c ****       0;  // log 30s, for example 0.5ms*2000=1s, runtimes=2000*60=1min
 720:Core/Src/mainLoop.c ****   int32_t xyz = 0;
 2658              		.loc 1 720 3 view .LVU751
 721:Core/Src/mainLoop.c ****   adc1_t1.adc_cap_ok = CALOK;
 2659              		.loc 1 721 3 view .LVU752
 2660              		.loc 1 721 22 is_stmt 0 view .LVU753
 2661 000e 4FF6FF73 		movw	r3, #65535
 2662 0012 374D     		ldr	r5, .L151
 2663 0014 45F8043B 		str	r3, [r5], #4
 722:Core/Src/mainLoop.c ****   adc1_t2.adc_cap_ok = CALOK;
 2664              		.loc 1 722 3 is_stmt 1 view .LVU754
 2665              		.loc 1 722 22 is_stmt 0 view .LVU755
 2666 0018 364A     		ldr	r2, .L151+4
 2667 001a 1360     		str	r3, [r2]
 723:Core/Src/mainLoop.c ****   /* USER CODE BEGIN 2 */
 724:Core/Src/mainLoop.c ****   // SystemClock_Config();//from main.c
 725:Core/Src/mainLoop.c ****   // MX_USART2_UART_Init();
 726:Core/Src/mainLoop.c ****   init_max5307();
 2668              		.loc 1 726 3 is_stmt 1 view .LVU756
 2669 001c FFF7FEFF 		bl	init_max5307
 2670              	.LVL284:
 727:Core/Src/mainLoop.c ****   set_dac_initVal(dac_default_val);
 2671              		.loc 1 727 3 view .LVU757
 2672 0020 6846     		mov	r0, sp
 2673 0022 FFF7FEFF 		bl	set_dac_initVal
 2674              	.LVL285:
 728:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch8, 2048, max_outenable);
ARM GAS  /tmp/ccJOVKBd.s 			page 63


 2675              		.loc 1 728 3 view .LVU758
 2676 0026 0122     		movs	r2, #1
 2677 0028 4FF40061 		mov	r1, #2048
 2678 002c 0920     		movs	r0, #9
 2679 002e FFF7FEFF 		bl	max5307_w_chanel
 2680              	.LVL286:
 729:Core/Src/mainLoop.c ****   do {  // set 1.5v
 2681              		.loc 1 729 3 view .LVU759
 730:Core/Src/mainLoop.c ****     value_dacP -= CONST_DELTDA;
 2682              		.loc 1 730 5 view .LVU760
 2683              		.loc 1 730 16 is_stmt 0 view .LVU761
 2684 0032 314C     		ldr	r4, .L151+8
 2685 0034 2168     		ldr	r1, [r4]
 731:Core/Src/mainLoop.c ****     value_dacN += CONST_DELTDA;
 2686              		.loc 1 731 5 is_stmt 1 view .LVU762
 732:Core/Src/mainLoop.c ****     max5307_w_chanel(DACP_1, (value_dacP >> 12), max_outenable);
 2687              		.loc 1 732 5 view .LVU763
 2688 0036 0122     		movs	r2, #1
 2689 0038 090B     		lsrs	r1, r1, #12
 2690 003a 0620     		movs	r0, #6
 2691 003c FFF7FEFF 		bl	max5307_w_chanel
 2692              	.LVL287:
 733:Core/Src/mainLoop.c ****     max5307_w_chanel(DACP_1K, (value_dacP & 0XFFF), max_outenable);
 2693              		.loc 1 733 5 view .LVU764
 2694 0040 2168     		ldr	r1, [r4]
 2695 0042 0122     		movs	r2, #1
 2696 0044 C1F30B01 		ubfx	r1, r1, #0, #12
 2697 0048 0720     		movs	r0, #7
 2698 004a FFF7FEFF 		bl	max5307_w_chanel
 2699              	.LVL288:
 734:Core/Src/mainLoop.c ****     max5307_w_chanel(DACN_1, (value_dacN >> 12), max_outenable);
 2700              		.loc 1 734 5 view .LVU765
 2701 004e 2B4C     		ldr	r4, .L151+12
 2702 0050 2168     		ldr	r1, [r4]
 2703 0052 0122     		movs	r2, #1
 2704 0054 090B     		lsrs	r1, r1, #12
 2705 0056 0520     		movs	r0, #5
 2706 0058 FFF7FEFF 		bl	max5307_w_chanel
 2707              	.LVL289:
 735:Core/Src/mainLoop.c ****     max5307_w_chanel(DACN_1K, (value_dacN & 0xFFF), max_outenable);
 2708              		.loc 1 735 5 view .LVU766
 2709 005c 2168     		ldr	r1, [r4]
 2710 005e 0122     		movs	r2, #1
 2711 0060 C1F30B01 		ubfx	r1, r1, #0, #12
 2712 0064 0420     		movs	r0, #4
 2713 0066 FFF7FEFF 		bl	max5307_w_chanel
 2714              	.LVL290:
 736:Core/Src/mainLoop.c ****   } while (0);
 2715              		.loc 1 736 11 view .LVU767
 737:Core/Src/mainLoop.c **** 
 738:Core/Src/mainLoop.c ****   init_ad9520();
 2716              		.loc 1 738 3 view .LVU768
 2717 006a FFF7FEFF 		bl	init_ad9520
 2718              	.LVL291:
 739:Core/Src/mainLoop.c ****   SystemClock_Config();
 2719              		.loc 1 739 3 view .LVU769
 2720 006e FFF7FEFF 		bl	SystemClock_Config
ARM GAS  /tmp/ccJOVKBd.s 			page 64


 2721              	.LVL292:
 740:Core/Src/mainLoop.c ****   MX_USART2_UART_Init();
 2722              		.loc 1 740 3 view .LVU770
 2723 0072 FFF7FEFF 		bl	MX_USART2_UART_Init
 2724              	.LVL293:
 741:Core/Src/mainLoop.c ****   // fprintf(logBufDma,"helloworld");
 742:Core/Src/mainLoop.c ****   //  for(int i=0;i<10;i++){
 743:Core/Src/mainLoop.c ****   //  	logBufDma[i] = 65 + i;
 744:Core/Src/mainLoop.c ****   //  }
 745:Core/Src/mainLoop.c ****   logBufDma.sbs = 35;  //'#'
 2725              		.loc 1 745 3 view .LVU771
 2726              		.loc 1 745 17 is_stmt 0 view .LVU772
 2727 0076 224E     		ldr	r6, .L151+16
 2728 0078 2323     		movs	r3, #35
 2729 007a 3370     		strb	r3, [r6]
 746:Core/Src/mainLoop.c **** 
 747:Core/Src/mainLoop.c ****   HAL_UART_IRQHandler(&huart2);  // must add this, ornot uart2 dma not work
 2730              		.loc 1 747 3 is_stmt 1 view .LVU773
 2731 007c 214C     		ldr	r4, .L151+20
 2732 007e 2046     		mov	r0, r4
 2733 0080 FFF7FEFF 		bl	HAL_UART_IRQHandler
 2734              	.LVL294:
 748:Core/Src/mainLoop.c ****   HAL_UART_Transmit_DMA(&huart2, (uint8_t *)&logBufDma,
 2735              		.loc 1 748 3 view .LVU774
 2736 0084 0B22     		movs	r2, #11
 2737 0086 3146     		mov	r1, r6
 2738 0088 2046     		mov	r0, r4
 2739 008a FFF7FEFF 		bl	HAL_UART_Transmit_DMA
 2740              	.LVL295:
 749:Core/Src/mainLoop.c ****                         sizeof(struct log_para_t));
 750:Core/Src/mainLoop.c **** 
 751:Core/Src/mainLoop.c ****   HAL_Delay(1);
 2741              		.loc 1 751 3 view .LVU775
 2742 008e 0120     		movs	r0, #1
 2743 0090 FFF7FEFF 		bl	HAL_Delay
 2744              	.LVL296:
 752:Core/Src/mainLoop.c ****   adc1_ok = 0;
 2745              		.loc 1 752 3 view .LVU776
 2746              		.loc 1 752 11 is_stmt 0 view .LVU777
 2747 0094 0024     		movs	r4, #0
 2748 0096 1C4B     		ldr	r3, .L151+24
 2749 0098 1C60     		str	r4, [r3]
 753:Core/Src/mainLoop.c ****   adc2_ok = 0;
 2750              		.loc 1 753 3 is_stmt 1 view .LVU778
 2751              		.loc 1 753 11 is_stmt 0 view .LVU779
 2752 009a 1C4B     		ldr	r3, .L151+28
 2753 009c 1C60     		str	r4, [r3]
 754:Core/Src/mainLoop.c **** 
 755:Core/Src/mainLoop.c ****   HAL_ADC_Start_DMA(&hadc1, (uint32_t *)adc1_t1.buf, ADC_BUF_T_SIZE * 2);
 2754              		.loc 1 755 3 is_stmt 1 view .LVU780
 2755 009e C822     		movs	r2, #200
 2756 00a0 2946     		mov	r1, r5
 2757 00a2 1B48     		ldr	r0, .L151+32
 2758 00a4 FFF7FEFF 		bl	HAL_ADC_Start_DMA
 2759              	.LVL297:
 756:Core/Src/mainLoop.c ****   int32_t deltaDAC=0;
 2760              		.loc 1 756 3 view .LVU781
ARM GAS  /tmp/ccJOVKBd.s 			page 65


 757:Core/Src/mainLoop.c ****   while(0){
 2761              		.loc 1 757 3 view .LVU782
 2762              		.loc 1 757 8 is_stmt 0 view .LVU783
 2763 00a8 0AE0     		b	.L146
 2764              	.LVL298:
 2765              	.L150:
 758:Core/Src/mainLoop.c ****     value_dacP += deltaDAC;
 759:Core/Src/mainLoop.c ****     value_dacN -= deltaDAC;
 760:Core/Src/mainLoop.c ****     deltaDAC+=1;
 761:Core/Src/mainLoop.c **** 
 762:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACP_1, (value_dacP  >> 12)&0xffc, max_outdisable);
 763:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACP_1K, ((value_dacP>>0) & 0xfff), max_outdisable);
 764:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACN_1, (value_dacN  >> 12)&0xffc, max_outdisable);
 765:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACN_1K, ((value_dacN>>0) & 0xfff), max_outdisable);
 766:Core/Src/mainLoop.c **** 
 767:Core/Src/mainLoop.c **** 	max5307_w_chanel(DACP_1,  (((value_dacP) >> 20)&0xffc), max_outdisable);
 768:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1K, (((value_dacP) >> 10)&0xffc), max_outdisable);
 769:Core/Src/mainLoop.c **** 	max5307_w_chanel(DACP_1M, ((value_dacP)&0xfff)&0xfff, max_outdisable);
 770:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1,  (((value_dacN) >> 20)&0xffc), max_outdisable);
 771:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1K, (((value_dacN) >> 10)&0xffc), max_outdisable);
 772:Core/Src/mainLoop.c **** 	max5307_w_chanel(DACN_1M, ((value_dacN)&0xfff)&0xfff, max_outdisable);
 773:Core/Src/mainLoop.c **** 
 774:Core/Src/mainLoop.c **** 	do{
 775:Core/Src/mainLoop.c **** 		uint16_t chanelNo = 0;
 776:Core/Src/mainLoop.c **** 		chanelNo = 0x01<<(DACP_1+2)  | 
 777:Core/Src/mainLoop.c **** 							 0x01<<(DACP_1K+2) |
 778:Core/Src/mainLoop.c **** 							 0x01<<(DACP_1M+2) |
 779:Core/Src/mainLoop.c **** 							 0x01<<(DACN_1+2)  |
 780:Core/Src/mainLoop.c **** 							 0x01<<(DACN_1K+2) |
 781:Core/Src/mainLoop.c **** 							 0x01<<(DACN_1M+2) ; 
 782:Core/Src/mainLoop.c **** 		max5307_enable_ori_chanel(chanelNo);
 783:Core/Src/mainLoop.c **** 	}while(0);
 784:Core/Src/mainLoop.c ****  // HAL_Delay(1);
 785:Core/Src/mainLoop.c ****   }
 786:Core/Src/mainLoop.c ****   /* USER CODE END 2 */
 787:Core/Src/mainLoop.c **** 
 788:Core/Src/mainLoop.c ****   while (1) {
 789:Core/Src/mainLoop.c ****     if (adc1_t1.adc_cap_ok == ADCCAPOK) {
 790:Core/Src/mainLoop.c ****       // cal t1
 791:Core/Src/mainLoop.c ****       // HAL_ADC_Start_DMA(&hadc1,(uint32_t*)adc1_t2.buf ,ADC_BUF_T_SIZE*2);
 792:Core/Src/mainLoop.c ****       // cal_cp_output_dac(&adc1_t1, &value_dacP, &value_dacN);
 793:Core/Src/mainLoop.c ****       cal_cp_output_dac_ext_1(&adc1_t1, &value_dacP, &value_dacN, runTimes);
 2766              		.loc 1 793 7 is_stmt 1 view .LVU784
 2767 00aa 114D     		ldr	r5, .L151
 2768 00ac 2346     		mov	r3, r4
 2769 00ae 134A     		ldr	r2, .L151+12
 2770 00b0 1149     		ldr	r1, .L151+8
 2771 00b2 2846     		mov	r0, r5
 2772 00b4 FFF7FEFF 		bl	cal_cp_output_dac_ext_1
 2773              	.LVL299:
 794:Core/Src/mainLoop.c ****       adc1_t1.adc_cap_ok = CALOK;
 2774              		.loc 1 794 7 view .LVU785
 2775              		.loc 1 794 26 is_stmt 0 view .LVU786
 2776 00b8 4FF6FF73 		movw	r3, #65535
 2777 00bc 2B60     		str	r3, [r5]
 795:Core/Src/mainLoop.c ****       runTimes++;  // log run time runTimes+1 = 500us,
 2778              		.loc 1 795 7 is_stmt 1 view .LVU787
ARM GAS  /tmp/ccJOVKBd.s 			page 66


 2779              		.loc 1 795 15 is_stmt 0 view .LVU788
 2780 00be 0134     		adds	r4, r4, #1
 2781              	.LVL300:
 2782              	.L146:
 783:Core/Src/mainLoop.c ****  // HAL_Delay(1);
 2783              		.loc 1 783 8 is_stmt 1 view .LVU789
 757:Core/Src/mainLoop.c ****     value_dacP += deltaDAC;
 2784              		.loc 1 757 8 view .LVU790
 788:Core/Src/mainLoop.c ****     if (adc1_t1.adc_cap_ok == ADCCAPOK) {
 2785              		.loc 1 788 3 view .LVU791
 789:Core/Src/mainLoop.c ****       // cal t1
 2786              		.loc 1 789 5 view .LVU792
 789:Core/Src/mainLoop.c ****       // cal t1
 2787              		.loc 1 789 16 is_stmt 0 view .LVU793
 2788 00c0 0B4B     		ldr	r3, .L151
 2789 00c2 1A68     		ldr	r2, [r3]
 789:Core/Src/mainLoop.c ****       // cal t1
 2790              		.loc 1 789 8 view .LVU794
 2791 00c4 45F25553 		movw	r3, #21845
 2792 00c8 9A42     		cmp	r2, r3
 2793 00ca EED0     		beq	.L150
 796:Core/Src/mainLoop.c **** 
 797:Core/Src/mainLoop.c ****     } else if (adc1_t2.adc_cap_ok == ADCCAPOK) {
 2794              		.loc 1 797 12 is_stmt 1 view .LVU795
 2795              		.loc 1 797 23 is_stmt 0 view .LVU796
 2796 00cc 094B     		ldr	r3, .L151+4
 2797 00ce 1A68     		ldr	r2, [r3]
 2798              		.loc 1 797 15 view .LVU797
 2799 00d0 45F25553 		movw	r3, #21845
 2800 00d4 9A42     		cmp	r2, r3
 2801 00d6 F3D1     		bne	.L146
 798:Core/Src/mainLoop.c ****       // cal t2
 799:Core/Src/mainLoop.c ****       // HAL_ADC_Start_DMA(&hadc1,(uint32_t*)adc1_t1.buf ,ADC_BUF_T_SIZE*2);
 800:Core/Src/mainLoop.c ****       // cal_cp_output_dac(&adc1_t2, &value_dacP, &value_dacN);
 801:Core/Src/mainLoop.c ****       cal_cp_output_dac_ext_1(&adc1_t2, &value_dacP, &value_dacN, runTimes);
 2802              		.loc 1 801 7 is_stmt 1 view .LVU798
 2803 00d8 064D     		ldr	r5, .L151+4
 2804 00da 2346     		mov	r3, r4
 2805 00dc 074A     		ldr	r2, .L151+12
 2806 00de 0649     		ldr	r1, .L151+8
 2807 00e0 2846     		mov	r0, r5
 2808 00e2 FFF7FEFF 		bl	cal_cp_output_dac_ext_1
 2809              	.LVL301:
 802:Core/Src/mainLoop.c ****       adc1_t2.adc_cap_ok = CALOK;
 2810              		.loc 1 802 7 view .LVU799
 2811              		.loc 1 802 26 is_stmt 0 view .LVU800
 2812 00e6 4FF6FF73 		movw	r3, #65535
 2813 00ea 2B60     		str	r3, [r5]
 803:Core/Src/mainLoop.c ****       runTimes++;  // log run time runTimes+1 = 500us,
 2814              		.loc 1 803 7 is_stmt 1 view .LVU801
 2815              		.loc 1 803 15 is_stmt 0 view .LVU802
 2816 00ec 0134     		adds	r4, r4, #1
 2817              	.LVL302:
 2818              		.loc 1 803 15 view .LVU803
 2819 00ee E7E7     		b	.L146
 2820              	.L152:
 2821              		.align	2
ARM GAS  /tmp/ccJOVKBd.s 			page 67


 2822              	.L151:
 2823 00f0 00000000 		.word	adc1_t1
 2824 00f4 00000000 		.word	adc1_t2
 2825 00f8 00000000 		.word	.LANCHOR12
 2826 00fc 00000000 		.word	.LANCHOR13
 2827 0100 00000000 		.word	logBufDma
 2828 0104 00000000 		.word	huart2
 2829 0108 00000000 		.word	.LANCHOR14
 2830 010c 00000000 		.word	.LANCHOR15
 2831 0110 00000000 		.word	hadc1
 2832              		.cfi_endproc
 2833              	.LFE151:
 2835              		.section	.text.HAL_ADC_ConvCpltCallback,"ax",%progbits
 2836              		.align	1
 2837              		.global	HAL_ADC_ConvCpltCallback
 2838              		.syntax unified
 2839              		.thumb
 2840              		.thumb_func
 2841              		.fpu fpv4-sp-d16
 2843              	HAL_ADC_ConvCpltCallback:
 2844              	.LVL303:
 2845              	.LFB152:
 804:Core/Src/mainLoop.c ****     }
 805:Core/Src/mainLoop.c ****     // printf("hello stm32 detect vel\n");
 806:Core/Src/mainLoop.c ****     // HAL_Delay(100);
 807:Core/Src/mainLoop.c ****   }
 808:Core/Src/mainLoop.c **** }
 809:Core/Src/mainLoop.c **** 
 810:Core/Src/mainLoop.c **** void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef *hadc) {
 2846              		.loc 1 810 56 is_stmt 1 view -0
 2847              		.cfi_startproc
 2848              		@ args = 0, pretend = 0, frame = 0
 2849              		@ frame_needed = 0, uses_anonymous_args = 0
 2850              		.loc 1 810 56 is_stmt 0 view .LVU805
 2851 0000 10B5     		push	{r4, lr}
 2852              	.LCFI22:
 2853              		.cfi_def_cfa_offset 8
 2854              		.cfi_offset 4, -8
 2855              		.cfi_offset 14, -4
 2856 0002 0446     		mov	r4, r0
 811:Core/Src/mainLoop.c ****   // ËøôÈáåÊòØÂΩìADCËΩ¨Êç¢ÂÆåÊàêÊó∂ÊâßË°åÁöÑ‰ª£Á†Å
 812:Core/Src/mainLoop.c ****   // ÂèØ‰ª•ËÆæÁΩÆÊ†áÂøóÔºåÈÄöÁü•‰∏ªÁ®ãÂ∫èÈááÊ†∑Â∑≤ÁªèÂÆåÊàê
 813:Core/Src/mainLoop.c ****   if (hadc == &hadc2) {
 2857              		.loc 1 813 3 is_stmt 1 view .LVU806
 2858              		.loc 1 813 6 is_stmt 0 view .LVU807
 2859 0004 1C4B     		ldr	r3, .L163
 2860 0006 9842     		cmp	r0, r3
 2861 0008 03D0     		beq	.L159
 2862              	.LVL304:
 2863              	.L154:
 814:Core/Src/mainLoop.c ****     adc2_ok = 1;
 815:Core/Src/mainLoop.c ****     HAL_ADC_Start_DMA(&hadc2, (uint32_t *)value_adc2, ADC_TIMES_N);
 816:Core/Src/mainLoop.c ****   }
 817:Core/Src/mainLoop.c ****   if (hadc == &hadc1) {
 2864              		.loc 1 817 3 is_stmt 1 view .LVU808
 2865              		.loc 1 817 6 is_stmt 0 view .LVU809
 2866 000a 1C4B     		ldr	r3, .L163+4
ARM GAS  /tmp/ccJOVKBd.s 			page 68


 2867 000c 9C42     		cmp	r4, r3
 2868 000e 0AD0     		beq	.L160
 2869              	.LVL305:
 2870              	.L153:
 818:Core/Src/mainLoop.c ****     if (adc1_t1.adc_cap_ok == CALOK) {
 819:Core/Src/mainLoop.c ****       HAL_ADC_Start_DMA(&hadc1, (uint32_t *)adc1_t1.buf, ADC_BUF_T_SIZE * 2);
 820:Core/Src/mainLoop.c ****       adc1_t1.adc_cap_ok = ADCCAPOK;
 821:Core/Src/mainLoop.c ****     } else if (adc1_t2.adc_cap_ok == CALOK) {
 822:Core/Src/mainLoop.c ****       HAL_ADC_Start_DMA(&hadc1, (uint32_t *)adc1_t2.buf, ADC_BUF_T_SIZE * 2);
 823:Core/Src/mainLoop.c ****       adc1_t2.adc_cap_ok = ADCCAPOK;
 824:Core/Src/mainLoop.c ****     } else {
 825:Core/Src/mainLoop.c ****     }
 826:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 827:Core/Src/mainLoop.c ****   }
 828:Core/Src/mainLoop.c **** }
 2871              		.loc 1 828 1 view .LVU810
 2872 0010 10BD     		pop	{r4, pc}
 2873              	.LVL306:
 2874              	.L159:
 814:Core/Src/mainLoop.c ****     adc2_ok = 1;
 2875              		.loc 1 814 5 is_stmt 1 view .LVU811
 814:Core/Src/mainLoop.c ****     adc2_ok = 1;
 2876              		.loc 1 814 13 is_stmt 0 view .LVU812
 2877 0012 1B4B     		ldr	r3, .L163+8
 2878 0014 0122     		movs	r2, #1
 2879 0016 1A60     		str	r2, [r3]
 815:Core/Src/mainLoop.c ****   }
 2880              		.loc 1 815 5 is_stmt 1 view .LVU813
 2881 0018 4FF4FA52 		mov	r2, #8000
 2882 001c 1949     		ldr	r1, .L163+12
 2883 001e 1648     		ldr	r0, .L163
 2884              	.LVL307:
 815:Core/Src/mainLoop.c ****   }
 2885              		.loc 1 815 5 is_stmt 0 view .LVU814
 2886 0020 FFF7FEFF 		bl	HAL_ADC_Start_DMA
 2887              	.LVL308:
 2888 0024 F1E7     		b	.L154
 2889              	.L160:
 818:Core/Src/mainLoop.c ****     if (adc1_t1.adc_cap_ok == CALOK) {
 2890              		.loc 1 818 5 is_stmt 1 view .LVU815
 818:Core/Src/mainLoop.c ****     if (adc1_t1.adc_cap_ok == CALOK) {
 2891              		.loc 1 818 16 is_stmt 0 view .LVU816
 2892 0026 184B     		ldr	r3, .L163+16
 2893 0028 1A68     		ldr	r2, [r3]
 818:Core/Src/mainLoop.c ****     if (adc1_t1.adc_cap_ok == CALOK) {
 2894              		.loc 1 818 8 view .LVU817
 2895 002a 4FF6FF73 		movw	r3, #65535
 2896 002e 9A42     		cmp	r2, r3
 2897 0030 0BD0     		beq	.L161
 821:Core/Src/mainLoop.c ****       HAL_ADC_Start_DMA(&hadc1, (uint32_t *)adc1_t2.buf, ADC_BUF_T_SIZE * 2);
 2898              		.loc 1 821 12 is_stmt 1 view .LVU818
 821:Core/Src/mainLoop.c ****       HAL_ADC_Start_DMA(&hadc1, (uint32_t *)adc1_t2.buf, ADC_BUF_T_SIZE * 2);
 2899              		.loc 1 821 23 is_stmt 0 view .LVU819
 2900 0032 164B     		ldr	r3, .L163+20
 2901 0034 1A68     		ldr	r2, [r3]
 821:Core/Src/mainLoop.c ****       HAL_ADC_Start_DMA(&hadc1, (uint32_t *)adc1_t2.buf, ADC_BUF_T_SIZE * 2);
 2902              		.loc 1 821 15 view .LVU820
ARM GAS  /tmp/ccJOVKBd.s 			page 69


 2903 0036 4FF6FF73 		movw	r3, #65535
 2904 003a 9A42     		cmp	r2, r3
 2905 003c 10D0     		beq	.L162
 2906              	.LVL309:
 2907              	.L157:
 825:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 2908              		.loc 1 825 5 is_stmt 1 view .LVU821
 826:Core/Src/mainLoop.c ****   }
 2909              		.loc 1 826 5 view .LVU822
 2910 003e 4FF40061 		mov	r1, #2048
 2911 0042 1348     		ldr	r0, .L163+24
 2912 0044 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 2913              	.LVL310:
 2914              		.loc 1 828 1 is_stmt 0 view .LVU823
 2915 0048 E2E7     		b	.L153
 2916              	.LVL311:
 2917              	.L161:
 819:Core/Src/mainLoop.c ****       adc1_t1.adc_cap_ok = ADCCAPOK;
 2918              		.loc 1 819 7 is_stmt 1 view .LVU824
 2919 004a 124C     		ldr	r4, .L163+28
 2920              	.LVL312:
 819:Core/Src/mainLoop.c ****       adc1_t1.adc_cap_ok = ADCCAPOK;
 2921              		.loc 1 819 7 is_stmt 0 view .LVU825
 2922 004c C822     		movs	r2, #200
 2923 004e 2146     		mov	r1, r4
 2924 0050 0A48     		ldr	r0, .L163+4
 2925 0052 FFF7FEFF 		bl	HAL_ADC_Start_DMA
 2926              	.LVL313:
 820:Core/Src/mainLoop.c ****     } else if (adc1_t2.adc_cap_ok == CALOK) {
 2927              		.loc 1 820 7 is_stmt 1 view .LVU826
 820:Core/Src/mainLoop.c ****     } else if (adc1_t2.adc_cap_ok == CALOK) {
 2928              		.loc 1 820 26 is_stmt 0 view .LVU827
 2929 0056 45F25553 		movw	r3, #21845
 2930 005a 44F8043C 		str	r3, [r4, #-4]
 2931 005e EEE7     		b	.L157
 2932              	.LVL314:
 2933              	.L162:
 822:Core/Src/mainLoop.c ****       adc1_t2.adc_cap_ok = ADCCAPOK;
 2934              		.loc 1 822 7 is_stmt 1 view .LVU828
 2935 0060 0D4C     		ldr	r4, .L163+32
 2936              	.LVL315:
 822:Core/Src/mainLoop.c ****       adc1_t2.adc_cap_ok = ADCCAPOK;
 2937              		.loc 1 822 7 is_stmt 0 view .LVU829
 2938 0062 C822     		movs	r2, #200
 2939 0064 2146     		mov	r1, r4
 2940 0066 0548     		ldr	r0, .L163+4
 2941 0068 FFF7FEFF 		bl	HAL_ADC_Start_DMA
 2942              	.LVL316:
 823:Core/Src/mainLoop.c ****     } else {
 2943              		.loc 1 823 7 is_stmt 1 view .LVU830
 823:Core/Src/mainLoop.c ****     } else {
 2944              		.loc 1 823 26 is_stmt 0 view .LVU831
 2945 006c 45F25553 		movw	r3, #21845
 2946 0070 44F8043C 		str	r3, [r4, #-4]
 2947 0074 E3E7     		b	.L157
 2948              	.L164:
 2949 0076 00BF     		.align	2
ARM GAS  /tmp/ccJOVKBd.s 			page 70


 2950              	.L163:
 2951 0078 00000000 		.word	hadc2
 2952 007c 00000000 		.word	hadc1
 2953 0080 00000000 		.word	.LANCHOR15
 2954 0084 00000000 		.word	value_adc2
 2955 0088 00000000 		.word	adc1_t1
 2956 008c 00000000 		.word	adc1_t2
 2957 0090 00080240 		.word	1073874944
 2958 0094 04000000 		.word	adc1_t1+4
 2959 0098 04000000 		.word	adc1_t2+4
 2960              		.cfi_endproc
 2961              	.LFE152:
 2963              		.section	.text.HAL_UART_TxCpltCallback,"ax",%progbits
 2964              		.align	1
 2965              		.global	HAL_UART_TxCpltCallback
 2966              		.syntax unified
 2967              		.thumb
 2968              		.thumb_func
 2969              		.fpu fpv4-sp-d16
 2971              	HAL_UART_TxCpltCallback:
 2972              	.LVL317:
 2973              	.LFB153:
 829:Core/Src/mainLoop.c **** 
 830:Core/Src/mainLoop.c **** // void HAL_UART_TxHalfCpltCallback(UART_HandleTypeDef *huart){
 831:Core/Src/mainLoop.c **** void HAL_UART_TxCpltCallback(UART_HandleTypeDef *huart) {
 2974              		.loc 1 831 57 is_stmt 1 view -0
 2975              		.cfi_startproc
 2976              		@ args = 0, pretend = 0, frame = 0
 2977              		@ frame_needed = 0, uses_anonymous_args = 0
 2978              		.loc 1 831 57 is_stmt 0 view .LVU833
 2979 0000 08B5     		push	{r3, lr}
 2980              	.LCFI23:
 2981              		.cfi_def_cfa_offset 8
 2982              		.cfi_offset 3, -8
 2983              		.cfi_offset 14, -4
 832:Core/Src/mainLoop.c ****   if (huart == &huart2) {
 2984              		.loc 1 832 3 is_stmt 1 view .LVU834
 2985              		.loc 1 832 6 is_stmt 0 view .LVU835
 2986 0002 0B4B     		ldr	r3, .L169
 2987 0004 8342     		cmp	r3, r0
 2988 0006 00D0     		beq	.L168
 2989              	.LVL318:
 2990              	.L165:
 833:Core/Src/mainLoop.c ****     // uint16_t *padcv = (uint16_t *)(&logBufDma[1]);
 834:Core/Src/mainLoop.c ****     // uint32_t *pdacp = (uint32_t *)(&logBufDma[3]);
 835:Core/Src/mainLoop.c ****     // uint32_t *pdacn = (uint32_t *)(&logBufDma[7]);
 836:Core/Src/mainLoop.c ****     logBufDma.mean_adc_val = logPara.mean_adc_val;
 837:Core/Src/mainLoop.c ****     logBufDma.dac_val_p = logPara.dac_val_p;
 838:Core/Src/mainLoop.c ****     logBufDma.dac_val_n = logPara.dac_val_n;
 839:Core/Src/mainLoop.c **** 
 840:Core/Src/mainLoop.c ****     HAL_UART_Transmit_DMA(&huart2, (uint8_t *)&logBufDma,
 841:Core/Src/mainLoop.c ****                           sizeof(struct log_para_t));
 842:Core/Src/mainLoop.c ****   }
 843:Core/Src/mainLoop.c **** }...
 2991              		.loc 1 843 1 view .LVU836
 2992 0008 08BD     		pop	{r3, pc}
 2993              	.LVL319:
ARM GAS  /tmp/ccJOVKBd.s 			page 71


 2994              	.L168:
 836:Core/Src/mainLoop.c ****     logBufDma.mean_adc_val = logPara.mean_adc_val;
 2995              		.loc 1 836 5 is_stmt 1 view .LVU837
 836:Core/Src/mainLoop.c ****     logBufDma.mean_adc_val = logPara.mean_adc_val;
 2996              		.loc 1 836 37 is_stmt 0 view .LVU838
 2997 000a 0A4B     		ldr	r3, .L169+4
 2998 000c B3F80120 		ldrh	r2, [r3, #1]	@ unaligned
 836:Core/Src/mainLoop.c ****     logBufDma.mean_adc_val = logPara.mean_adc_val;
 2999              		.loc 1 836 28 view .LVU839
 3000 0010 0949     		ldr	r1, .L169+8
 3001 0012 A1F80120 		strh	r2, [r1, #1]	@ unaligned
 837:Core/Src/mainLoop.c ****     logBufDma.dac_val_p = logPara.dac_val_p;
 3002              		.loc 1 837 5 is_stmt 1 view .LVU840
 837:Core/Src/mainLoop.c ****     logBufDma.dac_val_p = logPara.dac_val_p;
 3003              		.loc 1 837 34 is_stmt 0 view .LVU841
 3004 0016 D3F80320 		ldr	r2, [r3, #3]	@ unaligned
 837:Core/Src/mainLoop.c ****     logBufDma.dac_val_p = logPara.dac_val_p;
 3005              		.loc 1 837 25 view .LVU842
 3006 001a C1F80320 		str	r2, [r1, #3]	@ unaligned
 838:Core/Src/mainLoop.c ****     logBufDma.dac_val_n = logPara.dac_val_n;
 3007              		.loc 1 838 5 is_stmt 1 view .LVU843
 838:Core/Src/mainLoop.c ****     logBufDma.dac_val_n = logPara.dac_val_n;
 3008              		.loc 1 838 34 is_stmt 0 view .LVU844
 3009 001e D3F80730 		ldr	r3, [r3, #7]	@ unaligned
 838:Core/Src/mainLoop.c ****     logBufDma.dac_val_n = logPara.dac_val_n;
 3010              		.loc 1 838 25 view .LVU845
 3011 0022 C1F80730 		str	r3, [r1, #7]	@ unaligned
 840:Core/Src/mainLoop.c ****     HAL_UART_Transmit_DMA(&huart2, (uint8_t *)&logBufDma,
 3012              		.loc 1 840 5 is_stmt 1 view .LVU846
 3013 0026 0B22     		movs	r2, #11
 3014 0028 0148     		ldr	r0, .L169
 3015              	.LVL320:
 840:Core/Src/mainLoop.c ****     HAL_UART_Transmit_DMA(&huart2, (uint8_t *)&logBufDma,
 3016              		.loc 1 840 5 is_stmt 0 view .LVU847
 3017 002a FFF7FEFF 		bl	HAL_UART_Transmit_DMA
 3018              	.LVL321:
 3019              		.loc 1 843 1 view .LVU848
 3020 002e EBE7     		b	.L165
 3021              	.L170:
 3022              		.align	2
 3023              	.L169:
 3024 0030 00000000 		.word	huart2
 3025 0034 00000000 		.word	logPara
 3026 0038 00000000 		.word	logBufDma
 3027              		.cfi_endproc
 3028              	.LFE153:
 3030              		.comm	lastAdcVal,4,4
 3031              		.comm	adcVal,4,4
 3032              		.global	locked
 3033              		.global	ad9520_reg
 3034              		.comm	logBufDma,11,4
 3035              		.comm	adc1_t2,412,4
 3036              		.comm	adc1_t1,412,4
 3037              		.global	mainCpLast
 3038              		.global	mainCp
 3039              		.global	value_dacN
 3040              		.global	value_dacP
ARM GAS  /tmp/ccJOVKBd.s 			page 72


 3041              		.global	adc2_ok
 3042              		.global	adc1_ok
 3043              		.global	forSaveAllSum
 3044              		.global	difVal_view
 3045              		.global	meanVal_view
 3046              		.comm	logPara,11,4
 3047              		.comm	valMeanArray,80,4
 3048              		.global	dletDac
 3049              		.global	pidD
 3050              		.global	pidI
 3051              		.global	pidP
 3052              		.comm	adcSumArray,8,4
 3053              		.comm	value_cp,32000,4
 3054              		.comm	value_adc2,16000,4
 3055              		.comm	value_adc1,16000,4
 3056              		.global	Wave_LUT
 3057              		.comm	tmp,8,8
 3058              		.comm	dacV,4,4
 3059              		.comm	v_dianya,4,4
 3060              		.comm	buf,4,4
 3061              		.comm	yy_cnt,4,4
 3062              		.comm	xx_cnt,4,4
 3063              		.comm	complete_sign,4,4
 3064              		.comm	yy,4,4
 3065              		.comm	xx,4,4
 3066              		.global	fre_dif
 3067              		.global	f
 3068              		.global	i
 3069              		.global	chanl2_midx
 3070              		.global	chanl1_midx
 3071              		.global	average_xNum2
 3072              		.global	average_xNum1
 3073              		.global	chanl2_completed
 3074              		.global	chanl1_completed
 3075              		.comm	chanl2_capNum_f,400,4
 3076              		.comm	chanl1_capNum_f,400,4
 3077              		.comm	chanl2_xNum,400,4
 3078              		.comm	chanl1_xNum,400,4
 3079              		.comm	chanl2_capNum,400,4
 3080              		.comm	chanl1_capNum,400,4
 3081              		.section	.bss.ad9520_reg,"aw",%nobits
 3082              		.align	1
 3085              	ad9520_reg:
 3086 0000 0000     		.space	2
 3087              		.section	.bss.adc1_ok,"aw",%nobits
 3088              		.align	2
 3089              		.set	.LANCHOR14,. + 0
 3092              	adc1_ok:
 3093 0000 00000000 		.space	4
 3094              		.section	.bss.adc2_ok,"aw",%nobits
 3095              		.align	2
 3096              		.set	.LANCHOR15,. + 0
 3099              	adc2_ok:
 3100 0000 00000000 		.space	4
 3101              		.section	.bss.average_xNum1,"aw",%nobits
 3102              		.align	2
 3105              	average_xNum1:
ARM GAS  /tmp/ccJOVKBd.s 			page 73


 3106 0000 00000000 		.space	4
 3107              		.section	.bss.average_xNum2,"aw",%nobits
 3108              		.align	2
 3111              	average_xNum2:
 3112 0000 00000000 		.space	4
 3113              		.section	.bss.chanl1_completed,"aw",%nobits
 3114              		.align	2
 3117              	chanl1_completed:
 3118 0000 00000000 		.space	4
 3119              		.section	.bss.chanl1_midx,"aw",%nobits
 3120              		.align	2
 3121              		.set	.LANCHOR2,. + 0
 3124              	chanl1_midx:
 3125 0000 00000000 		.space	4
 3126              		.section	.bss.chanl2_completed,"aw",%nobits
 3127              		.align	2
 3130              	chanl2_completed:
 3131 0000 00000000 		.space	4
 3132              		.section	.bss.chanl2_midx,"aw",%nobits
 3133              		.align	2
 3134              		.set	.LANCHOR3,. + 0
 3137              	chanl2_midx:
 3138 0000 00000000 		.space	4
 3139              		.section	.bss.currentP.10306,"aw",%nobits
 3140              		.align	2
 3141              		.set	.LANCHOR8,. + 0
 3144              	currentP.10306:
 3145 0000 00000000 		.space	4
 3146              		.section	.bss.difVal_view,"aw",%nobits
 3147              		.align	2
 3148              		.set	.LANCHOR10,. + 0
 3151              	difVal_view:
 3152 0000 00000000 		.space	4
 3153              		.section	.bss.dletDac,"aw",%nobits
 3154              		.align	3
 3155              		.set	.LANCHOR7,. + 0
 3158              	dletDac:
 3159 0000 00000000 		.space	8
 3159      00000000 
 3160              		.section	.bss.fre_dif,"aw",%nobits
 3161              		.align	2
 3162              		.set	.LANCHOR0,. + 0
 3165              	fre_dif:
 3166 0000 00000000 		.space	4
 3167              		.section	.bss.i,"aw",%nobits
 3168              		.align	2
 3169              		.set	.LANCHOR1,. + 0
 3172              	i:
 3173 0000 00000000 		.space	4
 3174              		.section	.bss.locked,"aw",%nobits
 3175              		.align	2
 3178              	locked:
 3179 0000 00000000 		.space	4
 3180              		.section	.bss.mainCp,"aw",%nobits
 3181              		.align	2
 3184              	mainCp:
 3185 0000 00000000 		.space	4
ARM GAS  /tmp/ccJOVKBd.s 			page 74


 3186              		.section	.bss.mainCpLast,"aw",%nobits
 3187              		.align	2
 3190              	mainCpLast:
 3191 0000 00000000 		.space	4
 3192              		.section	.bss.meanVal_view,"aw",%nobits
 3193              		.align	2
 3194              		.set	.LANCHOR9,. + 0
 3197              	meanVal_view:
 3198 0000 00000000 		.space	4
 3199              		.section	.bss.pidD,"aw",%nobits
 3200              		.align	2
 3201              		.set	.LANCHOR6,. + 0
 3204              	pidD:
 3205 0000 00000000 		.space	4
 3206              		.section	.bss.pidI,"aw",%nobits
 3207              		.align	2
 3208              		.set	.LANCHOR5,. + 0
 3211              	pidI:
 3212 0000 00000000 		.space	4
 3213              		.section	.bss.pidP,"aw",%nobits
 3214              		.align	2
 3215              		.set	.LANCHOR4,. + 0
 3218              	pidP:
 3219 0000 00000000 		.space	4
 3220              		.section	.data.Wave_LUT,"aw"
 3221              		.align	2
 3224              	Wave_LUT:
 3225 0000 00080000 		.word	2048
 3226 0004 65080000 		.word	2149
 3227 0008 CA080000 		.word	2250
 3228 000c 2E090000 		.word	2350
 3229 0010 92090000 		.word	2450
 3230 0014 F5090000 		.word	2549
 3231 0018 560A0000 		.word	2646
 3232 001c B60A0000 		.word	2742
 3233 0020 150B0000 		.word	2837
 3234 0024 710B0000 		.word	2929
 3235 0028 CC0B0000 		.word	3020
 3236 002c 240C0000 		.word	3108
 3237 0030 790C0000 		.word	3193
 3238 0034 CB0C0000 		.word	3275
 3239 0038 1B0D0000 		.word	3355
 3240 003c 670D0000 		.word	3431
 3241 0040 B00D0000 		.word	3504
 3242 0044 F60D0000 		.word	3574
 3243 0048 370E0000 		.word	3639
 3244 004c 750E0000 		.word	3701
 3245 0050 AF0E0000 		.word	3759
 3246 0054 E40E0000 		.word	3812
 3247 0058 150F0000 		.word	3861
 3248 005c 420F0000 		.word	3906
 3249 0060 6A0F0000 		.word	3946
 3250 0064 8E0F0000 		.word	3982
 3251 0068 AD0F0000 		.word	4013
 3252 006c C70F0000 		.word	4039
 3253 0070 DC0F0000 		.word	4060
 3254 0074 EC0F0000 		.word	4076
ARM GAS  /tmp/ccJOVKBd.s 			page 75


 3255 0078 F70F0000 		.word	4087
 3256 007c FE0F0000 		.word	4094
 3257 0080 FF0F0000 		.word	4095
 3258 0084 FB0F0000 		.word	4091
 3259 0088 F20F0000 		.word	4082
 3260 008c E50F0000 		.word	4069
 3261 0090 D20F0000 		.word	4050
 3262 0094 BA0F0000 		.word	4026
 3263 0098 9E0F0000 		.word	3998
 3264 009c 7D0F0000 		.word	3965
 3265 00a0 570F0000 		.word	3927
 3266 00a4 2C0F0000 		.word	3884
 3267 00a8 FD0E0000 		.word	3837
 3268 00ac CA0E0000 		.word	3786
 3269 00b0 920E0000 		.word	3730
 3270 00b4 570E0000 		.word	3671
 3271 00b8 170E0000 		.word	3607
 3272 00bc D30D0000 		.word	3539
 3273 00c0 8C0D0000 		.word	3468
 3274 00c4 420D0000 		.word	3394
 3275 00c8 F40C0000 		.word	3316
 3276 00cc A30C0000 		.word	3235
 3277 00d0 4F0C0000 		.word	3151
 3278 00d4 F80B0000 		.word	3064
 3279 00d8 9F0B0000 		.word	2975
 3280 00dc 430B0000 		.word	2883
 3281 00e0 E60A0000 		.word	2790
 3282 00e4 870A0000 		.word	2695
 3283 00e8 260A0000 		.word	2598
 3284 00ec C4090000 		.word	2500
 3285 00f0 60090000 		.word	2400
 3286 00f4 FC080000 		.word	2300
 3287 00f8 97080000 		.word	2199
 3288 00fc 32080000 		.word	2098
 3289 0100 CD070000 		.word	1997
 3290 0104 68070000 		.word	1896
 3291 0108 03070000 		.word	1795
 3292 010c 9F060000 		.word	1695
 3293 0110 3B060000 		.word	1595
 3294 0114 D9050000 		.word	1497
 3295 0118 78050000 		.word	1400
 3296 011c 19050000 		.word	1305
 3297 0120 BC040000 		.word	1212
 3298 0124 60040000 		.word	1120
 3299 0128 07040000 		.word	1031
 3300 012c B0030000 		.word	944
 3301 0130 5C030000 		.word	860
 3302 0134 0B030000 		.word	779
 3303 0138 BD020000 		.word	701
 3304 013c 73020000 		.word	627
 3305 0140 2C020000 		.word	556
 3306 0144 E8010000 		.word	488
 3307 0148 A8010000 		.word	424
 3308 014c 6D010000 		.word	365
 3309 0150 35010000 		.word	309
 3310 0154 02010000 		.word	258
 3311 0158 D3000000 		.word	211
ARM GAS  /tmp/ccJOVKBd.s 			page 76


 3312 015c A8000000 		.word	168
 3313 0160 82000000 		.word	130
 3314 0164 61000000 		.word	97
 3315 0168 45000000 		.word	69
 3316 016c 2D000000 		.word	45
 3317 0170 1A000000 		.word	26
 3318 0174 0D000000 		.word	13
 3319 0178 04000000 		.word	4
 3320 017c 00000000 		.word	0
 3321 0180 01000000 		.word	1
 3322 0184 08000000 		.word	8
 3323 0188 13000000 		.word	19
 3324 018c 23000000 		.word	35
 3325 0190 38000000 		.word	56
 3326 0194 52000000 		.word	82
 3327 0198 71000000 		.word	113
 3328 019c 95000000 		.word	149
 3329 01a0 BD000000 		.word	189
 3330 01a4 EA000000 		.word	234
 3331 01a8 1B010000 		.word	283
 3332 01ac 50010000 		.word	336
 3333 01b0 8A010000 		.word	394
 3334 01b4 C8010000 		.word	456
 3335 01b8 09020000 		.word	521
 3336 01bc 4F020000 		.word	591
 3337 01c0 98020000 		.word	664
 3338 01c4 E4020000 		.word	740
 3339 01c8 34030000 		.word	820
 3340 01cc 86030000 		.word	902
 3341 01d0 DB030000 		.word	987
 3342 01d4 33040000 		.word	1075
 3343 01d8 8E040000 		.word	1166
 3344 01dc EA040000 		.word	1258
 3345 01e0 49050000 		.word	1353
 3346 01e4 A9050000 		.word	1449
 3347 01e8 0A060000 		.word	1546
 3348 01ec 6D060000 		.word	1645
 3349 01f0 D1060000 		.word	1745
 3350 01f4 35070000 		.word	1845
 3351 01f8 9A070000 		.word	1946
 3352 01fc FF070000 		.word	2047
 3353              		.section	.data.f,"aw"
 3354              		.align	2
 3357              	f:
 3358 0000 C3F54840 		.word	1078523331
 3359              		.section	.data.forSaveAllSum,"aw"
 3360              		.align	1
 3361              		.set	.LANCHOR11,. + 0
 3364              	forSaveAllSum:
 3365 0000 DC05     		.short	1500
 3366              		.section	.data.value_dacN,"aw"
 3367              		.align	2
 3368              		.set	.LANCHOR13,. + 0
 3371              	value_dacN:
 3372 0000 00020208 		.word	134349312
 3373              		.section	.data.value_dacP,"aw"
 3374              		.align	2
ARM GAS  /tmp/ccJOVKBd.s 			page 77


 3375              		.set	.LANCHOR12,. + 0
 3378              	value_dacP:
 3379 0000 00020208 		.word	134349312
 3380              		.text
 3381              	.Letext0:
 3382              		.file 2 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/inc
 3383              		.file 3 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/inc
 3384              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 3385              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 3386              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 3387              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 3388              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 3389              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 3390              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 3391              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 3392              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dac.h"
 3393              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 3394              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 3395              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 3396              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 3397              		.file 17 "Core/Inc/mainLoop.h"
 3398              		.file 18 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/lib/gcc/arm-none
 3399              		.file 19 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/in
 3400              		.file 20 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/in
 3401              		.file 21 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/in
 3402              		.file 22 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/in
 3403              		.file 23 "Core/Inc/max5307.h"
 3404              		.file 24 "<built-in>"
 3405              		.file 25 "Core/Inc/ad9520_function.h"
 3406              		.file 26 "Core/Inc/main.h"
ARM GAS  /tmp/ccJOVKBd.s 			page 78


DEFINED SYMBOLS
                            *ABS*:0000000000000000 mainLoop.c
     /tmp/ccJOVKBd.s:18     .text._write:0000000000000000 $t
     /tmp/ccJOVKBd.s:26     .text._write:0000000000000000 _write
     /tmp/ccJOVKBd.s:60     .text._write:0000000000000014 $d
     /tmp/ccJOVKBd.s:65     .text.transform_capNum_to_xNum:0000000000000000 $t
     /tmp/ccJOVKBd.s:72     .text.transform_capNum_to_xNum:0000000000000000 transform_capNum_to_xNum
     /tmp/ccJOVKBd.s:133    .text.cal_average_xNum:0000000000000000 $t
     /tmp/ccJOVKBd.s:140    .text.cal_average_xNum:0000000000000000 cal_average_xNum
     /tmp/ccJOVKBd.s:209    .text.enable_tim4_capture_Iterrupt:0000000000000000 $t
     /tmp/ccJOVKBd.s:216    .text.enable_tim4_capture_Iterrupt:0000000000000000 enable_tim4_capture_Iterrupt
     /tmp/ccJOVKBd.s:244    .text.enable_tim4_capture_Iterrupt:0000000000000018 $d
     /tmp/ccJOVKBd.s:254    .text.generateSinWave:0000000000000000 $t
     /tmp/ccJOVKBd.s:261    .text.generateSinWave:0000000000000000 generateSinWave
     /tmp/ccJOVKBd.s:307    .text.generateSinWave:0000000000000038 $d
                            *COM*:0000000000000008 tmp
     /tmp/ccJOVKBd.s:318    .text.mainLoop:0000000000000000 $t
     /tmp/ccJOVKBd.s:325    .text.mainLoop:0000000000000000 mainLoop
     /tmp/ccJOVKBd.s:561    .text.mainLoop:0000000000000150 $d
                            *COM*:0000000000000004 complete_sign
                            *COM*:0000000000000004 xx
                            *COM*:0000000000000004 yy
                            *COM*:0000000000000004 xx_cnt
                            *COM*:0000000000000004 yy_cnt
                            *COM*:0000000000000004 v_dianya
                            *COM*:0000000000000004 buf
                            *COM*:0000000000000190 chanl1_capNum
                            *COM*:0000000000000190 chanl2_capNum
     /tmp/ccJOVKBd.s:585    .text.HAL_TIM_IC_CaptureCallback:0000000000000000 $t
     /tmp/ccJOVKBd.s:592    .text.HAL_TIM_IC_CaptureCallback:0000000000000000 HAL_TIM_IC_CaptureCallback
     /tmp/ccJOVKBd.s:663    .text.HAL_TIM_IC_CaptureCallback:0000000000000044 $d
     /tmp/ccJOVKBd.s:673    .text.HAL_TIM_PeriodElapsedCallback:0000000000000000 $t
     /tmp/ccJOVKBd.s:680    .text.HAL_TIM_PeriodElapsedCallback:0000000000000000 HAL_TIM_PeriodElapsedCallback
     /tmp/ccJOVKBd.s:741    .text.HAL_TIM_PeriodElapsedCallback:0000000000000034 $d
     /tmp/ccJOVKBd.s:755    .text.HAL_UART_RxCpltCallback:0000000000000000 $t
     /tmp/ccJOVKBd.s:762    .text.HAL_UART_RxCpltCallback:0000000000000000 HAL_UART_RxCpltCallback
     /tmp/ccJOVKBd.s:974    .text.HAL_UART_RxCpltCallback:0000000000000130 $d
     /tmp/ccJOVKBd.s:989    .text.set_dac_initVal:0000000000000000 $t
     /tmp/ccJOVKBd.s:996    .text.set_dac_initVal:0000000000000000 set_dac_initVal
     /tmp/ccJOVKBd.s:1070   .text.cal_k_value_cp:0000000000000000 $t
     /tmp/ccJOVKBd.s:1077   .text.cal_k_value_cp:0000000000000000 cal_k_value_cp
     /tmp/ccJOVKBd.s:1193   .text.cal_k_value_cp:000000000000005c $d
                            *COM*:0000000000007d00 value_cp
     /tmp/ccJOVKBd.s:1198   .text.cal_value_cp:0000000000000000 $t
     /tmp/ccJOVKBd.s:1205   .text.cal_value_cp:0000000000000000 cal_value_cp
     /tmp/ccJOVKBd.s:1260   .text.cal_value_cp:000000000000002c $d
                            *COM*:0000000000003e80 value_adc1
     /tmp/ccJOVKBd.s:1267   .text.cal_cp_output_dac:0000000000000000 $t
     /tmp/ccJOVKBd.s:1274   .text.cal_cp_output_dac:0000000000000000 cal_cp_output_dac
     /tmp/ccJOVKBd.s:1570   .text.cal_cp_output_dac:0000000000000168 $d
                            *COM*:0000000000000008 adcSumArray
     /tmp/ccJOVKBd.s:1586   .text.insertMeanVal:0000000000000000 $t
     /tmp/ccJOVKBd.s:1593   .text.insertMeanVal:0000000000000000 insertMeanVal
     /tmp/ccJOVKBd.s:1712   .text.insertMeanVal:000000000000006c $d
                            *COM*:0000000000000050 valMeanArray
     /tmp/ccJOVKBd.s:1719   .text.cal_cp_output_dac_ext:0000000000000000 $t
     /tmp/ccJOVKBd.s:1726   .text.cal_cp_output_dac_ext:0000000000000000 cal_cp_output_dac_ext
ARM GAS  /tmp/ccJOVKBd.s 			page 79


     /tmp/ccJOVKBd.s:2067   .text.cal_cp_output_dac_ext:00000000000001a0 $d
                            *COM*:000000000000000b logPara
     /tmp/ccJOVKBd.s:2086   .text.cal_cp_output_dac_ext_1:0000000000000000 $t
     /tmp/ccJOVKBd.s:2093   .text.cal_cp_output_dac_ext_1:0000000000000000 cal_cp_output_dac_ext_1
     /tmp/ccJOVKBd.s:2459   .text.cal_cp_output_dac_ext_1:00000000000001c0 $d
     /tmp/ccJOVKBd.s:2478   .text.fakeDelay:0000000000000000 $t
     /tmp/ccJOVKBd.s:2485   .text.fakeDelay:0000000000000000 fakeDelay
     /tmp/ccJOVKBd.s:2537   .text.preMainLoop1:0000000000000000 $t
     /tmp/ccJOVKBd.s:2544   .text.preMainLoop1:0000000000000000 preMainLoop1
     /tmp/ccJOVKBd.s:2621   .text.preMainLoop1:0000000000000044 $d
     /tmp/ccJOVKBd.s:2627   .text.mainLoop1:0000000000000000 $t
     /tmp/ccJOVKBd.s:2634   .text.mainLoop1:0000000000000000 mainLoop1
     /tmp/ccJOVKBd.s:2823   .text.mainLoop1:00000000000000f0 $d
                            *COM*:000000000000019c adc1_t1
                            *COM*:000000000000019c adc1_t2
                            *COM*:000000000000000b logBufDma
     /tmp/ccJOVKBd.s:2836   .text.HAL_ADC_ConvCpltCallback:0000000000000000 $t
     /tmp/ccJOVKBd.s:2843   .text.HAL_ADC_ConvCpltCallback:0000000000000000 HAL_ADC_ConvCpltCallback
     /tmp/ccJOVKBd.s:2951   .text.HAL_ADC_ConvCpltCallback:0000000000000078 $d
                            *COM*:0000000000003e80 value_adc2
     /tmp/ccJOVKBd.s:2964   .text.HAL_UART_TxCpltCallback:0000000000000000 $t
     /tmp/ccJOVKBd.s:2971   .text.HAL_UART_TxCpltCallback:0000000000000000 HAL_UART_TxCpltCallback
     /tmp/ccJOVKBd.s:3024   .text.HAL_UART_TxCpltCallback:0000000000000030 $d
                            *COM*:0000000000000004 lastAdcVal
                            *COM*:0000000000000004 adcVal
     /tmp/ccJOVKBd.s:3178   .bss.locked:0000000000000000 locked
     /tmp/ccJOVKBd.s:3085   .bss.ad9520_reg:0000000000000000 ad9520_reg
     /tmp/ccJOVKBd.s:3190   .bss.mainCpLast:0000000000000000 mainCpLast
     /tmp/ccJOVKBd.s:3184   .bss.mainCp:0000000000000000 mainCp
     /tmp/ccJOVKBd.s:3371   .data.value_dacN:0000000000000000 value_dacN
     /tmp/ccJOVKBd.s:3378   .data.value_dacP:0000000000000000 value_dacP
     /tmp/ccJOVKBd.s:3099   .bss.adc2_ok:0000000000000000 adc2_ok
     /tmp/ccJOVKBd.s:3092   .bss.adc1_ok:0000000000000000 adc1_ok
     /tmp/ccJOVKBd.s:3364   .data.forSaveAllSum:0000000000000000 forSaveAllSum
     /tmp/ccJOVKBd.s:3151   .bss.difVal_view:0000000000000000 difVal_view
     /tmp/ccJOVKBd.s:3197   .bss.meanVal_view:0000000000000000 meanVal_view
     /tmp/ccJOVKBd.s:3158   .bss.dletDac:0000000000000000 dletDac
     /tmp/ccJOVKBd.s:3204   .bss.pidD:0000000000000000 pidD
     /tmp/ccJOVKBd.s:3211   .bss.pidI:0000000000000000 pidI
     /tmp/ccJOVKBd.s:3218   .bss.pidP:0000000000000000 pidP
     /tmp/ccJOVKBd.s:3224   .data.Wave_LUT:0000000000000000 Wave_LUT
                            *COM*:0000000000000004 dacV
     /tmp/ccJOVKBd.s:3165   .bss.fre_dif:0000000000000000 fre_dif
     /tmp/ccJOVKBd.s:3357   .data.f:0000000000000000 f
     /tmp/ccJOVKBd.s:3172   .bss.i:0000000000000000 i
     /tmp/ccJOVKBd.s:3137   .bss.chanl2_midx:0000000000000000 chanl2_midx
     /tmp/ccJOVKBd.s:3124   .bss.chanl1_midx:0000000000000000 chanl1_midx
     /tmp/ccJOVKBd.s:3111   .bss.average_xNum2:0000000000000000 average_xNum2
     /tmp/ccJOVKBd.s:3105   .bss.average_xNum1:0000000000000000 average_xNum1
     /tmp/ccJOVKBd.s:3130   .bss.chanl2_completed:0000000000000000 chanl2_completed
     /tmp/ccJOVKBd.s:3117   .bss.chanl1_completed:0000000000000000 chanl1_completed
                            *COM*:0000000000000190 chanl2_capNum_f
                            *COM*:0000000000000190 chanl1_capNum_f
                            *COM*:0000000000000190 chanl2_xNum
                            *COM*:0000000000000190 chanl1_xNum
     /tmp/ccJOVKBd.s:3082   .bss.ad9520_reg:0000000000000000 $d
     /tmp/ccJOVKBd.s:3088   .bss.adc1_ok:0000000000000000 $d
ARM GAS  /tmp/ccJOVKBd.s 			page 80


     /tmp/ccJOVKBd.s:3095   .bss.adc2_ok:0000000000000000 $d
     /tmp/ccJOVKBd.s:3102   .bss.average_xNum1:0000000000000000 $d
     /tmp/ccJOVKBd.s:3108   .bss.average_xNum2:0000000000000000 $d
     /tmp/ccJOVKBd.s:3114   .bss.chanl1_completed:0000000000000000 $d
     /tmp/ccJOVKBd.s:3120   .bss.chanl1_midx:0000000000000000 $d
     /tmp/ccJOVKBd.s:3127   .bss.chanl2_completed:0000000000000000 $d
     /tmp/ccJOVKBd.s:3133   .bss.chanl2_midx:0000000000000000 $d
     /tmp/ccJOVKBd.s:3140   .bss.currentP.10306:0000000000000000 $d
     /tmp/ccJOVKBd.s:3144   .bss.currentP.10306:0000000000000000 currentP.10306
     /tmp/ccJOVKBd.s:3147   .bss.difVal_view:0000000000000000 $d
     /tmp/ccJOVKBd.s:3154   .bss.dletDac:0000000000000000 $d
     /tmp/ccJOVKBd.s:3161   .bss.fre_dif:0000000000000000 $d
     /tmp/ccJOVKBd.s:3168   .bss.i:0000000000000000 $d
     /tmp/ccJOVKBd.s:3175   .bss.locked:0000000000000000 $d
     /tmp/ccJOVKBd.s:3181   .bss.mainCp:0000000000000000 $d
     /tmp/ccJOVKBd.s:3187   .bss.mainCpLast:0000000000000000 $d
     /tmp/ccJOVKBd.s:3193   .bss.meanVal_view:0000000000000000 $d
     /tmp/ccJOVKBd.s:3200   .bss.pidD:0000000000000000 $d
     /tmp/ccJOVKBd.s:3207   .bss.pidI:0000000000000000 $d
     /tmp/ccJOVKBd.s:3214   .bss.pidP:0000000000000000 $d
     /tmp/ccJOVKBd.s:3221   .data.Wave_LUT:0000000000000000 $d
     /tmp/ccJOVKBd.s:3354   .data.f:0000000000000000 $d
     /tmp/ccJOVKBd.s:3360   .data.forSaveAllSum:0000000000000000 $d
     /tmp/ccJOVKBd.s:3367   .data.value_dacN:0000000000000000 $d
     /tmp/ccJOVKBd.s:3374   .data.value_dacP:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_UART_Transmit
huart2
HAL_TIM_Base_Start_IT
htim5
htim4
htim1
__aeabi_i2d
__aeabi_dmul
__aeabi_dadd
sin
__aeabi_f2d
__aeabi_ddiv
__aeabi_d2uiz
init_max5307
max5307_w_chanel
HAL_DAC_Start
HAL_DAC_SetValue
HAL_UART_Receive_IT
init_ad9520
HAL_GPIO_TogglePin
HAL_Delay
check_ad9520_status
round
hdac
__aeabi_d2f
__aeabi_dsub
max5307_loadpin
__aeabi_d2iz
HAL_GPIO_WritePin
max5307_enable_ori_chanel
ARM GAS  /tmp/ccJOVKBd.s 			page 81


HAL_SPI_Init
Error_Handler
hspi1
memset
SystemClock_Config
MX_USART2_UART_Init
HAL_UART_IRQHandler
HAL_UART_Transmit_DMA
HAL_ADC_Start_DMA
hadc1
hadc2
