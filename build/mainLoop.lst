ARM GAS  /tmp/ccKZYdRz.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"mainLoop.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text._write,"ax",%progbits
  18              		.align	1
  19              		.global	_write
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	_write:
  27              	.LVL0:
  28              	.LFB133:
  29              		.file 1 "Core/Src/mainLoop.c"
   1:Core/Src/mainLoop.c **** #include "mainLoop.h"
   2:Core/Src/mainLoop.c **** 
   3:Core/Src/mainLoop.c **** #include <stdio.h>
   4:Core/Src/mainLoop.c **** //#include "arm_math.h"
   5:Core/Src/mainLoop.c **** #include "ad9520_function.h"
   6:Core/Src/mainLoop.c **** #include "main.h"
   7:Core/Src/mainLoop.c **** #include "math.h"
   8:Core/Src/mainLoop.c **** #include "max5307.h"
   9:Core/Src/mainLoop.c **** extern UART_HandleTypeDef huart2;
  10:Core/Src/mainLoop.c **** extern DAC_HandleTypeDef hdac;
  11:Core/Src/mainLoop.c **** extern TIM_HandleTypeDef htim4;
  12:Core/Src/mainLoop.c **** extern TIM_HandleTypeDef htim1;
  13:Core/Src/mainLoop.c **** extern TIM_HandleTypeDef htim5;  // Áî®Êù•ÂÅö1sÁöÑÂÆöÊó∂Âô®
  14:Core/Src/mainLoop.c **** extern ADC_HandleTypeDef hadc1;
  15:Core/Src/mainLoop.c **** extern ADC_HandleTypeDef hadc2;
  16:Core/Src/mainLoop.c **** // floating point support in printf isn't enabled by default. To enable, add -u
  17:Core/Src/mainLoop.c **** // _printf_float to your LDFLAGS.
  18:Core/Src/mainLoop.c **** // for ubuntu arm-none-eabi-gcc compile
  19:Core/Src/mainLoop.c **** int _write(int fd, char *ptr, int len) {
  30              		.loc 1 19 40 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 19 40 is_stmt 0 view .LVU1
  35 0000 10B5     		push	{r4, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 4, -8
  39              		.cfi_offset 14, -4
ARM GAS  /tmp/ccKZYdRz.s 			page 2


  40 0002 1446     		mov	r4, r2
  20:Core/Src/mainLoop.c ****   HAL_UART_Transmit(&huart2, (uint8_t *)ptr, len, HAL_MAX_DELAY);
  41              		.loc 1 20 3 is_stmt 1 view .LVU2
  42 0004 4FF0FF33 		mov	r3, #-1
  43 0008 92B2     		uxth	r2, r2
  44              	.LVL1:
  45              		.loc 1 20 3 is_stmt 0 view .LVU3
  46 000a 0248     		ldr	r0, .L3
  47              	.LVL2:
  48              		.loc 1 20 3 view .LVU4
  49 000c FFF7FEFF 		bl	HAL_UART_Transmit
  50              	.LVL3:
  21:Core/Src/mainLoop.c ****   return len;
  51              		.loc 1 21 3 is_stmt 1 view .LVU5
  22:Core/Src/mainLoop.c **** }
  52              		.loc 1 22 1 is_stmt 0 view .LVU6
  53 0010 2046     		mov	r0, r4
  54 0012 10BD     		pop	{r4, pc}
  55              	.LVL4:
  56              	.L4:
  57              		.loc 1 22 1 view .LVU7
  58              		.align	2
  59              	.L3:
  60 0014 00000000 		.word	huart2
  61              		.cfi_endproc
  62              	.LFE133:
  64              		.section	.text.transform_capNum_to_xNum,"ax",%progbits
  65              		.align	1
  66              		.global	transform_capNum_to_xNum
  67              		.syntax unified
  68              		.thumb
  69              		.thumb_func
  70              		.fpu fpv4-sp-d16
  72              	transform_capNum_to_xNum:
  73              	.LVL5:
  74              	.LFB134:
  23:Core/Src/mainLoop.c **** 
  24:Core/Src/mainLoop.c **** // for windows keil compile
  25:Core/Src/mainLoop.c **** //  int fputc(int ch, FILE *f)
  26:Core/Src/mainLoop.c **** //  {
  27:Core/Src/mainLoop.c **** //    /* Your implementation of fputc(). */
  28:Core/Src/mainLoop.c **** //  	HAL_UART_Transmit(&huart2, (uint8_t *)&ch, 1, HAL_MAX_DELAY);
  29:Core/Src/mainLoop.c **** //    return ch;
  30:Core/Src/mainLoop.c **** //  }
  31:Core/Src/mainLoop.c **** 
  32:Core/Src/mainLoop.c **** #define CAPNUM 100
  33:Core/Src/mainLoop.c **** uint32_t chanl1_capNum[CAPNUM];
  34:Core/Src/mainLoop.c **** uint32_t chanl2_capNum[CAPNUM];
  35:Core/Src/mainLoop.c **** int32_t chanl1_xNum[CAPNUM];
  36:Core/Src/mainLoop.c **** int32_t chanl2_xNum[CAPNUM];
  37:Core/Src/mainLoop.c **** float chanl1_capNum_f[CAPNUM];
  38:Core/Src/mainLoop.c **** float chanl2_capNum_f[CAPNUM];
  39:Core/Src/mainLoop.c **** int32_t chanl1_completed = 0;
  40:Core/Src/mainLoop.c **** int32_t chanl2_completed = 0;
  41:Core/Src/mainLoop.c **** float average_xNum1 = 0, average_xNum2 = 0;
  42:Core/Src/mainLoop.c **** int32_t chanl1_midx = 0, chanl2_midx = 0;  // ‰øùÂ≠òÂæ™ÁéØDMAÈòüÂàóÁöÑ‰∏≠Èó¥ÂèòÈáè
  43:Core/Src/mainLoop.c **** // tim4 dma
ARM GAS  /tmp/ccKZYdRz.s 			page 3


  44:Core/Src/mainLoop.c **** // ÊñπÂºèÔºåËé∑ÂæóÊï∞ÊçÆÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜÔºåÂàÜ‰∏∫ÂâçÂêé‰∏§‰∏™halfwordÔºåÊØè‰∏™halfwordÈÉΩ‰ª£Ë°®‰∏Ä‰∏
  45:Core/Src/mainLoop.c **** //  ËøôÊÆµ‰ª£Á†ÅÊòØÁî®Êù•Â§ÑÁêÜËøô‰∏§‰∏™halfwordÁöÑ
  46:Core/Src/mainLoop.c **** // ËæìÂÖ•ÂèÇÊï∞ canNum‰∏∫‰∏§‰∏™halfwordÁöÑÁªÑÂêàÊï∞ÔºåÊúâ‰∏ä‰∏™‰∏äÂçáÊ≤øÊó∂Èó¥,
  47:Core/Src/mainLoop.c **** // Áî±‰∫éÁ¨¨‰∏Ä‰∏™Êï∞ÈÄöÂ∏∏ÊòØÈîôËØØÁöÑÔºåÊâÄ‰ª•‰ªéÁ¨¨‰∫å‰∏™Êï∞ÂºÄÂßã
  48:Core/Src/mainLoop.c **** void transform_capNum_to_xNum(uint32_t *capNum, int32_t *xNum,
  49:Core/Src/mainLoop.c ****                               int32_t capNum_len) {
  75              		.loc 1 49 51 is_stmt 1 view -0
  76              		.cfi_startproc
  77              		@ args = 0, pretend = 0, frame = 0
  78              		@ frame_needed = 0, uses_anonymous_args = 0
  79              		@ link register save eliminated.
  80              		.loc 1 49 51 is_stmt 0 view .LVU9
  81 0000 30B4     		push	{r4, r5}
  82              	.LCFI1:
  83              		.cfi_def_cfa_offset 8
  84              		.cfi_offset 4, -8
  85              		.cfi_offset 5, -4
  50:Core/Src/mainLoop.c ****   int32_t i;
  86              		.loc 1 50 3 is_stmt 1 view .LVU10
  51:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len / 2; i++) {
  87              		.loc 1 51 3 view .LVU11
  88              	.LVL6:
  89              		.loc 1 51 10 is_stmt 0 view .LVU12
  90 0002 0023     		movs	r3, #0
  91              	.LVL7:
  92              	.L6:
  93              		.loc 1 51 15 is_stmt 1 discriminator 1 view .LVU13
  94              		.loc 1 51 30 is_stmt 0 discriminator 1 view .LVU14
  95 0004 02EBD274 		add	r4, r2, r2, lsr #31
  96              		.loc 1 51 3 discriminator 1 view .LVU15
  97 0008 B3EB640F 		cmp	r3, r4, asr #1
  98 000c 0BDA     		bge	.L9
  52:Core/Src/mainLoop.c ****     xNum[i * 2] = capNum[i] & 0xffff;
  99              		.loc 1 52 5 is_stmt 1 discriminator 3 view .LVU16
 100              		.loc 1 52 9 is_stmt 0 discriminator 3 view .LVU17
 101 000e DC00     		lsls	r4, r3, #3
 102              		.loc 1 52 29 discriminator 3 view .LVU18
 103 0010 30F82350 		ldrh	r5, [r0, r3, lsl #2]
 104              		.loc 1 52 17 discriminator 3 view .LVU19
 105 0014 41F83350 		str	r5, [r1, r3, lsl #3]
  53:Core/Src/mainLoop.c ****     xNum[i * 2 + 1] = capNum[i] >> 16;
 106              		.loc 1 53 5 is_stmt 1 discriminator 3 view .LVU20
 107              		.loc 1 53 29 is_stmt 0 discriminator 3 view .LVU21
 108 0018 50F82350 		ldr	r5, [r0, r3, lsl #2]
 109              		.loc 1 53 9 discriminator 3 view .LVU22
 110 001c 0434     		adds	r4, r4, #4
 111              		.loc 1 53 33 discriminator 3 view .LVU23
 112 001e 2D0C     		lsrs	r5, r5, #16
 113              		.loc 1 53 21 discriminator 3 view .LVU24
 114 0020 0D51     		str	r5, [r1, r4]
  51:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len / 2; i++) {
 115              		.loc 1 51 35 is_stmt 1 discriminator 3 view .LVU25
  51:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len / 2; i++) {
 116              		.loc 1 51 36 is_stmt 0 discriminator 3 view .LVU26
 117 0022 0133     		adds	r3, r3, #1
 118              	.LVL8:
  51:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len / 2; i++) {
ARM GAS  /tmp/ccKZYdRz.s 			page 4


 119              		.loc 1 51 36 discriminator 3 view .LVU27
 120 0024 EEE7     		b	.L6
 121              	.L9:
  54:Core/Src/mainLoop.c ****   }
  55:Core/Src/mainLoop.c **** }
 122              		.loc 1 55 1 view .LVU28
 123 0026 30BC     		pop	{r4, r5}
 124              	.LCFI2:
 125              		.cfi_restore 5
 126              		.cfi_restore 4
 127              		.cfi_def_cfa_offset 0
 128 0028 7047     		bx	lr
 129              		.cfi_endproc
 130              	.LFE134:
 132              		.section	.text.cal_average_xNum,"ax",%progbits
 133              		.align	1
 134              		.global	cal_average_xNum
 135              		.syntax unified
 136              		.thumb
 137              		.thumb_func
 138              		.fpu fpv4-sp-d16
 140              	cal_average_xNum:
 141              	.LVL9:
 142              	.LFB135:
  56:Core/Src/mainLoop.c **** 
  57:Core/Src/mainLoop.c **** // ËÆ°ÁÆóÂπ≥ÂùáxNumÔºå
  58:Core/Src/mainLoop.c **** // cal_average_xNum(chanl1_xNum, CAPNUM);
  59:Core/Src/mainLoop.c **** int32_t cal_average_xNum(int32_t *xNum, int32_t capNum_len) {
 143              		.loc 1 59 61 is_stmt 1 view -0
 144              		.cfi_startproc
 145              		@ args = 0, pretend = 0, frame = 0
 146              		@ frame_needed = 0, uses_anonymous_args = 0
 147              		@ link register save eliminated.
 148              		.loc 1 59 61 is_stmt 0 view .LVU30
 149 0000 70B4     		push	{r4, r5, r6}
 150              	.LCFI3:
 151              		.cfi_def_cfa_offset 12
 152              		.cfi_offset 4, -12
 153              		.cfi_offset 5, -8
 154              		.cfi_offset 6, -4
  60:Core/Src/mainLoop.c ****   int32_t i, sum = 0;
 155              		.loc 1 60 3 is_stmt 1 view .LVU31
 156              	.LVL10:
  61:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len - 1; i++) {
 157              		.loc 1 61 3 view .LVU32
  60:Core/Src/mainLoop.c ****   int32_t i, sum = 0;
 158              		.loc 1 60 14 is_stmt 0 view .LVU33
 159 0002 0025     		movs	r5, #0
 160              		.loc 1 61 10 view .LVU34
 161 0004 2B46     		mov	r3, r5
 162              	.LVL11:
 163              	.L11:
 164              		.loc 1 61 15 is_stmt 1 discriminator 1 view .LVU35
 165              		.loc 1 61 30 is_stmt 0 discriminator 1 view .LVU36
 166 0006 4A1E     		subs	r2, r1, #1
 167              		.loc 1 61 3 discriminator 1 view .LVU37
 168 0008 9A42     		cmp	r2, r3
ARM GAS  /tmp/ccKZYdRz.s 			page 5


 169 000a 0ADD     		ble	.L14
  62:Core/Src/mainLoop.c ****     xNum[i] = xNum[i + 1] - xNum[i];
 170              		.loc 1 62 5 is_stmt 1 discriminator 3 view .LVU38
 171              		.loc 1 62 19 is_stmt 0 discriminator 3 view .LVU39
 172 000c 5C1C     		adds	r4, r3, #1
 173 000e 50F82420 		ldr	r2, [r0, r4, lsl #2]
 174              		.loc 1 62 33 discriminator 3 view .LVU40
 175 0012 50F82360 		ldr	r6, [r0, r3, lsl #2]
 176              		.loc 1 62 27 discriminator 3 view .LVU41
 177 0016 921B     		subs	r2, r2, r6
 178              		.loc 1 62 13 discriminator 3 view .LVU42
 179 0018 40F82320 		str	r2, [r0, r3, lsl #2]
  63:Core/Src/mainLoop.c ****     sum += xNum[i];
 180              		.loc 1 63 5 is_stmt 1 discriminator 3 view .LVU43
 181              		.loc 1 63 9 is_stmt 0 discriminator 3 view .LVU44
 182 001c 1544     		add	r5, r5, r2
 183              	.LVL12:
  61:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len - 1; i++) {
 184              		.loc 1 61 35 is_stmt 1 discriminator 3 view .LVU45
  61:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len - 1; i++) {
 185              		.loc 1 61 36 is_stmt 0 discriminator 3 view .LVU46
 186 001e 2346     		mov	r3, r4
 187              	.LVL13:
  61:Core/Src/mainLoop.c ****   for (i = 0; i < capNum_len - 1; i++) {
 188              		.loc 1 61 36 discriminator 3 view .LVU47
 189 0020 F1E7     		b	.L11
 190              	.L14:
  64:Core/Src/mainLoop.c ****   }
  65:Core/Src/mainLoop.c ****   return sum / (capNum_len - 1);
 191              		.loc 1 65 3 is_stmt 1 view .LVU48
  66:Core/Src/mainLoop.c **** }
 192              		.loc 1 66 1 is_stmt 0 view .LVU49
 193 0022 95FBF2F0 		sdiv	r0, r5, r2
 194              	.LVL14:
 195              		.loc 1 66 1 view .LVU50
 196 0026 70BC     		pop	{r4, r5, r6}
 197              	.LCFI4:
 198              		.cfi_restore 6
 199              		.cfi_restore 5
 200              		.cfi_restore 4
 201              		.cfi_def_cfa_offset 0
 202              	.LVL15:
 203              		.loc 1 66 1 view .LVU51
 204 0028 7047     		bx	lr
 205              		.cfi_endproc
 206              	.LFE135:
 208              		.section	.text.enable_tim4_capture_Iterrupt,"ax",%progbits
 209              		.align	1
 210              		.global	enable_tim4_capture_Iterrupt
 211              		.syntax unified
 212              		.thumb
 213              		.thumb_func
 214              		.fpu fpv4-sp-d16
 216              	enable_tim4_capture_Iterrupt:
 217              	.LFB136:
  67:Core/Src/mainLoop.c **** 
  68:Core/Src/mainLoop.c **** void enable_tim4_capture_Iterrupt(void) {
ARM GAS  /tmp/ccKZYdRz.s 			page 6


 218              		.loc 1 68 41 is_stmt 1 view -0
 219              		.cfi_startproc
 220              		@ args = 0, pretend = 0, frame = 0
 221              		@ frame_needed = 0, uses_anonymous_args = 0
 222 0000 08B5     		push	{r3, lr}
 223              	.LCFI5:
 224              		.cfi_def_cfa_offset 8
 225              		.cfi_offset 3, -8
 226              		.cfi_offset 14, -4
  69:Core/Src/mainLoop.c ****   // HAL_TIM_Base_Start_IT(&htim4);
  70:Core/Src/mainLoop.c ****   // HAL_TIM_IC_Start_IT(&htim4, TIM_CHANNEL_1);
  71:Core/Src/mainLoop.c ****   // HAL_TIM_IC_Start_IT(&htim4, TIM_CHANNEL_2);
  72:Core/Src/mainLoop.c ****   // HAL_TIM_IC_Start_DMA(&htim4, TIM_CHANNEL_1, (uint32_t*)chanl1_capNum,
  73:Core/Src/mainLoop.c ****   // CAPNUM+4);
  74:Core/Src/mainLoop.c **** 
  75:Core/Src/mainLoop.c ****   // HAL_TIM_IC_Start_DMA(&htim4, TIM_CHANNEL_2, (uint32_t*)chanl2_capNum,
  76:Core/Src/mainLoop.c ****   // CAPNUM); HAL_TIM_IC_Start_DMA(&htim1, TIM_CHANNEL_4,
  77:Core/Src/mainLoop.c ****   // (uint32_t*)chanl1_capNum, CAPNUM);
  78:Core/Src/mainLoop.c ****   HAL_TIM_Base_Start_IT(&htim5);
 227              		.loc 1 78 3 view .LVU53
 228 0002 0548     		ldr	r0, .L17
 229 0004 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 230              	.LVL16:
  79:Core/Src/mainLoop.c ****   HAL_TIM_Base_Start_IT(&htim4);
 231              		.loc 1 79 3 view .LVU54
 232 0008 0448     		ldr	r0, .L17+4
 233 000a FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 234              	.LVL17:
  80:Core/Src/mainLoop.c ****   HAL_TIM_Base_Start_IT(&htim1);
 235              		.loc 1 80 3 view .LVU55
 236 000e 0448     		ldr	r0, .L17+8
 237 0010 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 238              	.LVL18:
  81:Core/Src/mainLoop.c **** }
 239              		.loc 1 81 1 is_stmt 0 view .LVU56
 240 0014 08BD     		pop	{r3, pc}
 241              	.L18:
 242 0016 00BF     		.align	2
 243              	.L17:
 244 0018 00000000 		.word	htim5
 245 001c 00000000 		.word	htim4
 246 0020 00000000 		.word	htim1
 247              		.cfi_endproc
 248              	.LFE136:
 250              		.global	__aeabi_i2d
 251              		.global	__aeabi_dmul
 252              		.global	__aeabi_dadd
 253              		.section	.text.generateSinWave,"ax",%progbits
 254              		.align	1
 255              		.global	generateSinWave
 256              		.syntax unified
 257              		.thumb
 258              		.thumb_func
 259              		.fpu fpv4-sp-d16
 261              	generateSinWave:
 262              	.LVL19:
 263              	.LFB137:
ARM GAS  /tmp/ccKZYdRz.s 			page 7


  82:Core/Src/mainLoop.c **** 
  83:Core/Src/mainLoop.c **** uint32_t i = 0;
  84:Core/Src/mainLoop.c **** float f = 3.14;
  85:Core/Src/mainLoop.c **** // int32_t chanl1_capNum = 0;
  86:Core/Src/mainLoop.c **** // int32_t chanl2_capNum = 0;
  87:Core/Src/mainLoop.c **** int32_t fre_dif = 0;
  88:Core/Src/mainLoop.c **** int32_t xx, yy, complete_sign;
  89:Core/Src/mainLoop.c **** int32_t xx_cnt, yy_cnt;
  90:Core/Src/mainLoop.c **** uint8_t buf[4];
  91:Core/Src/mainLoop.c **** float v_dianya;
  92:Core/Src/mainLoop.c **** uint32_t dacV;
  93:Core/Src/mainLoop.c **** double tmp;
  94:Core/Src/mainLoop.c **** #define NS 128
  95:Core/Src/mainLoop.c **** uint32_t Wave_LUT[NS] = {
  96:Core/Src/mainLoop.c ****     2048, 2149, 2250, 2350, 2450, 2549, 2646, 2742, 2837, 2929, 3020, 3108,
  97:Core/Src/mainLoop.c ****     3193, 3275, 3355, 3431, 3504, 3574, 3639, 3701, 3759, 3812, 3861, 3906,
  98:Core/Src/mainLoop.c ****     3946, 3982, 4013, 4039, 4060, 4076, 4087, 4094, 4095, 4091, 4082, 4069,
  99:Core/Src/mainLoop.c ****     4050, 4026, 3998, 3965, 3927, 3884, 3837, 3786, 3730, 3671, 3607, 3539,
 100:Core/Src/mainLoop.c ****     3468, 3394, 3316, 3235, 3151, 3064, 2975, 2883, 2790, 2695, 2598, 2500,
 101:Core/Src/mainLoop.c ****     2400, 2300, 2199, 2098, 1997, 1896, 1795, 1695, 1595, 1497, 1400, 1305,
 102:Core/Src/mainLoop.c ****     1212, 1120, 1031, 944,  860,  779,  701,  627,  556,  488,  424,  365,
 103:Core/Src/mainLoop.c ****     309,  258,  211,  168,  130,  97,   69,   45,   26,   13,   4,    0,
 104:Core/Src/mainLoop.c ****     1,    8,    19,   35,   56,   82,   113,  149,  189,  234,  283,  336,
 105:Core/Src/mainLoop.c ****     394,  456,  521,  591,  664,  740,  820,  902,  987,  1075, 1166, 1258,
 106:Core/Src/mainLoop.c ****     1353, 1449, 1546, 1645, 1745, 1845, 1946, 2047};
 107:Core/Src/mainLoop.c **** #define PI 3.14159265
 108:Core/Src/mainLoop.c **** #define AMPLITUDE 2048.0  // Ê≠£Âº¶Ê≥¢ÂπÖÂ∫¶
 109:Core/Src/mainLoop.c **** #define FREQUENCY 100.0   // Ê≠£Âº¶Ê≥¢È¢ëÁéáÔºàHzÔºâ
 110:Core/Src/mainLoop.c **** #define SAMPLE_RATE 4096  // ÈááÊ†∑ÁéáÔºàÊØèÁßíÈááÊ†∑Ê¨°Êï∞Ôºâ
 111:Core/Src/mainLoop.c **** 
 112:Core/Src/mainLoop.c **** void generateSinWave(int32_t i) {
 264              		.loc 1 112 33 is_stmt 1 view -0
 265              		.cfi_startproc
 266              		@ args = 0, pretend = 0, frame = 0
 267              		@ frame_needed = 0, uses_anonymous_args = 0
 268              		.loc 1 112 33 is_stmt 0 view .LVU58
 269 0000 08B5     		push	{r3, lr}
 270              	.LCFI6:
 271              		.cfi_def_cfa_offset 8
 272              		.cfi_offset 3, -8
 273              		.cfi_offset 14, -4
 113:Core/Src/mainLoop.c ****   double omega = 2.0 * PI * FREQUENCY / SAMPLE_RATE;
 274              		.loc 1 113 3 is_stmt 1 view .LVU59
 275              	.LVL20:
 114:Core/Src/mainLoop.c ****   tmp = AMPLITUDE * sin(omega * i) + AMPLITUDE;
 276              		.loc 1 114 3 view .LVU60
 277              		.loc 1 114 21 is_stmt 0 view .LVU61
 278 0002 FFF7FEFF 		bl	__aeabi_i2d
 279              	.LVL21:
 280              		.loc 1 114 21 view .LVU62
 281 0006 0EA3     		adr	r3, .L21+8
 282 0008 D3E90023 		ldrd	r2, [r3]
 283 000c FFF7FEFF 		bl	__aeabi_dmul
 284              	.LVL22:
 285 0010 41EC100B 		vmov	d0, r0, r1
 286 0014 FFF7FEFF 		bl	sin
 287              	.LVL23:
ARM GAS  /tmp/ccKZYdRz.s 			page 8


 288 0018 51EC100B 		vmov	r0, r1, d0
 289              		.loc 1 114 19 view .LVU63
 290 001c 0022     		movs	r2, #0
 291 001e 064B     		ldr	r3, .L21
 292 0020 FFF7FEFF 		bl	__aeabi_dmul
 293              	.LVL24:
 294              		.loc 1 114 36 view .LVU64
 295 0024 0022     		movs	r2, #0
 296 0026 044B     		ldr	r3, .L21
 297 0028 FFF7FEFF 		bl	__aeabi_dadd
 298              	.LVL25:
 299              		.loc 1 114 7 view .LVU65
 300 002c 034B     		ldr	r3, .L21+4
 301 002e C3E90001 		strd	r0, [r3]
 115:Core/Src/mainLoop.c **** }
 302              		.loc 1 115 1 view .LVU66
 303 0032 08BD     		pop	{r3, pc}
 304              	.L22:
 305 0034 AFF30080 		.align	3
 306              	.L21:
 307 0038 0000A040 		.word	1084227584
 308 003c 00000000 		.word	tmp
 309 0040 5CE67459 		.word	1500833372
 310 0044 8CA2C33F 		.word	1069785740
 311              		.cfi_endproc
 312              	.LFE137:
 314              		.global	__aeabi_f2d
 315              		.global	__aeabi_ddiv
 316              		.global	__aeabi_d2uiz
 317              		.section	.text.mainLoop,"ax",%progbits
 318              		.align	1
 319              		.global	mainLoop
 320              		.syntax unified
 321              		.thumb
 322              		.thumb_func
 323              		.fpu fpv4-sp-d16
 325              	mainLoop:
 326              	.LFB138:
 116:Core/Src/mainLoop.c **** void mainLoop(void) {
 327              		.loc 1 116 21 is_stmt 1 view -0
 328              		.cfi_startproc
 329              		@ args = 0, pretend = 0, frame = 0
 330              		@ frame_needed = 0, uses_anonymous_args = 0
 331 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 332              	.LCFI7:
 333              		.cfi_def_cfa_offset 24
 334              		.cfi_offset 3, -24
 335              		.cfi_offset 4, -20
 336              		.cfi_offset 5, -16
 337              		.cfi_offset 6, -12
 338              		.cfi_offset 7, -8
 339              		.cfi_offset 14, -4
 117:Core/Src/mainLoop.c ****   uint32_t dacN = 0;  //,dacV=0;
 340              		.loc 1 117 3 view .LVU68
 341              	.LVL26:
 118:Core/Src/mainLoop.c **** 
 119:Core/Src/mainLoop.c ****   int32_t dacSign = 1;
ARM GAS  /tmp/ccKZYdRz.s 			page 9


 342              		.loc 1 119 3 view .LVU69
 120:Core/Src/mainLoop.c ****   init_max5307();
 343              		.loc 1 120 3 view .LVU70
 344 0002 FFF7FEFF 		bl	init_max5307
 345              	.LVL27:
 121:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch8, 2048, max_outenable);
 346              		.loc 1 121 3 view .LVU71
 347 0006 0122     		movs	r2, #1
 348 0008 4FF40061 		mov	r1, #2048
 349 000c 0920     		movs	r0, #9
 350 000e FFF7FEFF 		bl	max5307_w_chanel
 351              	.LVL28:
 122:Core/Src/mainLoop.c ****   //	while(1){
 123:Core/Src/mainLoop.c ****   //	    HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 124:Core/Src/mainLoop.c ****   //   //HAL_Delay(3);
 125:Core/Src/mainLoop.c ****   //    HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 126:Core/Src/mainLoop.c ****   //   // HAL_Delay(300);
 127:Core/Src/mainLoop.c ****   //	HAL_GPIO_TogglePin(LED5_GPIO_Port, LED5_Pin);
 128:Core/Src/mainLoop.c ****   //	//HAL_Delay(300);
 129:Core/Src/mainLoop.c ****   //		//void max5307_w_chanel(uint32_t chanel, uint32_t val);
 130:Core/Src/mainLoop.c ****   //
 131:Core/Src/mainLoop.c ****   //		//max5307_w_chanel(0x02,dacN);
 132:Core/Src/mainLoop.c ****   //		generateSinWave(dacN%SAMPLE_RATE);
 133:Core/Src/mainLoop.c ****   //		max5307_w_chanel(max_ch1,round(tmp),max_outenable);
 134:Core/Src/mainLoop.c ****   //		max5307_w_chanel(DACP_1K,round(tmp),max_outenable);
 135:Core/Src/mainLoop.c ****   //		//max5307_loadpin();
 136:Core/Src/mainLoop.c ****   //		//max5307_w_chanel(0x0e,0x2f);
 137:Core/Src/mainLoop.c ****   ////		if(dacN>=0xfff){
 138:Core/Src/mainLoop.c ****   ////			dacSign = -1;
 139:Core/Src/mainLoop.c ****   ////		}else if(dacN==0){
 140:Core/Src/mainLoop.c ****   ////			dacSign = 1;
 141:Core/Src/mainLoop.c ****   ////		}
 142:Core/Src/mainLoop.c ****   //		dacN = dacN + dacSign;
 143:Core/Src/mainLoop.c **** 
 144:Core/Src/mainLoop.c ****   ////		tmp = (dacN%4096) * 3.14 /4096;
 145:Core/Src/mainLoop.c ****   ////		tmp = sin(tmp);
 146:Core/Src/mainLoop.c ****   ////		dacV = 4096*tmp;
 147:Core/Src/mainLoop.c ****   //	}
 148:Core/Src/mainLoop.c ****   int32_t xx_bak = 0;
 352              		.loc 1 148 3 view .LVU72
 149:Core/Src/mainLoop.c ****   int32_t yy_bak = 0;
 353              		.loc 1 149 3 view .LVU73
 150:Core/Src/mainLoop.c ****   // init_ad9520_spiport();
 151:Core/Src/mainLoop.c ****   complete_sign = 0;
 354              		.loc 1 151 3 view .LVU74
 355              		.loc 1 151 17 is_stmt 0 view .LVU75
 356 0012 0024     		movs	r4, #0
 357 0014 504B     		ldr	r3, .L31+8
 358 0016 1C60     		str	r4, [r3]
 152:Core/Src/mainLoop.c ****   xx = 0;
 359              		.loc 1 152 3 is_stmt 1 view .LVU76
 360              		.loc 1 152 6 is_stmt 0 view .LVU77
 361 0018 504B     		ldr	r3, .L31+12
 362 001a 1C60     		str	r4, [r3]
 153:Core/Src/mainLoop.c ****   yy = 0;
 363              		.loc 1 153 3 is_stmt 1 view .LVU78
 364              		.loc 1 153 6 is_stmt 0 view .LVU79
ARM GAS  /tmp/ccKZYdRz.s 			page 10


 365 001c 504B     		ldr	r3, .L31+16
 366 001e 1C60     		str	r4, [r3]
 154:Core/Src/mainLoop.c ****   fre_dif = 0;
 367              		.loc 1 154 3 is_stmt 1 view .LVU80
 368              		.loc 1 154 11 is_stmt 0 view .LVU81
 369 0020 504D     		ldr	r5, .L31+20
 370 0022 2C60     		str	r4, [r5]
 155:Core/Src/mainLoop.c ****   xx_cnt = 0;
 371              		.loc 1 155 3 is_stmt 1 view .LVU82
 372              		.loc 1 155 10 is_stmt 0 view .LVU83
 373 0024 504B     		ldr	r3, .L31+24
 374 0026 1C60     		str	r4, [r3]
 156:Core/Src/mainLoop.c ****   yy_cnt = 0;
 375              		.loc 1 156 3 is_stmt 1 view .LVU84
 376              		.loc 1 156 10 is_stmt 0 view .LVU85
 377 0028 504B     		ldr	r3, .L31+28
 378 002a 1C60     		str	r4, [r3]
 157:Core/Src/mainLoop.c ****   v_dianya = 1.65;
 379              		.loc 1 157 3 is_stmt 1 view .LVU86
 380              		.loc 1 157 12 is_stmt 0 view .LVU87
 381 002c 504F     		ldr	r7, .L31+32
 382 002e 514B     		ldr	r3, .L31+36
 383 0030 3B60     		str	r3, [r7]	@ float
 158:Core/Src/mainLoop.c ****   HAL_DAC_Start(&hdac, DAC_CHANNEL_1);
 384              		.loc 1 158 3 is_stmt 1 view .LVU88
 385 0032 514E     		ldr	r6, .L31+40
 386 0034 2146     		mov	r1, r4
 387 0036 3046     		mov	r0, r6
 388 0038 FFF7FEFF 		bl	HAL_DAC_Start
 389              	.LVL29:
 159:Core/Src/mainLoop.c ****   // HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 160:Core/Src/mainLoop.c ****   HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 390              		.loc 1 160 3 view .LVU89
 161:Core/Src/mainLoop.c ****                    (uint32_t)((v_dianya / 3.3) * 4096));
 391              		.loc 1 161 41 is_stmt 0 view .LVU90
 392 003c 3868     		ldr	r0, [r7]	@ float
 393 003e FFF7FEFF 		bl	__aeabi_f2d
 394              	.LVL30:
 395 0042 43A3     		adr	r3, .L31
 396 0044 D3E90023 		ldrd	r2, [r3]
 397 0048 FFF7FEFF 		bl	__aeabi_ddiv
 398              	.LVL31:
 399              		.loc 1 161 48 view .LVU91
 400 004c 0022     		movs	r2, #0
 401 004e 4B4B     		ldr	r3, .L31+44
 402 0050 FFF7FEFF 		bl	__aeabi_dmul
 403              	.LVL32:
 160:Core/Src/mainLoop.c ****                    (uint32_t)((v_dianya / 3.3) * 4096));
 404              		.loc 1 160 3 view .LVU92
 405 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 406              	.LVL33:
 407 0058 0346     		mov	r3, r0
 408 005a 2246     		mov	r2, r4
 409 005c 2146     		mov	r1, r4
 410 005e 3046     		mov	r0, r6
 411 0060 FFF7FEFF 		bl	HAL_DAC_SetValue
 412              	.LVL34:
ARM GAS  /tmp/ccKZYdRz.s 			page 11


 162:Core/Src/mainLoop.c ****   // HAL_UART_Receive_IT(UART_HandleTypeDef *huart, uint8_t *pData, uint16_t
 163:Core/Src/mainLoop.c ****   // Size)
 164:Core/Src/mainLoop.c ****   HAL_UART_Receive_IT(&huart2, (uint8_t *)(buf), 1);
 413              		.loc 1 164 3 is_stmt 1 view .LVU93
 414 0064 0122     		movs	r2, #1
 415 0066 4649     		ldr	r1, .L31+48
 416 0068 4648     		ldr	r0, .L31+52
 417 006a FFF7FEFF 		bl	HAL_UART_Receive_IT
 418              	.LVL35:
 165:Core/Src/mainLoop.c ****   init_ad9520();
 419              		.loc 1 165 3 view .LVU94
 420 006e FFF7FEFF 		bl	init_ad9520
 421              	.LVL36:
 166:Core/Src/mainLoop.c ****   enable_tim4_capture_Iterrupt();
 422              		.loc 1 166 3 view .LVU95
 423 0072 FFF7FEFF 		bl	enable_tim4_capture_Iterrupt
 424              	.LVL37:
 167:Core/Src/mainLoop.c ****   while (1) {
 425              		.loc 1 167 3 view .LVU96
 168:Core/Src/mainLoop.c ****     // do{
 169:Core/Src/mainLoop.c **** 
 170:Core/Src/mainLoop.c ****     // }while(0);
 171:Core/Src/mainLoop.c **** 
 172:Core/Src/mainLoop.c ****     i++;
 426              		.loc 1 172 5 view .LVU97
 427              		.loc 1 172 6 is_stmt 0 view .LVU98
 428 0076 444A     		ldr	r2, .L31+56
 429 0078 1368     		ldr	r3, [r2]
 430 007a 0133     		adds	r3, r3, #1
 431 007c 1360     		str	r3, [r2]
 173:Core/Src/mainLoop.c **** 
 174:Core/Src/mainLoop.c ****     // HAL_DAC_SetValue(DAC_HandleTypeDef* hdac, uint32_t Channel, uint32_t
 175:Core/Src/mainLoop.c ****     // Alignment, uint32_t Data)
 176:Core/Src/mainLoop.c **** 
 177:Core/Src/mainLoop.c ****     // HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R, i++);
 178:Core/Src/mainLoop.c ****     // init_ad9520();
 179:Core/Src/mainLoop.c ****     // set_ad9520_device();
 180:Core/Src/mainLoop.c ****     // HAL_GPIO_TogglePin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin)
 181:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 432              		.loc 1 181 5 is_stmt 1 view .LVU99
 433 007e 434E     		ldr	r6, .L31+60
 434 0080 4FF40061 		mov	r1, #2048
 435 0084 3046     		mov	r0, r6
 436 0086 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 437              	.LVL38:
 182:Core/Src/mainLoop.c ****     HAL_Delay(3);
 438              		.loc 1 182 5 view .LVU100
 439 008a 0320     		movs	r0, #3
 440 008c FFF7FEFF 		bl	HAL_Delay
 441              	.LVL39:
 183:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 442              		.loc 1 183 5 view .LVU101
 443 0090 4FF48051 		mov	r1, #4096
 444 0094 3046     		mov	r0, r6
 445 0096 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 446              	.LVL40:
 184:Core/Src/mainLoop.c ****     HAL_Delay(300);
ARM GAS  /tmp/ccKZYdRz.s 			page 12


 447              		.loc 1 184 5 view .LVU102
 448 009a 4FF49670 		mov	r0, #300
 449 009e FFF7FEFF 		bl	HAL_Delay
 450              	.LVL41:
 185:Core/Src/mainLoop.c ****     check_ad9520_status();
 451              		.loc 1 185 5 view .LVU103
 452 00a2 FFF7FEFF 		bl	check_ad9520_status
 453              	.LVL42:
 186:Core/Src/mainLoop.c ****     // printf("hello world %ld:float %f\n",i,f*i);
 187:Core/Src/mainLoop.c ****     fre_dif = chanl1_capNum - chanl2_capNum;
 454              		.loc 1 187 5 view .LVU104
 455              		.loc 1 187 29 is_stmt 0 view .LVU105
 456 00a6 3A4B     		ldr	r3, .L31+64
 457 00a8 3A4A     		ldr	r2, .L31+68
 458 00aa 9B1A     		subs	r3, r3, r2
 459 00ac 9B10     		asrs	r3, r3, #2
 460              		.loc 1 187 13 view .LVU106
 461 00ae 2B60     		str	r3, [r5]
 462 00b0 1FE0     		b	.L27
 463              	.LVL43:
 464              	.L29:
 188:Core/Src/mainLoop.c **** 
 189:Core/Src/mainLoop.c ****     while (1) {
 190:Core/Src/mainLoop.c ****       // if(chanl1_completed==1 ){
 191:Core/Src/mainLoop.c ****       //   chanl1_completed=0;
 192:Core/Src/mainLoop.c ****       //   transform_capNum_to_xNum((uint32_t *)(&chanl1_capNum[2]),
 193:Core/Src/mainLoop.c ****       //   chanl1_xNum, CAPNUM); average_xNum1 =
 194:Core/Src/mainLoop.c ****       //   (float)cal_average_xNum(chanl1_xNum, CAPNUM);
 195:Core/Src/mainLoop.c ****       //   //HAL_TIM_IC_Start_DMA(&htim4, TIM_CHANNEL_1,
 196:Core/Src/mainLoop.c ****       //   (uint32_t*)chanl1_capNum, CAPNUM);
 197:Core/Src/mainLoop.c **** 
 198:Core/Src/mainLoop.c ****       //   break;
 199:Core/Src/mainLoop.c ****       // }else if(chanl2_completed==1){
 200:Core/Src/mainLoop.c ****       //   chanl2_completed=0;
 201:Core/Src/mainLoop.c ****       //   //HAL_TIM_IC_Start_DMA(&htim4, TIM_CHANNEL_2,
 202:Core/Src/mainLoop.c ****       //   (uint32_t*)chanl2_capNum, CAPNUM); break;
 203:Core/Src/mainLoop.c ****       // }
 204:Core/Src/mainLoop.c ****       generateSinWave(dacN % SAMPLE_RATE);
 205:Core/Src/mainLoop.c ****       max5307_w_chanel(max_ch1, round(tmp), max_outenable);
 206:Core/Src/mainLoop.c ****       max5307_w_chanel(DACP_1, round(tmp), max_outenable);
 207:Core/Src/mainLoop.c ****       dacN = dacN + dacSign;
 208:Core/Src/mainLoop.c ****       if (v_dianya > 1) {
 209:Core/Src/mainLoop.c ****         v_dianya = 0;
 210:Core/Src/mainLoop.c ****       } else {
 211:Core/Src/mainLoop.c ****         v_dianya = 3.3;
 465              		.loc 1 211 9 is_stmt 1 view .LVU107
 466              		.loc 1 211 18 is_stmt 0 view .LVU108
 467 00b2 2F4B     		ldr	r3, .L31+32
 468 00b4 384A     		ldr	r2, .L31+72
 469 00b6 1A60     		str	r2, [r3]	@ float
 470              	.L26:
 212:Core/Src/mainLoop.c ****       }
 213:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 471              		.loc 1 213 7 is_stmt 1 view .LVU109
 214:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 472              		.loc 1 214 45 is_stmt 0 view .LVU110
 473 00b8 2D4B     		ldr	r3, .L31+32
ARM GAS  /tmp/ccKZYdRz.s 			page 13


 474 00ba 1868     		ldr	r0, [r3]	@ float
 475 00bc FFF7FEFF 		bl	__aeabi_f2d
 476              	.LVL44:
 477 00c0 23A3     		adr	r3, .L31
 478 00c2 D3E90023 		ldrd	r2, [r3]
 479 00c6 FFF7FEFF 		bl	__aeabi_ddiv
 480              	.LVL45:
 481              		.loc 1 214 52 view .LVU111
 482 00ca 0022     		movs	r2, #0
 483 00cc 2B4B     		ldr	r3, .L31+44
 484 00ce FFF7FEFF 		bl	__aeabi_dmul
 485              	.LVL46:
 213:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 486              		.loc 1 213 7 view .LVU112
 487 00d2 FFF7FEFF 		bl	__aeabi_d2uiz
 488              	.LVL47:
 489 00d6 0346     		mov	r3, r0
 490 00d8 0022     		movs	r2, #0
 491 00da 1146     		mov	r1, r2
 492 00dc 2648     		ldr	r0, .L31+40
 493 00de FFF7FEFF 		bl	HAL_DAC_SetValue
 494              	.LVL48:
 215:Core/Src/mainLoop.c ****       HAL_Delay(100);
 495              		.loc 1 215 7 is_stmt 1 view .LVU113
 496 00e2 6420     		movs	r0, #100
 497 00e4 FFF7FEFF 		bl	HAL_Delay
 498              	.LVL49:
 216:Core/Src/mainLoop.c ****       HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 499              		.loc 1 216 7 view .LVU114
 500 00e8 4FF48051 		mov	r1, #4096
 501 00ec 2748     		ldr	r0, .L31+60
 502 00ee FFF7FEFF 		bl	HAL_GPIO_TogglePin
 503              	.LVL50:
 189:Core/Src/mainLoop.c ****       // if(chanl1_completed==1 ){
 504              		.loc 1 189 11 view .LVU115
 505              	.L27:
 189:Core/Src/mainLoop.c ****       // if(chanl1_completed==1 ){
 506              		.loc 1 189 5 view .LVU116
 204:Core/Src/mainLoop.c ****       max5307_w_chanel(max_ch1, round(tmp), max_outenable);
 507              		.loc 1 204 7 view .LVU117
 508 00f2 C4F30B00 		ubfx	r0, r4, #0, #12
 509 00f6 FFF7FEFF 		bl	generateSinWave
 510              	.LVL51:
 205:Core/Src/mainLoop.c ****       max5307_w_chanel(DACP_1, round(tmp), max_outenable);
 511              		.loc 1 205 7 view .LVU118
 205:Core/Src/mainLoop.c ****       max5307_w_chanel(DACP_1, round(tmp), max_outenable);
 512              		.loc 1 205 33 is_stmt 0 view .LVU119
 513 00fa 284D     		ldr	r5, .L31+76
 514 00fc 95ED000B 		vldr.64	d0, [r5]
 515 0100 FFF7FEFF 		bl	round
 516              	.LVL52:
 517 0104 51EC100B 		vmov	r0, r1, d0
 205:Core/Src/mainLoop.c ****       max5307_w_chanel(DACP_1, round(tmp), max_outenable);
 518              		.loc 1 205 7 view .LVU120
 519 0108 FFF7FEFF 		bl	__aeabi_d2uiz
 520              	.LVL53:
 521 010c 0146     		mov	r1, r0
ARM GAS  /tmp/ccKZYdRz.s 			page 14


 522 010e 0122     		movs	r2, #1
 523 0110 0220     		movs	r0, #2
 524 0112 FFF7FEFF 		bl	max5307_w_chanel
 525              	.LVL54:
 206:Core/Src/mainLoop.c ****       dacN = dacN + dacSign;
 526              		.loc 1 206 7 is_stmt 1 view .LVU121
 206:Core/Src/mainLoop.c ****       dacN = dacN + dacSign;
 527              		.loc 1 206 32 is_stmt 0 view .LVU122
 528 0116 95ED000B 		vldr.64	d0, [r5]
 529 011a FFF7FEFF 		bl	round
 530              	.LVL55:
 531 011e 51EC100B 		vmov	r0, r1, d0
 206:Core/Src/mainLoop.c ****       dacN = dacN + dacSign;
 532              		.loc 1 206 7 view .LVU123
 533 0122 FFF7FEFF 		bl	__aeabi_d2uiz
 534              	.LVL56:
 535 0126 0146     		mov	r1, r0
 536 0128 0122     		movs	r2, #1
 537 012a 0620     		movs	r0, #6
 538 012c FFF7FEFF 		bl	max5307_w_chanel
 539              	.LVL57:
 207:Core/Src/mainLoop.c ****       if (v_dianya > 1) {
 540              		.loc 1 207 7 is_stmt 1 view .LVU124
 207:Core/Src/mainLoop.c ****       if (v_dianya > 1) {
 541              		.loc 1 207 12 is_stmt 0 view .LVU125
 542 0130 0134     		adds	r4, r4, #1
 543              	.LVL58:
 208:Core/Src/mainLoop.c ****         v_dianya = 0;
 544              		.loc 1 208 7 is_stmt 1 view .LVU126
 208:Core/Src/mainLoop.c ****         v_dianya = 0;
 545              		.loc 1 208 20 is_stmt 0 view .LVU127
 546 0132 0F4B     		ldr	r3, .L31+32
 547 0134 93ED007A 		vldr.32	s14, [r3]
 208:Core/Src/mainLoop.c ****         v_dianya = 0;
 548              		.loc 1 208 10 view .LVU128
 549 0138 F7EE007A 		vmov.f32	s15, #1.0e+0
 550 013c B4EEE77A 		vcmpe.f32	s14, s15
 551 0140 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 552 0144 B5DD     		ble	.L29
 209:Core/Src/mainLoop.c ****       } else {
 553              		.loc 1 209 9 is_stmt 1 view .LVU129
 209:Core/Src/mainLoop.c ****       } else {
 554              		.loc 1 209 18 is_stmt 0 view .LVU130
 555 0146 0022     		movs	r2, #0
 556 0148 1A60     		str	r2, [r3]	@ float
 557 014a B5E7     		b	.L26
 558              	.L32:
 559 014c AFF30080 		.align	3
 560              	.L31:
 561 0150 66666666 		.word	1717986918
 562 0154 66660A40 		.word	1074423398
 563 0158 00000000 		.word	complete_sign
 564 015c 00000000 		.word	xx
 565 0160 00000000 		.word	yy
 566 0164 00000000 		.word	.LANCHOR0
 567 0168 00000000 		.word	xx_cnt
 568 016c 00000000 		.word	yy_cnt
ARM GAS  /tmp/ccKZYdRz.s 			page 15


 569 0170 00000000 		.word	v_dianya
 570 0174 3333D33F 		.word	1070805811
 571 0178 00000000 		.word	hdac
 572 017c 0000B040 		.word	1085276160
 573 0180 00000000 		.word	buf
 574 0184 00000000 		.word	huart2
 575 0188 00000000 		.word	.LANCHOR1
 576 018c 00080240 		.word	1073874944
 577 0190 00000000 		.word	chanl1_capNum
 578 0194 00000000 		.word	chanl2_capNum
 579 0198 33335340 		.word	1079194419
 580 019c 00000000 		.word	tmp
 581              		.cfi_endproc
 582              	.LFE138:
 584              		.section	.text.HAL_TIM_IC_CaptureCallback,"ax",%progbits
 585              		.align	1
 586              		.global	HAL_TIM_IC_CaptureCallback
 587              		.syntax unified
 588              		.thumb
 589              		.thumb_func
 590              		.fpu fpv4-sp-d16
 592              	HAL_TIM_IC_CaptureCallback:
 593              	.LVL59:
 594              	.LFB139:
 217:Core/Src/mainLoop.c ****       // check_ad9520_status();
 218:Core/Src/mainLoop.c ****     }
 219:Core/Src/mainLoop.c **** 
 220:Core/Src/mainLoop.c ****     while (complete_sign == 0) {
 221:Core/Src/mainLoop.c ****       HAL_Delay(3);
 222:Core/Src/mainLoop.c ****     };
 223:Core/Src/mainLoop.c ****     complete_sign = 0;
 224:Core/Src/mainLoop.c ****     // fre_dif=chanl1_midx - chanl2_midx;
 225:Core/Src/mainLoop.c ****     // printf("%ld = %ld - %ld \n",fre_dif,xx,yy);
 226:Core/Src/mainLoop.c ****     // printf("cha1=%ld,cha2=%ld\n",xx-xx_bak,yy-yy_bak);
 227:Core/Src/mainLoop.c ****     xx_bak = xx;
 228:Core/Src/mainLoop.c ****     yy_bak = yy;
 229:Core/Src/mainLoop.c **** 
 230:Core/Src/mainLoop.c ****     HAL_Delay(2);
 231:Core/Src/mainLoop.c ****   }
 232:Core/Src/mainLoop.c **** }
 233:Core/Src/mainLoop.c **** 
 234:Core/Src/mainLoop.c **** void HAL_TIM_IC_CaptureCallback(TIM_HandleTypeDef *htim) {
 595              		.loc 1 234 58 is_stmt 1 view -0
 596              		.cfi_startproc
 597              		@ args = 0, pretend = 0, frame = 0
 598              		@ frame_needed = 0, uses_anonymous_args = 0
 599              		@ link register save eliminated.
 235:Core/Src/mainLoop.c ****   if (htim->Instance == TIM4) {
 600              		.loc 1 235 3 view .LVU132
 601              		.loc 1 235 11 is_stmt 0 view .LVU133
 602 0000 0368     		ldr	r3, [r0]
 603              		.loc 1 235 6 view .LVU134
 604 0002 104A     		ldr	r2, .L40
 605 0004 9342     		cmp	r3, r2
 606 0006 03D0     		beq	.L37
 236:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1) {
 237:Core/Src/mainLoop.c ****       // chanl1_capNum++;
ARM GAS  /tmp/ccKZYdRz.s 			page 16


 238:Core/Src/mainLoop.c ****       // chanl2_capNum = TIM4->CCR1;
 239:Core/Src/mainLoop.c ****       // xx = TIM4->CCR1;
 240:Core/Src/mainLoop.c ****       // for(i=1;i<CAPNUM;i++){
 241:Core/Src/mainLoop.c ****       //   chanl1_capNum[i-1]=chanl1_capNum[i]-chanl1_capNum[i-1];
 242:Core/Src/mainLoop.c ****       // }
 243:Core/Src/mainLoop.c ****       // yy = TIM4->CCR2;
 244:Core/Src/mainLoop.c ****       // chanl1_completed=1;
 245:Core/Src/mainLoop.c ****       chanl1_midx = chanl1_capNum[CAPNUM / 2 - 2] & 0xffff;
 246:Core/Src/mainLoop.c ****       // chanl2_midx = TIM4->CCR2;
 247:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_1;
 248:Core/Src/mainLoop.c ****     }
 249:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_2) {
 250:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 251:Core/Src/mainLoop.c ****       chanl2_midx = chanl2_capNum[CAPNUM / 2 - 2] & 0xffff;
 252:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 253:Core/Src/mainLoop.c ****     }
 254:Core/Src/mainLoop.c ****   } else if (htim->Instance == TIM1) {
 607              		.loc 1 254 10 is_stmt 1 view .LVU135
 608              		.loc 1 254 13 is_stmt 0 view .LVU136
 609 0008 0F4A     		ldr	r2, .L40+4
 610 000a 9342     		cmp	r3, r2
 611 000c 11D0     		beq	.L38
 612              	.L33:
 255:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_4) {
 256:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 257:Core/Src/mainLoop.c ****       chanl1_midx = chanl1_capNum[CAPNUM / 2 - 2] & 0xffff;
 258:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 259:Core/Src/mainLoop.c ****     }
 260:Core/Src/mainLoop.c ****   }
 261:Core/Src/mainLoop.c **** }
 613              		.loc 1 261 1 view .LVU137
 614 000e 7047     		bx	lr
 615              	.L37:
 236:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1) {
 616              		.loc 1 236 5 is_stmt 1 view .LVU138
 236:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1) {
 617              		.loc 1 236 13 is_stmt 0 view .LVU139
 618 0010 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 236:Core/Src/mainLoop.c ****     if (htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1) {
 619              		.loc 1 236 8 view .LVU140
 620 0012 012B     		cmp	r3, #1
 621 0014 07D0     		beq	.L39
 622              	.L35:
 249:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 623              		.loc 1 249 5 is_stmt 1 view .LVU141
 249:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 624              		.loc 1 249 8 is_stmt 0 view .LVU142
 625 0016 022B     		cmp	r3, #2
 626 0018 F9D1     		bne	.L33
 251:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 627              		.loc 1 251 7 is_stmt 1 view .LVU143
 251:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 628              		.loc 1 251 51 is_stmt 0 view .LVU144
 629 001a 0C4B     		ldr	r3, .L40+8
 630 001c B3F8C020 		ldrh	r2, [r3, #192]
 251:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 631              		.loc 1 251 19 view .LVU145
ARM GAS  /tmp/ccKZYdRz.s 			page 17


 632 0020 0B4B     		ldr	r3, .L40+12
 633 0022 1A60     		str	r2, [r3]
 634 0024 7047     		bx	lr
 635              	.L39:
 245:Core/Src/mainLoop.c ****       // chanl2_midx = TIM4->CCR2;
 636              		.loc 1 245 7 is_stmt 1 view .LVU146
 245:Core/Src/mainLoop.c ****       // chanl2_midx = TIM4->CCR2;
 637              		.loc 1 245 51 is_stmt 0 view .LVU147
 638 0026 0B4A     		ldr	r2, .L40+16
 639 0028 B2F8C010 		ldrh	r1, [r2, #192]
 245:Core/Src/mainLoop.c ****       // chanl2_midx = TIM4->CCR2;
 640              		.loc 1 245 19 view .LVU148
 641 002c 0A4A     		ldr	r2, .L40+20
 642 002e 1160     		str	r1, [r2]
 643 0030 F1E7     		b	.L35
 644              	.L38:
 255:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 645              		.loc 1 255 5 is_stmt 1 view .LVU149
 255:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 646              		.loc 1 255 13 is_stmt 0 view .LVU150
 647 0032 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 255:Core/Src/mainLoop.c ****       // chanl2_capNum++;
 648              		.loc 1 255 8 view .LVU151
 649 0034 082B     		cmp	r3, #8
 650 0036 EAD1     		bne	.L33
 257:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 651              		.loc 1 257 7 is_stmt 1 view .LVU152
 257:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 652              		.loc 1 257 51 is_stmt 0 view .LVU153
 653 0038 064B     		ldr	r3, .L40+16
 654 003a B3F8C020 		ldrh	r2, [r3, #192]
 257:Core/Src/mainLoop.c ****       // htim->Channel &= ~HAL_TIM_ACTIVE_CHANNEL_2;
 655              		.loc 1 257 19 view .LVU154
 656 003e 064B     		ldr	r3, .L40+20
 657 0040 1A60     		str	r2, [r3]
 658              		.loc 1 261 1 view .LVU155
 659 0042 E4E7     		b	.L33
 660              	.L41:
 661              		.align	2
 662              	.L40:
 663 0044 00080040 		.word	1073743872
 664 0048 00000140 		.word	1073807360
 665 004c 00000000 		.word	chanl2_capNum
 666 0050 00000000 		.word	.LANCHOR3
 667 0054 00000000 		.word	chanl1_capNum
 668 0058 00000000 		.word	.LANCHOR2
 669              		.cfi_endproc
 670              	.LFE139:
 672              		.section	.text.HAL_TIM_PeriodElapsedCallback,"ax",%progbits
 673              		.align	1
 674              		.global	HAL_TIM_PeriodElapsedCallback
 675              		.syntax unified
 676              		.thumb
 677              		.thumb_func
 678              		.fpu fpv4-sp-d16
 680              	HAL_TIM_PeriodElapsedCallback:
 681              	.LVL60:
ARM GAS  /tmp/ccKZYdRz.s 			page 18


 682              	.LFB140:
 262:Core/Src/mainLoop.c **** 
 263:Core/Src/mainLoop.c **** void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim) {
 683              		.loc 1 263 61 is_stmt 1 view -0
 684              		.cfi_startproc
 685              		@ args = 0, pretend = 0, frame = 0
 686              		@ frame_needed = 0, uses_anonymous_args = 0
 687              		.loc 1 263 61 is_stmt 0 view .LVU157
 688 0000 08B5     		push	{r3, lr}
 689              	.LCFI8:
 690              		.cfi_def_cfa_offset 8
 691              		.cfi_offset 3, -8
 692              		.cfi_offset 14, -4
 264:Core/Src/mainLoop.c ****   // htim4.Init.Period = 65535; 1ms ÂÆöÊó∂
 265:Core/Src/mainLoop.c ****   //  if(htim == &htim4){
 266:Core/Src/mainLoop.c ****   //    HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 267:Core/Src/mainLoop.c ****   //    xx= HAL_TIM_ReadCapturedValue(&htim4, TIM_CHANNEL_1);
 268:Core/Src/mainLoop.c **** 
 269:Core/Src/mainLoop.c ****   //   yy = TIM4->CCR2;
 270:Core/Src/mainLoop.c ****   //   //TIM4->CCR1=0;
 271:Core/Src/mainLoop.c ****   //   //TIM4->CCR2=0;
 272:Core/Src/mainLoop.c ****   //   fre_dif = xx - yy;
 273:Core/Src/mainLoop.c ****   // }
 274:Core/Src/mainLoop.c ****   if (htim == &htim5) {
 693              		.loc 1 274 3 is_stmt 1 view .LVU158
 694              		.loc 1 274 6 is_stmt 0 view .LVU159
 695 0002 0C4B     		ldr	r3, .L46
 696 0004 8342     		cmp	r3, r0
 697 0006 00D0     		beq	.L45
 698              	.LVL61:
 699              	.L42:
 275:Core/Src/mainLoop.c ****     xx = TIM4->CNT;
 276:Core/Src/mainLoop.c ****     // yy = TIM4->CCR2;
 277:Core/Src/mainLoop.c ****     yy = TIM1->CNT;
 278:Core/Src/mainLoop.c ****     fre_dif = xx - yy;
 279:Core/Src/mainLoop.c ****     complete_sign = 1;
 280:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 281:Core/Src/mainLoop.c ****   }
 282:Core/Src/mainLoop.c ****   // if(htim == &htim1){
 283:Core/Src/mainLoop.c ****   //   xx_cnt++;
 284:Core/Src/mainLoop.c ****   // }
 285:Core/Src/mainLoop.c ****   // if(htim == &htim4){
 286:Core/Src/mainLoop.c ****   //   yy_cnt++;
 287:Core/Src/mainLoop.c ****   // }
 288:Core/Src/mainLoop.c **** }
 700              		.loc 1 288 1 view .LVU160
 701 0008 08BD     		pop	{r3, pc}
 702              	.LVL62:
 703              	.L45:
 275:Core/Src/mainLoop.c ****     xx = TIM4->CNT;
 704              		.loc 1 275 5 is_stmt 1 view .LVU161
 275:Core/Src/mainLoop.c ****     xx = TIM4->CNT;
 705              		.loc 1 275 14 is_stmt 0 view .LVU162
 706 000a 0B4B     		ldr	r3, .L46+4
 707 000c 5B6A     		ldr	r3, [r3, #36]
 275:Core/Src/mainLoop.c ****     xx = TIM4->CNT;
 708              		.loc 1 275 8 view .LVU163
ARM GAS  /tmp/ccKZYdRz.s 			page 19


 709 000e 0B4A     		ldr	r2, .L46+8
 710 0010 1360     		str	r3, [r2]
 277:Core/Src/mainLoop.c ****     fre_dif = xx - yy;
 711              		.loc 1 277 5 is_stmt 1 view .LVU164
 277:Core/Src/mainLoop.c ****     fre_dif = xx - yy;
 712              		.loc 1 277 14 is_stmt 0 view .LVU165
 713 0012 0B4A     		ldr	r2, .L46+12
 714 0014 526A     		ldr	r2, [r2, #36]
 277:Core/Src/mainLoop.c ****     fre_dif = xx - yy;
 715              		.loc 1 277 8 view .LVU166
 716 0016 0B49     		ldr	r1, .L46+16
 717 0018 0A60     		str	r2, [r1]
 278:Core/Src/mainLoop.c ****     complete_sign = 1;
 718              		.loc 1 278 5 is_stmt 1 view .LVU167
 278:Core/Src/mainLoop.c ****     complete_sign = 1;
 719              		.loc 1 278 18 is_stmt 0 view .LVU168
 720 001a 9B1A     		subs	r3, r3, r2
 278:Core/Src/mainLoop.c ****     complete_sign = 1;
 721              		.loc 1 278 13 view .LVU169
 722 001c 0A4A     		ldr	r2, .L46+20
 723 001e 1360     		str	r3, [r2]
 279:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 724              		.loc 1 279 5 is_stmt 1 view .LVU170
 279:Core/Src/mainLoop.c ****     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 725              		.loc 1 279 19 is_stmt 0 view .LVU171
 726 0020 0A4B     		ldr	r3, .L46+24
 727 0022 0122     		movs	r2, #1
 728 0024 1A60     		str	r2, [r3]
 280:Core/Src/mainLoop.c ****   }
 729              		.loc 1 280 5 is_stmt 1 view .LVU172
 730 0026 4FF40061 		mov	r1, #2048
 731 002a 0948     		ldr	r0, .L46+28
 732              	.LVL63:
 280:Core/Src/mainLoop.c ****   }
 733              		.loc 1 280 5 is_stmt 0 view .LVU173
 734 002c FFF7FEFF 		bl	HAL_GPIO_TogglePin
 735              	.LVL64:
 736              		.loc 1 288 1 view .LVU174
 737 0030 EAE7     		b	.L42
 738              	.L47:
 739 0032 00BF     		.align	2
 740              	.L46:
 741 0034 00000000 		.word	htim5
 742 0038 00080040 		.word	1073743872
 743 003c 00000000 		.word	xx
 744 0040 00000140 		.word	1073807360
 745 0044 00000000 		.word	yy
 746 0048 00000000 		.word	.LANCHOR0
 747 004c 00000000 		.word	complete_sign
 748 0050 00080240 		.word	1073874944
 749              		.cfi_endproc
 750              	.LFE140:
 752              		.global	__aeabi_d2f
 753              		.global	__aeabi_dsub
 754              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 755              		.align	1
 756              		.global	HAL_UART_RxCpltCallback
ARM GAS  /tmp/ccKZYdRz.s 			page 20


 757              		.syntax unified
 758              		.thumb
 759              		.thumb_func
 760              		.fpu fpv4-sp-d16
 762              	HAL_UART_RxCpltCallback:
 763              	.LVL65:
 764              	.LFB141:
 289:Core/Src/mainLoop.c **** 
 290:Core/Src/mainLoop.c **** // void HAL_GPIO_EXTI_Callback( uint16_t GPIO_Pin)
 291:Core/Src/mainLoop.c **** // {
 292:Core/Src/mainLoop.c **** // 	if(GPIO_Pin == capture_sig_it_Pin){
 293:Core/Src/mainLoop.c **** // 	   //This block will be triggered after pin activated.
 294:Core/Src/mainLoop.c **** //      chanl2_capNum++;
 295:Core/Src/mainLoop.c **** // 	}
 296:Core/Src/mainLoop.c **** // }
 297:Core/Src/mainLoop.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart) {
 765              		.loc 1 297 57 is_stmt 1 view -0
 766              		.cfi_startproc
 767              		@ args = 0, pretend = 0, frame = 0
 768              		@ frame_needed = 0, uses_anonymous_args = 0
 298:Core/Src/mainLoop.c ****   if (huart == &huart2) {
 769              		.loc 1 298 3 view .LVU176
 770              		.loc 1 298 6 is_stmt 0 view .LVU177
 771 0000 514B     		ldr	r3, .L63+24
 772 0002 8342     		cmp	r3, r0
 773 0004 00D0     		beq	.L58
 774 0006 7047     		bx	lr
 775              	.L58:
 297:Core/Src/mainLoop.c ****   if (huart == &huart2) {
 776              		.loc 1 297 57 view .LVU178
 777 0008 10B5     		push	{r4, lr}
 778              	.LCFI9:
 779              		.cfi_def_cfa_offset 8
 780              		.cfi_offset 4, -8
 781              		.cfi_offset 14, -4
 299:Core/Src/mainLoop.c ****     // xx++;
 300:Core/Src/mainLoop.c ****     // uint8_t tmp = (uint16_t)(huart->Instance->DR & (uint16_t)0x01FF);
 301:Core/Src/mainLoop.c ****     if (buf[0] == 'u') {
 782              		.loc 1 301 5 is_stmt 1 view .LVU179
 783              		.loc 1 301 12 is_stmt 0 view .LVU180
 784 000a 504B     		ldr	r3, .L63+28
 785 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 786              		.loc 1 301 8 view .LVU181
 787 000e 752B     		cmp	r3, #117
 788 0010 0BD0     		beq	.L59
 302:Core/Src/mainLoop.c ****       // HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 303:Core/Src/mainLoop.c ****       v_dianya += 0.1;
 304:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 305:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 306:Core/Src/mainLoop.c ****     } else if (buf[0] == 'd') {
 789              		.loc 1 306 12 is_stmt 1 view .LVU182
 790              		.loc 1 306 15 is_stmt 0 view .LVU183
 791 0012 642B     		cmp	r3, #100
 792 0014 29D0     		beq	.L60
 307:Core/Src/mainLoop.c ****       // HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 308:Core/Src/mainLoop.c ****       v_dianya -= 0.1;
 309:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
ARM GAS  /tmp/ccKZYdRz.s 			page 21


 310:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 311:Core/Src/mainLoop.c ****     } else if (buf[0] == 'r') {
 793              		.loc 1 311 12 is_stmt 1 view .LVU184
 794              		.loc 1 311 15 is_stmt 0 view .LVU185
 795 0016 722B     		cmp	r3, #114
 796 0018 47D0     		beq	.L61
 312:Core/Src/mainLoop.c ****       v_dianya += 0.01;
 313:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 314:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 315:Core/Src/mainLoop.c ****     } else if (buf[0] == 'x') {
 797              		.loc 1 315 12 is_stmt 1 view .LVU186
 798              		.loc 1 315 15 is_stmt 0 view .LVU187
 799 001a 782B     		cmp	r3, #120
 800 001c 65D0     		beq	.L62
 801              	.LVL66:
 802              	.L51:
 316:Core/Src/mainLoop.c ****       v_dianya -= 0.01;
 317:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 318:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 319:Core/Src/mainLoop.c ****     }
 320:Core/Src/mainLoop.c ****     HAL_UART_Receive_IT(&huart2, (uint8_t *)(buf), 1);
 803              		.loc 1 320 5 is_stmt 1 view .LVU188
 804 001e 0122     		movs	r2, #1
 805 0020 4A49     		ldr	r1, .L63+28
 806 0022 4948     		ldr	r0, .L63+24
 807 0024 FFF7FEFF 		bl	HAL_UART_Receive_IT
 808              	.LVL67:
 321:Core/Src/mainLoop.c ****   }
 322:Core/Src/mainLoop.c **** }
 809              		.loc 1 322 1 is_stmt 0 view .LVU189
 810 0028 10BD     		pop	{r4, pc}
 811              	.LVL68:
 812              	.L59:
 303:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 813              		.loc 1 303 7 is_stmt 1 view .LVU190
 303:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 814              		.loc 1 303 16 is_stmt 0 view .LVU191
 815 002a 494C     		ldr	r4, .L63+32
 816 002c 2068     		ldr	r0, [r4]	@ float
 817              	.LVL69:
 303:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 818              		.loc 1 303 16 view .LVU192
 819 002e FFF7FEFF 		bl	__aeabi_f2d
 820              	.LVL70:
 821 0032 3FA3     		adr	r3, .L63
 822 0034 D3E90023 		ldrd	r2, [r3]
 823 0038 FFF7FEFF 		bl	__aeabi_dadd
 824              	.LVL71:
 825 003c FFF7FEFF 		bl	__aeabi_d2f
 826              	.LVL72:
 827 0040 2060     		str	r0, [r4]	@ float
 304:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 828              		.loc 1 304 7 is_stmt 1 view .LVU193
 305:Core/Src/mainLoop.c ****     } else if (buf[0] == 'd') {
 829              		.loc 1 305 45 is_stmt 0 view .LVU194
 830 0042 FFF7FEFF 		bl	__aeabi_f2d
 831              	.LVL73:
ARM GAS  /tmp/ccKZYdRz.s 			page 22


 832 0046 3CA3     		adr	r3, .L63+8
 833 0048 D3E90023 		ldrd	r2, [r3]
 834 004c FFF7FEFF 		bl	__aeabi_ddiv
 835              	.LVL74:
 305:Core/Src/mainLoop.c ****     } else if (buf[0] == 'd') {
 836              		.loc 1 305 52 view .LVU195
 837 0050 0022     		movs	r2, #0
 838 0052 404B     		ldr	r3, .L63+36
 839 0054 FFF7FEFF 		bl	__aeabi_dmul
 840              	.LVL75:
 304:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 841              		.loc 1 304 7 view .LVU196
 842 0058 FFF7FEFF 		bl	__aeabi_d2uiz
 843              	.LVL76:
 844 005c 0346     		mov	r3, r0
 845 005e 0022     		movs	r2, #0
 846 0060 1146     		mov	r1, r2
 847 0062 3D48     		ldr	r0, .L63+40
 848 0064 FFF7FEFF 		bl	HAL_DAC_SetValue
 849              	.LVL77:
 850 0068 D9E7     		b	.L51
 851              	.LVL78:
 852              	.L60:
 308:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 853              		.loc 1 308 7 is_stmt 1 view .LVU197
 308:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 854              		.loc 1 308 16 is_stmt 0 view .LVU198
 855 006a 394C     		ldr	r4, .L63+32
 856 006c 2068     		ldr	r0, [r4]	@ float
 857              	.LVL79:
 308:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 858              		.loc 1 308 16 view .LVU199
 859 006e FFF7FEFF 		bl	__aeabi_f2d
 860              	.LVL80:
 861 0072 2FA3     		adr	r3, .L63
 862 0074 D3E90023 		ldrd	r2, [r3]
 863 0078 FFF7FEFF 		bl	__aeabi_dsub
 864              	.LVL81:
 865 007c FFF7FEFF 		bl	__aeabi_d2f
 866              	.LVL82:
 867 0080 2060     		str	r0, [r4]	@ float
 309:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 868              		.loc 1 309 7 is_stmt 1 view .LVU200
 310:Core/Src/mainLoop.c ****     } else if (buf[0] == 'r') {
 869              		.loc 1 310 45 is_stmt 0 view .LVU201
 870 0082 FFF7FEFF 		bl	__aeabi_f2d
 871              	.LVL83:
 872 0086 2CA3     		adr	r3, .L63+8
 873 0088 D3E90023 		ldrd	r2, [r3]
 874 008c FFF7FEFF 		bl	__aeabi_ddiv
 875              	.LVL84:
 310:Core/Src/mainLoop.c ****     } else if (buf[0] == 'r') {
 876              		.loc 1 310 52 view .LVU202
 877 0090 0022     		movs	r2, #0
 878 0092 304B     		ldr	r3, .L63+36
 879 0094 FFF7FEFF 		bl	__aeabi_dmul
 880              	.LVL85:
ARM GAS  /tmp/ccKZYdRz.s 			page 23


 309:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 881              		.loc 1 309 7 view .LVU203
 882 0098 FFF7FEFF 		bl	__aeabi_d2uiz
 883              	.LVL86:
 884 009c 0346     		mov	r3, r0
 885 009e 0022     		movs	r2, #0
 886 00a0 1146     		mov	r1, r2
 887 00a2 2D48     		ldr	r0, .L63+40
 888 00a4 FFF7FEFF 		bl	HAL_DAC_SetValue
 889              	.LVL87:
 890 00a8 B9E7     		b	.L51
 891              	.LVL88:
 892              	.L61:
 312:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 893              		.loc 1 312 7 is_stmt 1 view .LVU204
 312:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 894              		.loc 1 312 16 is_stmt 0 view .LVU205
 895 00aa 294C     		ldr	r4, .L63+32
 896 00ac 2068     		ldr	r0, [r4]	@ float
 897              	.LVL89:
 312:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 898              		.loc 1 312 16 view .LVU206
 899 00ae FFF7FEFF 		bl	__aeabi_f2d
 900              	.LVL90:
 901 00b2 23A3     		adr	r3, .L63+16
 902 00b4 D3E90023 		ldrd	r2, [r3]
 903 00b8 FFF7FEFF 		bl	__aeabi_dadd
 904              	.LVL91:
 905 00bc FFF7FEFF 		bl	__aeabi_d2f
 906              	.LVL92:
 907 00c0 2060     		str	r0, [r4]	@ float
 313:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 908              		.loc 1 313 7 is_stmt 1 view .LVU207
 314:Core/Src/mainLoop.c ****     } else if (buf[0] == 'x') {
 909              		.loc 1 314 45 is_stmt 0 view .LVU208
 910 00c2 FFF7FEFF 		bl	__aeabi_f2d
 911              	.LVL93:
 912 00c6 1CA3     		adr	r3, .L63+8
 913 00c8 D3E90023 		ldrd	r2, [r3]
 914 00cc FFF7FEFF 		bl	__aeabi_ddiv
 915              	.LVL94:
 314:Core/Src/mainLoop.c ****     } else if (buf[0] == 'x') {
 916              		.loc 1 314 52 view .LVU209
 917 00d0 0022     		movs	r2, #0
 918 00d2 204B     		ldr	r3, .L63+36
 919 00d4 FFF7FEFF 		bl	__aeabi_dmul
 920              	.LVL95:
 313:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 921              		.loc 1 313 7 view .LVU210
 922 00d8 FFF7FEFF 		bl	__aeabi_d2uiz
 923              	.LVL96:
 924 00dc 0346     		mov	r3, r0
 925 00de 0022     		movs	r2, #0
 926 00e0 1146     		mov	r1, r2
 927 00e2 1D48     		ldr	r0, .L63+40
 928 00e4 FFF7FEFF 		bl	HAL_DAC_SetValue
 929              	.LVL97:
ARM GAS  /tmp/ccKZYdRz.s 			page 24


 930 00e8 99E7     		b	.L51
 931              	.LVL98:
 932              	.L62:
 316:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 933              		.loc 1 316 7 is_stmt 1 view .LVU211
 316:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 934              		.loc 1 316 16 is_stmt 0 view .LVU212
 935 00ea 194C     		ldr	r4, .L63+32
 936 00ec 2068     		ldr	r0, [r4]	@ float
 937              	.LVL99:
 316:Core/Src/mainLoop.c ****       HAL_DAC_SetValue(&hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R,
 938              		.loc 1 316 16 view .LVU213
 939 00ee FFF7FEFF 		bl	__aeabi_f2d
 940              	.LVL100:
 941 00f2 13A3     		adr	r3, .L63+16
 942 00f4 D3E90023 		ldrd	r2, [r3]
 943 00f8 FFF7FEFF 		bl	__aeabi_dsub
 944              	.LVL101:
 945 00fc FFF7FEFF 		bl	__aeabi_d2f
 946              	.LVL102:
 947 0100 2060     		str	r0, [r4]	@ float
 317:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 948              		.loc 1 317 7 is_stmt 1 view .LVU214
 318:Core/Src/mainLoop.c ****     }
 949              		.loc 1 318 45 is_stmt 0 view .LVU215
 950 0102 FFF7FEFF 		bl	__aeabi_f2d
 951              	.LVL103:
 952 0106 0CA3     		adr	r3, .L63+8
 953 0108 D3E90023 		ldrd	r2, [r3]
 954 010c FFF7FEFF 		bl	__aeabi_ddiv
 955              	.LVL104:
 318:Core/Src/mainLoop.c ****     }
 956              		.loc 1 318 52 view .LVU216
 957 0110 0022     		movs	r2, #0
 958 0112 104B     		ldr	r3, .L63+36
 959 0114 FFF7FEFF 		bl	__aeabi_dmul
 960              	.LVL105:
 317:Core/Src/mainLoop.c ****                        (uint32_t)((v_dianya / 3.3) * 4096));
 961              		.loc 1 317 7 view .LVU217
 962 0118 FFF7FEFF 		bl	__aeabi_d2uiz
 963              	.LVL106:
 964 011c 0346     		mov	r3, r0
 965 011e 0022     		movs	r2, #0
 966 0120 1146     		mov	r1, r2
 967 0122 0D48     		ldr	r0, .L63+40
 968 0124 FFF7FEFF 		bl	HAL_DAC_SetValue
 969              	.LVL107:
 970 0128 79E7     		b	.L51
 971              	.L64:
 972 012a 00BFAFF3 		.align	3
 972      0080
 973              	.L63:
 974 0130 9A999999 		.word	2576980378
 975 0134 9999B93F 		.word	1069128089
 976 0138 66666666 		.word	1717986918
 977 013c 66660A40 		.word	1074423398
 978 0140 7B14AE47 		.word	1202590843
ARM GAS  /tmp/ccKZYdRz.s 			page 25


 979 0144 E17A843F 		.word	1065646817
 980 0148 00000000 		.word	huart2
 981 014c 00000000 		.word	buf
 982 0150 00000000 		.word	v_dianya
 983 0154 0000B040 		.word	1085276160
 984 0158 00000000 		.word	hdac
 985              		.cfi_endproc
 986              	.LFE141:
 988              		.section	.text.set_dac_initVal,"ax",%progbits
 989              		.align	1
 990              		.global	set_dac_initVal
 991              		.syntax unified
 992              		.thumb
 993              		.thumb_func
 994              		.fpu fpv4-sp-d16
 996              	set_dac_initVal:
 997              	.LVL108:
 998              	.LFB142:
 323:Core/Src/mainLoop.c **** 
 324:Core/Src/mainLoop.c **** void set_dac_initVal(uint32_t *val) {
 999              		.loc 1 324 37 is_stmt 1 view -0
 1000              		.cfi_startproc
 1001              		@ args = 0, pretend = 0, frame = 0
 1002              		@ frame_needed = 0, uses_anonymous_args = 0
 1003              		.loc 1 324 37 is_stmt 0 view .LVU219
 1004 0000 10B5     		push	{r4, lr}
 1005              	.LCFI10:
 1006              		.cfi_def_cfa_offset 8
 1007              		.cfi_offset 4, -8
 1008              		.cfi_offset 14, -4
 1009 0002 0446     		mov	r4, r0
 325:Core/Src/mainLoop.c ****   // set all dac val
 326:Core/Src/mainLoop.c **** 
 327:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch1, *(val + 0), max_outdisable);
 1010              		.loc 1 327 3 is_stmt 1 view .LVU220
 1011 0004 0222     		movs	r2, #2
 1012 0006 0168     		ldr	r1, [r0]
 1013 0008 1046     		mov	r0, r2
 1014              	.LVL109:
 1015              		.loc 1 327 3 is_stmt 0 view .LVU221
 1016 000a FFF7FEFF 		bl	max5307_w_chanel
 1017              	.LVL110:
 328:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch2, *(val + 1), max_outdisable);
 1018              		.loc 1 328 3 is_stmt 1 view .LVU222
 1019 000e 0222     		movs	r2, #2
 1020 0010 6168     		ldr	r1, [r4, #4]
 1021 0012 0320     		movs	r0, #3
 1022 0014 FFF7FEFF 		bl	max5307_w_chanel
 1023              	.LVL111:
 329:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch3, *(val + 2), max_outdisable);
 1024              		.loc 1 329 3 view .LVU223
 1025 0018 0222     		movs	r2, #2
 1026 001a A168     		ldr	r1, [r4, #8]
 1027 001c 0420     		movs	r0, #4
 1028 001e FFF7FEFF 		bl	max5307_w_chanel
 1029              	.LVL112:
 330:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch4, *(val + 3), max_outdisable);
ARM GAS  /tmp/ccKZYdRz.s 			page 26


 1030              		.loc 1 330 3 view .LVU224
 1031 0022 0222     		movs	r2, #2
 1032 0024 E168     		ldr	r1, [r4, #12]
 1033 0026 0520     		movs	r0, #5
 1034 0028 FFF7FEFF 		bl	max5307_w_chanel
 1035              	.LVL113:
 331:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch5, *(val + 4), max_outdisable);
 1036              		.loc 1 331 3 view .LVU225
 1037 002c 0222     		movs	r2, #2
 1038 002e 2169     		ldr	r1, [r4, #16]
 1039 0030 0620     		movs	r0, #6
 1040 0032 FFF7FEFF 		bl	max5307_w_chanel
 1041              	.LVL114:
 332:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch6, *(val + 5), max_outdisable);
 1042              		.loc 1 332 3 view .LVU226
 1043 0036 0222     		movs	r2, #2
 1044 0038 6169     		ldr	r1, [r4, #20]
 1045 003a 0720     		movs	r0, #7
 1046 003c FFF7FEFF 		bl	max5307_w_chanel
 1047              	.LVL115:
 333:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch7, *(val + 6), max_outdisable);
 1048              		.loc 1 333 3 view .LVU227
 1049 0040 0222     		movs	r2, #2
 1050 0042 A169     		ldr	r1, [r4, #24]
 1051 0044 0820     		movs	r0, #8
 1052 0046 FFF7FEFF 		bl	max5307_w_chanel
 1053              	.LVL116:
 334:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch8, *(val + 7), max_outdisable);
 1054              		.loc 1 334 3 view .LVU228
 1055 004a 0222     		movs	r2, #2
 1056 004c E169     		ldr	r1, [r4, #28]
 1057 004e 0920     		movs	r0, #9
 1058 0050 FFF7FEFF 		bl	max5307_w_chanel
 1059              	.LVL117:
 335:Core/Src/mainLoop.c **** 
 336:Core/Src/mainLoop.c ****   max5307_loadpin();
 1060              		.loc 1 336 3 view .LVU229
 1061 0054 FFF7FEFF 		bl	max5307_loadpin
 1062              	.LVL118:
 337:Core/Src/mainLoop.c **** }
 1063              		.loc 1 337 1 is_stmt 0 view .LVU230
 1064 0058 10BD     		pop	{r4, pc}
 1065              		.loc 1 337 1 view .LVU231
 1066              		.cfi_endproc
 1067              	.LFE142:
 1069              		.section	.text.cal_k_value_cp,"ax",%progbits
 1070              		.align	1
 1071              		.global	cal_k_value_cp
 1072              		.syntax unified
 1073              		.thumb
 1074              		.thumb_func
 1075              		.fpu fpv4-sp-d16
 1077              	cal_k_value_cp:
 1078              	.LFB143:
 338:Core/Src/mainLoop.c **** #define ADC_BUF_SIZE 4000  // 200=1ms
 339:Core/Src/mainLoop.c **** #define ADC_TIMES_N (ADC_BUF_SIZE * 2)
 340:Core/Src/mainLoop.c **** uint32_t value_adc1[ADC_BUF_SIZE], value_adc2[ADC_BUF_SIZE];
ARM GAS  /tmp/ccKZYdRz.s 			page 27


 341:Core/Src/mainLoop.c **** #define CP_TIMES_N (ADC_TIMES_N)
 342:Core/Src/mainLoop.c **** int32_t value_cp[CP_TIMES_N];
 343:Core/Src/mainLoop.c **** 
 344:Core/Src/mainLoop.c **** int32_t cal_k_value_cp(void) {  // cal k
 1079              		.loc 1 344 30 is_stmt 1 view -0
 1080              		.cfi_startproc
 1081              		@ args = 0, pretend = 0, frame = 0
 1082              		@ frame_needed = 0, uses_anonymous_args = 0
 1083              		@ link register save eliminated.
 1084 0000 10B4     		push	{r4}
 1085              	.LCFI11:
 1086              		.cfi_def_cfa_offset 4
 1087              		.cfi_offset 4, -4
 345:Core/Src/mainLoop.c ****   int32_t kUp = 0, kDown = 0;
 1088              		.loc 1 345 3 view .LVU233
 1089              	.LVL119:
 346:Core/Src/mainLoop.c ****   int32_t i = 0;
 1090              		.loc 1 346 3 view .LVU234
 347:Core/Src/mainLoop.c ****   for (i = 1; i < CP_TIMES_N; i++) {
 1091              		.loc 1 347 3 view .LVU235
 1092              		.loc 1 347 10 is_stmt 0 view .LVU236
 1093 0002 0123     		movs	r3, #1
 1094              	.LVL120:
 1095              	.L68:
 1096              		.loc 1 347 15 is_stmt 1 discriminator 1 view .LVU237
 1097              		.loc 1 347 3 is_stmt 0 discriminator 1 view .LVU238
 1098 0004 B3F5FA5F 		cmp	r3, #8000
 1099 0008 0ADA     		bge	.L75
 348:Core/Src/mainLoop.c ****     value_cp[i - 1] = value_cp[i] - value_cp[i - 1];
 1100              		.loc 1 348 5 is_stmt 1 discriminator 3 view .LVU239
 1101              		.loc 1 348 31 is_stmt 0 discriminator 3 view .LVU240
 1102 000a 144A     		ldr	r2, .L77
 1103 000c 52F82310 		ldr	r1, [r2, r3, lsl #2]
 1104              		.loc 1 348 48 discriminator 3 view .LVU241
 1105 0010 581E     		subs	r0, r3, #1
 1106              		.loc 1 348 45 discriminator 3 view .LVU242
 1107 0012 52F82040 		ldr	r4, [r2, r0, lsl #2]
 1108              		.loc 1 348 35 discriminator 3 view .LVU243
 1109 0016 091B     		subs	r1, r1, r4
 1110              		.loc 1 348 21 discriminator 3 view .LVU244
 1111 0018 42F82010 		str	r1, [r2, r0, lsl #2]
 347:Core/Src/mainLoop.c ****   for (i = 1; i < CP_TIMES_N; i++) {
 1112              		.loc 1 347 31 is_stmt 1 discriminator 3 view .LVU245
 347:Core/Src/mainLoop.c ****   for (i = 1; i < CP_TIMES_N; i++) {
 1113              		.loc 1 347 32 is_stmt 0 discriminator 3 view .LVU246
 1114 001c 0133     		adds	r3, r3, #1
 1115              	.LVL121:
 347:Core/Src/mainLoop.c ****   for (i = 1; i < CP_TIMES_N; i++) {
 1116              		.loc 1 347 32 discriminator 3 view .LVU247
 1117 001e F1E7     		b	.L68
 1118              	.L75:
 349:Core/Src/mainLoop.c ****   }
 350:Core/Src/mainLoop.c ****   value_cp[CP_TIMES_N - 1] = 0;
 1119              		.loc 1 350 3 is_stmt 1 view .LVU248
 1120              		.loc 1 350 28 is_stmt 0 view .LVU249
 1121 0020 0020     		movs	r0, #0
 1122 0022 0E4A     		ldr	r2, .L77
ARM GAS  /tmp/ccKZYdRz.s 			page 28


 1123 0024 47F6FC43 		movw	r3, #31996
 1124              	.LVL122:
 1125              		.loc 1 350 28 view .LVU250
 1126 0028 D050     		str	r0, [r2, r3]
 351:Core/Src/mainLoop.c **** 
 352:Core/Src/mainLoop.c ****   for (i = 0; i < CP_TIMES_N; i++) {
 1127              		.loc 1 352 3 is_stmt 1 view .LVU251
 1128              	.LVL123:
 1129              		.loc 1 352 10 is_stmt 0 view .LVU252
 1130 002a 0346     		mov	r3, r0
 345:Core/Src/mainLoop.c ****   int32_t i = 0;
 1131              		.loc 1 345 20 view .LVU253
 1132 002c 0446     		mov	r4, r0
 1133              		.loc 1 352 3 view .LVU254
 1134 002e 01E0     		b	.L70
 1135              	.LVL124:
 1136              	.L72:
 1137              	.LBB2:
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 354:Core/Src/mainLoop.c ****       if (value_cp[i] > 0) {
 355:Core/Src/mainLoop.c ****         kUp += 1;
 356:Core/Src/mainLoop.c ****       } else {
 357:Core/Src/mainLoop.c ****         kDown += 1;
 1138              		.loc 1 357 9 is_stmt 1 view .LVU255
 1139              		.loc 1 357 15 is_stmt 0 view .LVU256
 1140 0030 0134     		adds	r4, r4, #1
 1141              	.LVL125:
 1142              	.L71:
 1143              		.loc 1 357 15 view .LVU257
 1144              	.LBE2:
 352:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1145              		.loc 1 352 31 is_stmt 1 discriminator 2 view .LVU258
 352:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1146              		.loc 1 352 32 is_stmt 0 discriminator 2 view .LVU259
 1147 0032 0133     		adds	r3, r3, #1
 1148              	.LVL126:
 1149              	.L70:
 352:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1150              		.loc 1 352 15 is_stmt 1 discriminator 1 view .LVU260
 352:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1151              		.loc 1 352 3 is_stmt 0 discriminator 1 view .LVU261
 1152 0034 B3F5FA5F 		cmp	r3, #8000
 1153 0038 0CDA     		bge	.L76
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1154              		.loc 1 353 5 is_stmt 1 view .LVU262
 1155              	.LBB3:
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1156              		.loc 1 353 21 is_stmt 0 view .LVU263
 1157 003a 084A     		ldr	r2, .L77
 1158 003c 52F82320 		ldr	r2, [r2, r3, lsl #2]
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1159              		.loc 1 353 9 view .LVU264
 1160 0040 82EAE271 		eor	r1, r2, r2, asr #31
 1161 0044 A1EBE271 		sub	r1, r1, r2, asr #31
 353:Core/Src/mainLoop.c ****     if (abs(value_cp[i]) >= 5) {
 1162              		.loc 1 353 8 view .LVU265
 1163 0048 0429     		cmp	r1, #4
ARM GAS  /tmp/ccKZYdRz.s 			page 29


 1164 004a F2DD     		ble	.L71
 354:Core/Src/mainLoop.c ****         kUp += 1;
 1165              		.loc 1 354 7 is_stmt 1 view .LVU266
 354:Core/Src/mainLoop.c ****         kUp += 1;
 1166              		.loc 1 354 10 is_stmt 0 view .LVU267
 1167 004c 002A     		cmp	r2, #0
 1168 004e EFDD     		ble	.L72
 355:Core/Src/mainLoop.c ****       } else {
 1169              		.loc 1 355 9 is_stmt 1 view .LVU268
 355:Core/Src/mainLoop.c ****       } else {
 1170              		.loc 1 355 13 is_stmt 0 view .LVU269
 1171 0050 0130     		adds	r0, r0, #1
 1172              	.LVL127:
 355:Core/Src/mainLoop.c ****       } else {
 1173              		.loc 1 355 13 view .LVU270
 1174 0052 EEE7     		b	.L71
 1175              	.L76:
 355:Core/Src/mainLoop.c ****       } else {
 1176              		.loc 1 355 13 view .LVU271
 1177              	.LBE3:
 358:Core/Src/mainLoop.c ****       }
 359:Core/Src/mainLoop.c ****     }
 360:Core/Src/mainLoop.c ****   }
 361:Core/Src/mainLoop.c ****   return (kDown - kUp);
 1178              		.loc 1 361 3 is_stmt 1 view .LVU272
 362:Core/Src/mainLoop.c **** }
 1179              		.loc 1 362 1 is_stmt 0 view .LVU273
 1180 0054 201A     		subs	r0, r4, r0
 1181              	.LVL128:
 1182              		.loc 1 362 1 view .LVU274
 1183 0056 5DF8044B 		ldr	r4, [sp], #4
 1184              	.LCFI12:
 1185              		.cfi_restore 4
 1186              		.cfi_def_cfa_offset 0
 1187              	.LVL129:
 1188              		.loc 1 362 1 view .LVU275
 1189 005a 7047     		bx	lr
 1190              	.L78:
 1191              		.align	2
 1192              	.L77:
 1193 005c 00000000 		.word	value_cp
 1194              		.cfi_endproc
 1195              	.LFE143:
 1197              		.section	.text.cal_value_cp,"ax",%progbits
 1198              		.align	1
 1199              		.global	cal_value_cp
 1200              		.syntax unified
 1201              		.thumb
 1202              		.thumb_func
 1203              		.fpu fpv4-sp-d16
 1205              	cal_value_cp:
 1206              	.LFB144:
 363:Core/Src/mainLoop.c **** 
 364:Core/Src/mainLoop.c **** int32_t cal_value_cp(void) {
 1207              		.loc 1 364 28 is_stmt 1 view -0
 1208              		.cfi_startproc
 1209              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccKZYdRz.s 			page 30


 1210              		@ frame_needed = 0, uses_anonymous_args = 0
 1211 0000 08B5     		push	{r3, lr}
 1212              	.LCFI13:
 1213              		.cfi_def_cfa_offset 8
 1214              		.cfi_offset 3, -8
 1215              		.cfi_offset 14, -4
 365:Core/Src/mainLoop.c ****   int32_t i = 0;
 1216              		.loc 1 365 3 view .LVU277
 1217              	.LVL130:
 366:Core/Src/mainLoop.c ****   int32_t tmp1, tmp2, tmp3, tmp4, allSum = 0;
 1218              		.loc 1 366 3 view .LVU278
 367:Core/Src/mainLoop.c ****   for (i = 0; i < CP_TIMES_N; i++) {
 1219              		.loc 1 367 3 view .LVU279
 1220              		.loc 1 367 10 is_stmt 0 view .LVU280
 1221 0002 0023     		movs	r3, #0
 1222              	.LVL131:
 1223              	.L80:
 1224              		.loc 1 367 15 is_stmt 1 discriminator 1 view .LVU281
 1225              		.loc 1 367 3 is_stmt 0 discriminator 1 view .LVU282
 1226 0004 B3F5FA5F 		cmp	r3, #8000
 1227 0008 0CDA     		bge	.L83
 368:Core/Src/mainLoop.c ****     tmp1 = (int32_t)(value_adc1[i / 2 + 0] & 0x0fff);
 1228              		.loc 1 368 5 is_stmt 1 discriminator 3 view .LVU283
 1229              		.loc 1 368 39 is_stmt 0 discriminator 3 view .LVU284
 1230 000a 03EBD372 		add	r2, r3, r3, lsr #31
 1231 000e 5210     		asrs	r2, r2, #1
 1232              		.loc 1 368 32 discriminator 3 view .LVU285
 1233 0010 0649     		ldr	r1, .L84
 1234 0012 51F82220 		ldr	r2, [r1, r2, lsl #2]
 1235              		.loc 1 368 10 discriminator 3 view .LVU286
 1236 0016 C2F30B02 		ubfx	r2, r2, #0, #12
 1237              	.LVL132:
 369:Core/Src/mainLoop.c ****     // tmp2 = (int32_t)((value_adc1[i/2+0] >> 16)&(0x0fff));
 370:Core/Src/mainLoop.c ****     // tmp3 = (int32_t)(value_adc1[i*2+1] & 0xfff);
 371:Core/Src/mainLoop.c ****     // tmp4 = (int32_t)((value_adc1[i*2+1] >> 16)&(0x0fff));
 372:Core/Src/mainLoop.c ****     // value_cp[i] = (tmp1+tmp2)/2 + (tmp3+tmp4)/2;
 373:Core/Src/mainLoop.c ****     value_cp[i] = tmp1;
 1238              		.loc 1 373 5 is_stmt 1 discriminator 3 view .LVU287
 1239              		.loc 1 373 17 is_stmt 0 discriminator 3 view .LVU288
 1240 001a 0549     		ldr	r1, .L84+4
 1241 001c 41F82320 		str	r2, [r1, r3, lsl #2]
 374:Core/Src/mainLoop.c ****     allSum += value_cp[i];
 1242              		.loc 1 374 5 is_stmt 1 discriminator 3 view .LVU289
 367:Core/Src/mainLoop.c ****     tmp1 = (int32_t)(value_adc1[i / 2 + 0] & 0x0fff);
 1243              		.loc 1 367 31 discriminator 3 view .LVU290
 367:Core/Src/mainLoop.c ****     tmp1 = (int32_t)(value_adc1[i / 2 + 0] & 0x0fff);
 1244              		.loc 1 367 32 is_stmt 0 discriminator 3 view .LVU291
 1245 0020 0133     		adds	r3, r3, #1
 1246              	.LVL133:
 367:Core/Src/mainLoop.c ****     tmp1 = (int32_t)(value_adc1[i / 2 + 0] & 0x0fff);
 1247              		.loc 1 367 32 discriminator 3 view .LVU292
 1248 0022 EFE7     		b	.L80
 1249              	.LVL134:
 1250              	.L83:
 375:Core/Src/mainLoop.c ****   }
 376:Core/Src/mainLoop.c ****   return cal_k_value_cp();
 1251              		.loc 1 376 3 is_stmt 1 view .LVU293
ARM GAS  /tmp/ccKZYdRz.s 			page 31


 1252              		.loc 1 376 10 is_stmt 0 view .LVU294
 1253 0024 FFF7FEFF 		bl	cal_k_value_cp
 1254              	.LVL135:
 377:Core/Src/mainLoop.c ****   // return (allSum/CP_TIMES_N)-2048;
 378:Core/Src/mainLoop.c **** }
 1255              		.loc 1 378 1 view .LVU295
 1256 0028 08BD     		pop	{r3, pc}
 1257              	.L85:
 1258 002a 00BF     		.align	2
 1259              	.L84:
 1260 002c 00000000 		.word	value_adc1
 1261 0030 00000000 		.word	value_cp
 1262              		.cfi_endproc
 1263              	.LFE144:
 1265              		.section	.text.cal_cp_output_dac,"ax",%progbits
 1266              		.align	1
 1267              		.global	cal_cp_output_dac
 1268              		.syntax unified
 1269              		.thumb
 1270              		.thumb_func
 1271              		.fpu fpv4-sp-d16
 1273              	cal_cp_output_dac:
 1274              	.LVL136:
 1275              	.LFB145:
 379:Core/Src/mainLoop.c **** 
 380:Core/Src/mainLoop.c **** // 1Hz 10
 381:Core/Src/mainLoop.c **** // adcsumarray_size=2,1,1kÊî∂ÊïõÂæàÂø´Ôºå
 382:Core/Src/mainLoop.c **** #define ADCSUMARRAY_SIZE (1000)
 383:Core/Src/mainLoop.c **** // #define ADCSUMARRAY_SIZE (300)
 384:Core/Src/mainLoop.c **** int32_t adcSumArray[ADCSUMARRAY_SIZE];
 385:Core/Src/mainLoop.c **** int32_t pidP = 0, pidI = 0, pidD = 0;
 386:Core/Src/mainLoop.c **** float_t dletDac = 0;
 387:Core/Src/mainLoop.c **** 
 388:Core/Src/mainLoop.c **** // 1hz
 389:Core/Src/mainLoop.c **** // #define kP (-0.005)
 390:Core/Src/mainLoop.c **** // #define kI (+0.001)
 391:Core/Src/mainLoop.c **** // #define kD (0.005)
 392:Core/Src/mainLoop.c **** // void cal_cp_output_dac(struct adc_buf_t* adc_buf, uint32_t *dacP, uint32_t
 393:Core/Src/mainLoop.c **** // *dacN){ 	int32_t i=0; 	int32_t N=ADC_BUF_T_SIZE*2; 	int32_t
 394:Core/Src/mainLoop.c **** // allSum=0; 	uint32_t
 395:Core/Src/mainLoop.c **** // tmpUint32=0; 	for(i=0; i<N; i++){ 		allSum += (int32_t)
 396:Core/Src/mainLoop.c **** //((adc_buf->buf[i/2]&0x0fff));
 397:Core/Src/mainLoop.c **** //	}
 398:Core/Src/mainLoop.c **** //	allSum = allSum/N - TARGET_CPV;
 399:Core/Src/mainLoop.c **** //
 400:Core/Src/mainLoop.c **** //	for(i=0; i<ADCSUMARRAY_SIZE-1; i++){
 401:Core/Src/mainLoop.c **** //		adcSumArray[i] = adcSumArray[i+1];
 402:Core/Src/mainLoop.c **** //	}
 403:Core/Src/mainLoop.c **** //	adcSumArray[ADCSUMARRAY_SIZE-1] = allSum;
 404:Core/Src/mainLoop.c **** //
 405:Core/Src/mainLoop.c **** //	//pid
 406:Core/Src/mainLoop.c **** //	pidP = adcSumArray[ADCSUMARRAY_SIZE-1];
 407:Core/Src/mainLoop.c **** //	pidI = 0;
 408:Core/Src/mainLoop.c **** //	for(i=0; i<ADCSUMARRAY_SIZE; i++){
 409:Core/Src/mainLoop.c **** //		pidI += adcSumArray[i];
 410:Core/Src/mainLoop.c **** //	}
 411:Core/Src/mainLoop.c **** //	pidI = pidI/ADCSUMARRAY_SIZE;
ARM GAS  /tmp/ccKZYdRz.s 			page 32


 412:Core/Src/mainLoop.c **** //	pidD = adcSumArray[ADCSUMARRAY_SIZE-1] -
 413:Core/Src/mainLoop.c **** // adcSumArray[ADCSUMARRAY_SIZE-2]; 	dletDac = kP*((float_t)pidP) +
 414:Core/Src/mainLoop.c **** // kI*((float_t)pidI) + kD*((float_t)pidD); 	tmpUint32 = abs((int32_t)
 415:Core/Src/mainLoop.c **** // (dletDac));
 416:Core/Src/mainLoop.c **** //	(*dacP) += (int32_t) (dletDac);
 417:Core/Src/mainLoop.c **** //	(*dacN) -= (int32_t) (dletDac);
 418:Core/Src/mainLoop.c **** //	max5307_w_chanel(DACP_1,  (*dacP)>>12,      max_outenable);
 419:Core/Src/mainLoop.c **** //	max5307_w_chanel(DACP_1K, ((*dacP)&0xfff),  max_outenable);
 420:Core/Src/mainLoop.c **** //	max5307_w_chanel(DACN_1,  (*dacN)>>12,      max_outenable);
 421:Core/Src/mainLoop.c **** //	max5307_w_chanel(DACN_1K, ((*dacN)&0xfff),  max_outenable);
 422:Core/Src/mainLoop.c **** //
 423:Core/Src/mainLoop.c **** //	//clear buf
 424:Core/Src/mainLoop.c **** //	for(i=0; i<ADC_BUF_T_SIZE; i++){
 425:Core/Src/mainLoop.c **** //		adc_buf->buf[i]=0;
 426:Core/Src/mainLoop.c **** //	}
 427:Core/Src/mainLoop.c **** // }
 428:Core/Src/mainLoop.c **** // for test before 20231206
 429:Core/Src/mainLoop.c **** // #define kP (-0.0005)
 430:Core/Src/mainLoop.c **** // #define kI (+0.051)
 431:Core/Src/mainLoop.c **** // #define kD ( 0.00005)
 432:Core/Src/mainLoop.c **** 
 433:Core/Src/mainLoop.c **** // get jubuzhengdang, jiezhi
 434:Core/Src/mainLoop.c **** // #define kP (-0.0005)
 435:Core/Src/mainLoop.c **** // #define kI (+0.0051)
 436:Core/Src/mainLoop.c **** // #define kD (1.1275)
 437:Core/Src/mainLoop.c **** 
 438:Core/Src/mainLoop.c **** // for test 20231206 this is almost ok
 439:Core/Src/mainLoop.c **** #define kP (-0.0005)
 440:Core/Src/mainLoop.c **** #define kI (+0.0051)
 441:Core/Src/mainLoop.c **** #define kD (1.1275)
 442:Core/Src/mainLoop.c **** 
 443:Core/Src/mainLoop.c **** // #define kP (-0.0002)
 444:Core/Src/mainLoop.c **** // #define kI (+0.0031)
 445:Core/Src/mainLoop.c **** // #define kD (0.5275)
 446:Core/Src/mainLoop.c **** // #define TARGET_CPV  (2748)
 447:Core/Src/mainLoop.c **** #define TARGET_CPV (3096)
 448:Core/Src/mainLoop.c **** void cal_cp_output_dac(struct adc_buf_t *adc_buf, uint32_t *dacP,
 449:Core/Src/mainLoop.c ****                        uint32_t *dacN) {
 1276              		.loc 1 449 40 is_stmt 1 view -0
 1277              		.cfi_startproc
 1278              		@ args = 0, pretend = 0, frame = 0
 1279              		@ frame_needed = 0, uses_anonymous_args = 0
 1280              		.loc 1 449 40 is_stmt 0 view .LVU297
 1281 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1282              	.LCFI14:
 1283              		.cfi_def_cfa_offset 32
 1284              		.cfi_offset 4, -32
 1285              		.cfi_offset 5, -28
 1286              		.cfi_offset 6, -24
 1287              		.cfi_offset 7, -20
 1288              		.cfi_offset 8, -16
 1289              		.cfi_offset 9, -12
 1290              		.cfi_offset 10, -8
 1291              		.cfi_offset 14, -4
 1292 0004 0546     		mov	r5, r0
 1293 0006 0F46     		mov	r7, r1
 1294 0008 1646     		mov	r6, r2
ARM GAS  /tmp/ccKZYdRz.s 			page 33


 450:Core/Src/mainLoop.c ****   int32_t i = 0;
 1295              		.loc 1 450 3 is_stmt 1 view .LVU298
 1296              	.LVL137:
 451:Core/Src/mainLoop.c ****   int32_t N = ADC_BUF_T_SIZE * 2;
 1297              		.loc 1 451 3 view .LVU299
 452:Core/Src/mainLoop.c ****   int32_t allSum = 0;
 1298              		.loc 1 452 3 view .LVU300
 453:Core/Src/mainLoop.c ****   uint32_t tmpUint32 = 0;
 1299              		.loc 1 453 3 view .LVU301
 454:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1300              		.loc 1 454 3 view .LVU302
 452:Core/Src/mainLoop.c ****   int32_t allSum = 0;
 1301              		.loc 1 452 11 is_stmt 0 view .LVU303
 1302 000a 0022     		movs	r2, #0
 1303              	.LVL138:
 1304              		.loc 1 454 10 view .LVU304
 1305 000c 1446     		mov	r4, r2
 1306              	.LVL139:
 1307              	.L87:
 1308              		.loc 1 454 15 is_stmt 1 discriminator 1 view .LVU305
 1309              		.loc 1 454 3 is_stmt 0 discriminator 1 view .LVU306
 1310 000e C72C     		cmp	r4, #199
 1311 0010 0ADC     		bgt	.L96
 455:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i / 2] & 0x0fff));
 1312              		.loc 1 455 5 is_stmt 1 discriminator 3 view .LVU307
 1313              		.loc 1 455 41 is_stmt 0 discriminator 3 view .LVU308
 1314 0012 04EBD473 		add	r3, r4, r4, lsr #31
 1315 0016 5B10     		asrs	r3, r3, #1
 1316              		.loc 1 455 38 discriminator 3 view .LVU309
 1317 0018 05EB8303 		add	r3, r5, r3, lsl #2
 1318 001c 5B68     		ldr	r3, [r3, #4]
 1319              		.loc 1 455 15 discriminator 3 view .LVU310
 1320 001e C3F30B03 		ubfx	r3, r3, #0, #12
 1321              		.loc 1 455 12 discriminator 3 view .LVU311
 1322 0022 1A44     		add	r2, r2, r3
 1323              	.LVL140:
 454:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1324              		.loc 1 454 22 is_stmt 1 discriminator 3 view .LVU312
 454:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1325              		.loc 1 454 23 is_stmt 0 discriminator 3 view .LVU313
 1326 0024 0134     		adds	r4, r4, #1
 1327              	.LVL141:
 454:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1328              		.loc 1 454 23 discriminator 3 view .LVU314
 1329 0026 F2E7     		b	.L87
 1330              	.L96:
 456:Core/Src/mainLoop.c ****   }
 457:Core/Src/mainLoop.c ****   allSum = allSum / N - TARGET_CPV;
 1331              		.loc 1 457 3 is_stmt 1 view .LVU315
 1332              		.loc 1 457 19 is_stmt 0 view .LVU316
 1333 0028 5B4B     		ldr	r3, .L100+24
 1334 002a 83FB0213 		smull	r1, r3, r3, r2
 1335              	.LVL142:
 1336              		.loc 1 457 19 view .LVU317
 1337 002e D017     		asrs	r0, r2, #31
 1338              	.LVL143:
 1339              		.loc 1 457 19 view .LVU318
ARM GAS  /tmp/ccKZYdRz.s 			page 34


 1340 0030 C0EBA310 		rsb	r0, r0, r3, asr #6
 1341              		.loc 1 457 10 view .LVU319
 1342 0034 A0F61840 		subw	r0, r0, #3096
 1343              	.LVL144:
 458:Core/Src/mainLoop.c **** 
 459:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE - 1; i++) {
 1344              		.loc 1 459 3 is_stmt 1 view .LVU320
 1345              		.loc 1 459 10 is_stmt 0 view .LVU321
 1346 0038 0023     		movs	r3, #0
 1347              	.LVL145:
 1348              	.L89:
 1349              		.loc 1 459 15 is_stmt 1 discriminator 1 view .LVU322
 1350              		.loc 1 459 3 is_stmt 0 discriminator 1 view .LVU323
 1351 003a 40F2E632 		movw	r2, #998
 1352 003e 9342     		cmp	r3, r2
 1353 0040 07DC     		bgt	.L97
 460:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1354              		.loc 1 460 5 is_stmt 1 discriminator 3 view .LVU324
 1355              		.loc 1 460 36 is_stmt 0 discriminator 3 view .LVU325
 1356 0042 5A1C     		adds	r2, r3, #1
 1357              		.loc 1 460 33 discriminator 3 view .LVU326
 1358 0044 5549     		ldr	r1, .L100+28
 1359 0046 51F82240 		ldr	r4, [r1, r2, lsl #2]
 1360              		.loc 1 460 20 discriminator 3 view .LVU327
 1361 004a 41F82340 		str	r4, [r1, r3, lsl #2]
 459:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1362              		.loc 1 459 41 is_stmt 1 discriminator 3 view .LVU328
 1363              	.LVL146:
 459:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1364              		.loc 1 459 42 is_stmt 0 discriminator 3 view .LVU329
 1365 004e 1346     		mov	r3, r2
 1366 0050 F3E7     		b	.L89
 1367              	.LVL147:
 1368              	.L97:
 461:Core/Src/mainLoop.c ****   }
 462:Core/Src/mainLoop.c ****   adcSumArray[ADCSUMARRAY_SIZE - 1] = allSum;
 1369              		.loc 1 462 3 is_stmt 1 view .LVU330
 1370              		.loc 1 462 37 is_stmt 0 view .LVU331
 1371 0052 524B     		ldr	r3, .L100+28
 1372              	.LVL148:
 1373              		.loc 1 462 37 view .LVU332
 1374 0054 C3F89C0F 		str	r0, [r3, #3996]
 463:Core/Src/mainLoop.c **** 
 464:Core/Src/mainLoop.c ****   // pid
 465:Core/Src/mainLoop.c ****   pidP = adcSumArray[ADCSUMARRAY_SIZE - 1];
 1375              		.loc 1 465 3 is_stmt 1 view .LVU333
 1376              		.loc 1 465 8 is_stmt 0 view .LVU334
 1377 0058 514B     		ldr	r3, .L100+32
 1378 005a 1860     		str	r0, [r3]
 466:Core/Src/mainLoop.c ****   pidI = 0;
 1379              		.loc 1 466 3 is_stmt 1 view .LVU335
 1380              		.loc 1 466 8 is_stmt 0 view .LVU336
 1381 005c 0023     		movs	r3, #0
 1382 005e 514A     		ldr	r2, .L100+36
 1383 0060 1360     		str	r3, [r2]
 467:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1384              		.loc 1 467 3 is_stmt 1 view .LVU337
ARM GAS  /tmp/ccKZYdRz.s 			page 35


 1385              	.LVL149:
 1386              	.L91:
 1387              		.loc 1 467 15 discriminator 1 view .LVU338
 1388              		.loc 1 467 3 is_stmt 0 discriminator 1 view .LVU339
 1389 0062 B3F57A7F 		cmp	r3, #1000
 1390 0066 08DA     		bge	.L98
 468:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1391              		.loc 1 468 5 is_stmt 1 discriminator 3 view .LVU340
 1392              		.loc 1 468 24 is_stmt 0 discriminator 3 view .LVU341
 1393 0068 4C4A     		ldr	r2, .L100+28
 1394 006a 52F82340 		ldr	r4, [r2, r3, lsl #2]
 1395              		.loc 1 468 10 discriminator 3 view .LVU342
 1396 006e 4D49     		ldr	r1, .L100+36
 1397 0070 0A68     		ldr	r2, [r1]
 1398 0072 2244     		add	r2, r2, r4
 1399 0074 0A60     		str	r2, [r1]
 467:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1400              		.loc 1 467 37 is_stmt 1 discriminator 3 view .LVU343
 467:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1401              		.loc 1 467 38 is_stmt 0 discriminator 3 view .LVU344
 1402 0076 0133     		adds	r3, r3, #1
 1403              	.LVL150:
 467:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1404              		.loc 1 467 38 discriminator 3 view .LVU345
 1405 0078 F3E7     		b	.L91
 1406              	.L98:
 469:Core/Src/mainLoop.c ****   }
 470:Core/Src/mainLoop.c ****   pidI = pidI / ADCSUMARRAY_SIZE;
 1407              		.loc 1 470 3 is_stmt 1 view .LVU346
 1408              		.loc 1 470 15 is_stmt 0 view .LVU347
 1409 007a 4A4A     		ldr	r2, .L100+36
 1410 007c 1368     		ldr	r3, [r2]
 1411              	.LVL151:
 1412              		.loc 1 470 15 view .LVU348
 1413 007e 4A4C     		ldr	r4, .L100+40
 1414 0080 84FB0314 		smull	r1, r4, r4, r3
 1415 0084 DB17     		asrs	r3, r3, #31
 1416 0086 C3EBA414 		rsb	r4, r3, r4, asr #6
 1417              		.loc 1 470 8 view .LVU349
 1418 008a 1460     		str	r4, [r2]
 471:Core/Src/mainLoop.c ****   pidD = adcSumArray[ADCSUMARRAY_SIZE - 1] - adcSumArray[ADCSUMARRAY_SIZE - 2];
 1419              		.loc 1 471 3 is_stmt 1 view .LVU350
 1420              		.loc 1 471 57 is_stmt 0 view .LVU351
 1421 008c 434B     		ldr	r3, .L100+28
 1422 008e D3F8983F 		ldr	r3, [r3, #3992]
 1423              		.loc 1 471 44 view .LVU352
 1424 0092 A0EB030A 		sub	r10, r0, r3
 1425              		.loc 1 471 8 view .LVU353
 1426 0096 454B     		ldr	r3, .L100+44
 1427 0098 C3F800A0 		str	r10, [r3]
 472:Core/Src/mainLoop.c ****   dletDac = kP * ((float_t)pidP) + kI * ((float_t)pidI) + kD * ((float_t)pidD);
 1428              		.loc 1 472 3 is_stmt 1 view .LVU354
 1429              		.loc 1 472 19 is_stmt 0 view .LVU355
 1430 009c 07EE900A 		vmov	s15, r0	@ int
 1431 00a0 F8EEE77A 		vcvt.f32.s32	s15, s15
 1432 00a4 17EE900A 		vmov	r0, s15
 1433              	.LVL152:
ARM GAS  /tmp/ccKZYdRz.s 			page 36


 1434              		.loc 1 472 19 view .LVU356
 1435 00a8 FFF7FEFF 		bl	__aeabi_f2d
 1436              	.LVL153:
 1437              		.loc 1 472 16 view .LVU357
 1438 00ac 34A3     		adr	r3, .L100
 1439 00ae D3E90023 		ldrd	r2, [r3]
 1440 00b2 FFF7FEFF 		bl	__aeabi_dmul
 1441              	.LVL154:
 1442 00b6 8046     		mov	r8, r0
 1443 00b8 8946     		mov	r9, r1
 1444              		.loc 1 472 42 view .LVU358
 1445 00ba 07EE904A 		vmov	s15, r4	@ int
 1446 00be F8EEE77A 		vcvt.f32.s32	s15, s15
 1447 00c2 17EE900A 		vmov	r0, s15
 1448 00c6 FFF7FEFF 		bl	__aeabi_f2d
 1449              	.LVL155:
 1450              		.loc 1 472 39 view .LVU359
 1451 00ca 2FA3     		adr	r3, .L100+8
 1452 00cc D3E90023 		ldrd	r2, [r3]
 1453 00d0 FFF7FEFF 		bl	__aeabi_dmul
 1454              	.LVL156:
 1455 00d4 0246     		mov	r2, r0
 1456 00d6 0B46     		mov	r3, r1
 1457              		.loc 1 472 34 view .LVU360
 1458 00d8 4046     		mov	r0, r8
 1459 00da 4946     		mov	r1, r9
 1460 00dc FFF7FEFF 		bl	__aeabi_dadd
 1461              	.LVL157:
 1462 00e0 8046     		mov	r8, r0
 1463 00e2 8946     		mov	r9, r1
 1464              		.loc 1 472 65 view .LVU361
 1465 00e4 07EE90AA 		vmov	s15, r10	@ int
 1466 00e8 F8EEE77A 		vcvt.f32.s32	s15, s15
 1467 00ec 17EE900A 		vmov	r0, s15
 1468 00f0 FFF7FEFF 		bl	__aeabi_f2d
 1469              	.LVL158:
 1470              		.loc 1 472 62 view .LVU362
 1471 00f4 26A3     		adr	r3, .L100+16
 1472 00f6 D3E90023 		ldrd	r2, [r3]
 1473 00fa FFF7FEFF 		bl	__aeabi_dmul
 1474              	.LVL159:
 1475 00fe 0246     		mov	r2, r0
 1476 0100 0B46     		mov	r3, r1
 1477              		.loc 1 472 57 view .LVU363
 1478 0102 4046     		mov	r0, r8
 1479 0104 4946     		mov	r1, r9
 1480 0106 FFF7FEFF 		bl	__aeabi_dadd
 1481              	.LVL160:
 1482 010a FFF7FEFF 		bl	__aeabi_d2f
 1483              	.LVL161:
 1484 010e 07EE900A 		vmov	s15, r0
 1485              		.loc 1 472 11 view .LVU364
 1486 0112 274A     		ldr	r2, .L100+48
 1487 0114 1060     		str	r0, [r2]	@ float
 473:Core/Src/mainLoop.c ****   tmpUint32 = abs((int32_t)(dletDac));
 1488              		.loc 1 473 3 is_stmt 1 view .LVU365
 1489              		.loc 1 473 19 is_stmt 0 view .LVU366
ARM GAS  /tmp/ccKZYdRz.s 			page 37


 1490 0116 FDEEE77A 		vcvt.s32.f32	s15, s15
 1491              	.LVL162:
 474:Core/Src/mainLoop.c ****   (*dacP) += (int32_t)(dletDac);
 1492              		.loc 1 474 3 is_stmt 1 view .LVU367
 1493              		.loc 1 474 11 is_stmt 0 view .LVU368
 1494 011a 3B68     		ldr	r3, [r7]
 1495 011c 17EE901A 		vmov	r1, s15	@ int
 1496 0120 0B44     		add	r3, r3, r1
 1497 0122 3B60     		str	r3, [r7]
 475:Core/Src/mainLoop.c ****   (*dacN) -= (int32_t)(dletDac);
 1498              		.loc 1 475 3 is_stmt 1 view .LVU369
 1499              		.loc 1 475 14 is_stmt 0 view .LVU370
 1500 0124 D2ED007A 		vldr.32	s15, [r2]
 1501              	.LVL163:
 1502              		.loc 1 475 14 view .LVU371
 1503 0128 FDEEE77A 		vcvt.s32.f32	s15, s15
 1504              		.loc 1 475 11 view .LVU372
 1505 012c 3368     		ldr	r3, [r6]
 1506 012e 17EE902A 		vmov	r2, s15	@ int
 1507 0132 9B1A     		subs	r3, r3, r2
 1508 0134 3360     		str	r3, [r6]
 476:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1, (*dacP) >> 12, max_outenable);
 1509              		.loc 1 476 3 is_stmt 1 view .LVU373
 1510              		.loc 1 476 29 is_stmt 0 view .LVU374
 1511 0136 3968     		ldr	r1, [r7]
 1512              	.LVL164:
 1513              		.loc 1 476 3 view .LVU375
 1514 0138 0122     		movs	r2, #1
 1515 013a 090B     		lsrs	r1, r1, #12
 1516 013c 0620     		movs	r0, #6
 1517              	.LVL165:
 1518              		.loc 1 476 3 view .LVU376
 1519 013e FFF7FEFF 		bl	max5307_w_chanel
 1520              	.LVL166:
 477:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1K, ((*dacP) & 0xfff), max_outenable);
 1521              		.loc 1 477 3 is_stmt 1 view .LVU377
 1522              		.loc 1 477 31 is_stmt 0 view .LVU378
 1523 0142 3968     		ldr	r1, [r7]
 1524              		.loc 1 477 3 view .LVU379
 1525 0144 0122     		movs	r2, #1
 1526 0146 C1F30B01 		ubfx	r1, r1, #0, #12
 1527 014a 0720     		movs	r0, #7
 1528 014c FFF7FEFF 		bl	max5307_w_chanel
 1529              	.LVL167:
 478:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1, (*dacN) >> 12, max_outenable);
 1530              		.loc 1 478 3 is_stmt 1 view .LVU380
 1531              		.loc 1 478 29 is_stmt 0 view .LVU381
 1532 0150 3168     		ldr	r1, [r6]
 1533              		.loc 1 478 3 view .LVU382
 1534 0152 0122     		movs	r2, #1
 1535 0154 090B     		lsrs	r1, r1, #12
 1536 0156 0520     		movs	r0, #5
 1537 0158 FFF7FEFF 		bl	max5307_w_chanel
 1538              	.LVL168:
 479:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1K, ((*dacN) & 0xfff), max_outenable);
 1539              		.loc 1 479 3 is_stmt 1 view .LVU383
 1540              		.loc 1 479 31 is_stmt 0 view .LVU384
ARM GAS  /tmp/ccKZYdRz.s 			page 38


 1541 015c 3168     		ldr	r1, [r6]
 1542              		.loc 1 479 3 view .LVU385
 1543 015e 0122     		movs	r2, #1
 1544 0160 C1F30B01 		ubfx	r1, r1, #0, #12
 1545 0164 0420     		movs	r0, #4
 1546 0166 FFF7FEFF 		bl	max5307_w_chanel
 1547              	.LVL169:
 480:Core/Src/mainLoop.c **** 
 481:Core/Src/mainLoop.c ****   // clear buf
 482:Core/Src/mainLoop.c ****   for (i = 0; i < ADC_BUF_T_SIZE; i++) {
 1548              		.loc 1 482 3 is_stmt 1 view .LVU386
 1549              		.loc 1 482 10 is_stmt 0 view .LVU387
 1550 016a 0023     		movs	r3, #0
 1551              	.LVL170:
 1552              	.L93:
 1553              		.loc 1 482 15 is_stmt 1 discriminator 1 view .LVU388
 1554              		.loc 1 482 3 is_stmt 0 discriminator 1 view .LVU389
 1555 016c 632B     		cmp	r3, #99
 1556 016e 05DC     		bgt	.L99
 483:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 1557              		.loc 1 483 5 is_stmt 1 discriminator 3 view .LVU390
 1558              		.loc 1 483 21 is_stmt 0 discriminator 3 view .LVU391
 1559 0170 05EB8302 		add	r2, r5, r3, lsl #2
 1560 0174 0021     		movs	r1, #0
 1561 0176 5160     		str	r1, [r2, #4]
 482:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 1562              		.loc 1 482 35 is_stmt 1 discriminator 3 view .LVU392
 482:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 1563              		.loc 1 482 36 is_stmt 0 discriminator 3 view .LVU393
 1564 0178 0133     		adds	r3, r3, #1
 1565              	.LVL171:
 482:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 1566              		.loc 1 482 36 discriminator 3 view .LVU394
 1567 017a F7E7     		b	.L93
 1568              	.L99:
 484:Core/Src/mainLoop.c ****   }
 485:Core/Src/mainLoop.c **** }
 1569              		.loc 1 485 1 view .LVU395
 1570 017c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1571              	.LVL172:
 1572              	.L101:
 1573              		.loc 1 485 1 view .LVU396
 1574              		.align	3
 1575              	.L100:
 1576 0180 FCA9F1D2 		.word	3539053052
 1577 0184 4D6240BF 		.word	-1086299571
 1578 0188 88855AD3 		.word	3545925000
 1579 018c BCE3743F 		.word	1064625084
 1580 0190 0AD7A370 		.word	1889785610
 1581 0194 3D0AF23F 		.word	1072826941
 1582 0198 1F85EB51 		.word	1374389535
 1583 019c 00000000 		.word	adcSumArray
 1584 01a0 00000000 		.word	.LANCHOR4
 1585 01a4 00000000 		.word	.LANCHOR5
 1586 01a8 D34D6210 		.word	274877907
 1587 01ac 00000000 		.word	.LANCHOR6
 1588 01b0 00000000 		.word	.LANCHOR7
ARM GAS  /tmp/ccKZYdRz.s 			page 39


 1589              		.cfi_endproc
 1590              	.LFE145:
 1592              		.section	.text.insertMeanVal,"ax",%progbits
 1593              		.align	1
 1594              		.global	insertMeanVal
 1595              		.syntax unified
 1596              		.thumb
 1597              		.thumb_func
 1598              		.fpu fpv4-sp-d16
 1600              	insertMeanVal:
 1601              	.LVL173:
 1602              	.LFB146:
 486:Core/Src/mainLoop.c **** 
 487:Core/Src/mainLoop.c **** #define VALMEANARRAY_N 20
 488:Core/Src/mainLoop.c **** int32_t valMeanArray[VALMEANARRAY_N];
 489:Core/Src/mainLoop.c **** // ËÆ°ÁÆóvalMeanArrayÂ∫èÂàó‰∏≠ÁöÑÂùáÂÄºÂíåÂ∑ÆÂÄºÔºåËøôÁõ∏ÂΩì‰∏éadc‚ÄîdmaÈááÊ†∑200Ê¨°ÁöÑÂπ≥ÂùáÂ§ÑÁêÜ
 490:Core/Src/mainLoop.c **** void insertMeanVal(int32_t val, struct adc_buf_t *adc_buf) {
 1603              		.loc 1 490 60 is_stmt 1 view -0
 1604              		.cfi_startproc
 1605              		@ args = 0, pretend = 0, frame = 0
 1606              		@ frame_needed = 0, uses_anonymous_args = 0
 1607              		@ link register save eliminated.
 1608              		.loc 1 490 60 is_stmt 0 view .LVU398
 1609 0000 30B4     		push	{r4, r5}
 1610              	.LCFI15:
 1611              		.cfi_def_cfa_offset 8
 1612              		.cfi_offset 4, -8
 1613              		.cfi_offset 5, -4
 491:Core/Src/mainLoop.c ****   static int32_t currentP = 0;
 1614              		.loc 1 491 3 is_stmt 1 view .LVU399
 492:Core/Src/mainLoop.c ****   int32_t i = 0, sumval = 0, difval = 0;
 1615              		.loc 1 492 3 view .LVU400
 1616              	.LVL174:
 493:Core/Src/mainLoop.c ****   valMeanArray[currentP++] = val;
 1617              		.loc 1 493 3 view .LVU401
 1618              		.loc 1 493 24 is_stmt 0 view .LVU402
 1619 0002 1A4C     		ldr	r4, .L107
 1620 0004 2368     		ldr	r3, [r4]
 1621 0006 5A1C     		adds	r2, r3, #1
 1622              		.loc 1 493 28 view .LVU403
 1623 0008 194D     		ldr	r5, .L107+4
 1624 000a 45F82300 		str	r0, [r5, r3, lsl #2]
 494:Core/Src/mainLoop.c ****   currentP = currentP % VALMEANARRAY_N;
 1625              		.loc 1 494 3 is_stmt 1 view .LVU404
 1626              		.loc 1 494 23 is_stmt 0 view .LVU405
 1627 000e 1948     		ldr	r0, .L107+8
 1628              	.LVL175:
 1629              		.loc 1 494 23 view .LVU406
 1630 0010 80FB0230 		smull	r3, r0, r0, r2
 1631              	.LVL176:
 1632              		.loc 1 494 23 view .LVU407
 1633 0014 D317     		asrs	r3, r2, #31
 1634 0016 C3EBE003 		rsb	r3, r3, r0, asr #3
 1635 001a 03EB8303 		add	r3, r3, r3, lsl #2
 1636 001e A2EB8303 		sub	r3, r2, r3, lsl #2
 1637              		.loc 1 494 12 view .LVU408
 1638 0022 2360     		str	r3, [r4]
ARM GAS  /tmp/ccKZYdRz.s 			page 40


 1639              	.LVL177:
 495:Core/Src/mainLoop.c ****   for (i = 0; i < VALMEANARRAY_N - 1; i++) {
 1640              		.loc 1 495 3 is_stmt 1 view .LVU409
 492:Core/Src/mainLoop.c ****   valMeanArray[currentP++] = val;
 1641              		.loc 1 492 30 is_stmt 0 view .LVU410
 1642 0024 0020     		movs	r0, #0
 492:Core/Src/mainLoop.c ****   valMeanArray[currentP++] = val;
 1643              		.loc 1 492 18 view .LVU411
 1644 0026 0446     		mov	r4, r0
 1645              		.loc 1 495 10 view .LVU412
 1646 0028 0246     		mov	r2, r0
 1647              	.LVL178:
 1648              	.L103:
 1649              		.loc 1 495 15 is_stmt 1 discriminator 1 view .LVU413
 1650              		.loc 1 495 3 is_stmt 0 discriminator 1 view .LVU414
 1651 002a 122A     		cmp	r2, #18
 1652 002c 0CDC     		bgt	.L106
 1653              	.LBB4:
 496:Core/Src/mainLoop.c ****     sumval += valMeanArray[i];
 1654              		.loc 1 496 5 is_stmt 1 discriminator 3 view .LVU415
 1655              		.loc 1 496 27 is_stmt 0 discriminator 3 view .LVU416
 1656 002e 104B     		ldr	r3, .L107+4
 1657 0030 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1658              		.loc 1 496 12 discriminator 3 view .LVU417
 1659 0034 1C44     		add	r4, r4, r3
 1660              	.LVL179:
 497:Core/Src/mainLoop.c ****     difval += abs(valMeanArray[i] - adc_buf->adcMeanVal);
 1661              		.loc 1 497 5 is_stmt 1 discriminator 3 view .LVU418
 1662              		.loc 1 497 44 is_stmt 0 discriminator 3 view .LVU419
 1663 0036 D1F89451 		ldr	r5, [r1, #404]
 1664              		.loc 1 497 35 discriminator 3 view .LVU420
 1665 003a 5B1B     		subs	r3, r3, r5
 1666              		.loc 1 497 15 discriminator 3 view .LVU421
 1667 003c 002B     		cmp	r3, #0
 1668 003e B8BF     		it	lt
 1669 0040 5B42     		rsblt	r3, r3, #0
 1670              		.loc 1 497 12 discriminator 3 view .LVU422
 1671 0042 1844     		add	r0, r0, r3
 1672              	.LVL180:
 1673              		.loc 1 497 12 discriminator 3 view .LVU423
 1674              	.LBE4:
 495:Core/Src/mainLoop.c ****     sumval += valMeanArray[i];
 1675              		.loc 1 495 39 is_stmt 1 discriminator 3 view .LVU424
 495:Core/Src/mainLoop.c ****     sumval += valMeanArray[i];
 1676              		.loc 1 495 40 is_stmt 0 discriminator 3 view .LVU425
 1677 0044 0132     		adds	r2, r2, #1
 1678              	.LVL181:
 495:Core/Src/mainLoop.c ****     sumval += valMeanArray[i];
 1679              		.loc 1 495 40 discriminator 3 view .LVU426
 1680 0046 F0E7     		b	.L103
 1681              	.L106:
 498:Core/Src/mainLoop.c ****   }
 499:Core/Src/mainLoop.c ****   sumval = sumval / VALMEANARRAY_N;
 1682              		.loc 1 499 3 is_stmt 1 view .LVU427
 1683              		.loc 1 499 10 is_stmt 0 view .LVU428
 1684 0048 0A4B     		ldr	r3, .L107+8
 1685 004a 83FB0452 		smull	r5, r2, r3, r4
ARM GAS  /tmp/ccKZYdRz.s 			page 41


 1686              	.LVL182:
 1687              		.loc 1 499 10 view .LVU429
 1688 004e E417     		asrs	r4, r4, #31
 1689              	.LVL183:
 1690              		.loc 1 499 10 view .LVU430
 1691 0050 C4EBE204 		rsb	r4, r4, r2, asr #3
 1692              	.LVL184:
 500:Core/Src/mainLoop.c ****   difval = difval / VALMEANARRAY_N;
 1693              		.loc 1 500 3 is_stmt 1 view .LVU431
 1694              		.loc 1 500 10 is_stmt 0 view .LVU432
 1695 0054 83FB0023 		smull	r2, r3, r3, r0
 1696 0058 C017     		asrs	r0, r0, #31
 1697              	.LVL185:
 1698              		.loc 1 500 10 view .LVU433
 1699 005a C0EBE300 		rsb	r0, r0, r3, asr #3
 1700              	.LVL186:
 501:Core/Src/mainLoop.c ****   adc_buf->adcMeanVal = sumval;
 1701              		.loc 1 501 3 is_stmt 1 view .LVU434
 1702              		.loc 1 501 23 is_stmt 0 view .LVU435
 1703 005e C1F89441 		str	r4, [r1, #404]
 502:Core/Src/mainLoop.c ****   adc_buf->adcDif2 = difval;
 1704              		.loc 1 502 3 is_stmt 1 view .LVU436
 1705              		.loc 1 502 20 is_stmt 0 view .LVU437
 1706 0062 C1F89801 		str	r0, [r1, #408]
 503:Core/Src/mainLoop.c **** }
 1707              		.loc 1 503 1 view .LVU438
 1708 0066 30BC     		pop	{r4, r5}
 1709              	.LCFI16:
 1710              		.cfi_restore 5
 1711              		.cfi_restore 4
 1712              		.cfi_def_cfa_offset 0
 1713              	.LVL187:
 1714              		.loc 1 503 1 view .LVU439
 1715 0068 7047     		bx	lr
 1716              	.L108:
 1717 006a 00BF     		.align	2
 1718              	.L107:
 1719 006c 00000000 		.word	.LANCHOR8
 1720 0070 00000000 		.word	valMeanArray
 1721 0074 67666666 		.word	1717986919
 1722              		.cfi_endproc
 1723              	.LFE146:
 1725              		.section	.text.cal_cp_output_dac_ext,"ax",%progbits
 1726              		.align	1
 1727              		.global	cal_cp_output_dac_ext
 1728              		.syntax unified
 1729              		.thumb
 1730              		.thumb_func
 1731              		.fpu fpv4-sp-d16
 1733              	cal_cp_output_dac_ext:
 1734              	.LVL188:
 1735              	.LFB147:
 504:Core/Src/mainLoop.c **** struct log_para_t
 505:Core/Src/mainLoop.c ****     logPara;  // Áî®‰∫éÂêëhostÂèëÈÄÅË∞ÉËØïËøáÁ®ãÊï∞ÊçÆÔºåÂú®cal_cp_output_dac_extËøáÁ®ã‰∏≠‰øùÂ≠ò
 506:Core/Src/mainLoop.c **** int32_t meanVal_view = 0;
 507:Core/Src/mainLoop.c **** int32_t difVal_view = 0;
 508:Core/Src/mainLoop.c **** #define RUN_30S 180000  // about 90S
ARM GAS  /tmp/ccKZYdRz.s 			page 42


 509:Core/Src/mainLoop.c **** void cal_cp_output_dac_ext(struct adc_buf_t *adc_buf, uint32_t *dacP,
 510:Core/Src/mainLoop.c ****                            uint32_t *dacN, int32_t runTime500us) {
 1736              		.loc 1 510 66 is_stmt 1 view -0
 1737              		.cfi_startproc
 1738              		@ args = 0, pretend = 0, frame = 0
 1739              		@ frame_needed = 0, uses_anonymous_args = 0
 1740              		.loc 1 510 66 is_stmt 0 view .LVU441
 1741 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1742              	.LCFI17:
 1743              		.cfi_def_cfa_offset 40
 1744              		.cfi_offset 3, -40
 1745              		.cfi_offset 4, -36
 1746              		.cfi_offset 5, -32
 1747              		.cfi_offset 6, -28
 1748              		.cfi_offset 7, -24
 1749              		.cfi_offset 8, -20
 1750              		.cfi_offset 9, -16
 1751              		.cfi_offset 10, -12
 1752              		.cfi_offset 11, -8
 1753              		.cfi_offset 14, -4
 1754 0004 0446     		mov	r4, r0
 1755 0006 0D46     		mov	r5, r1
 1756 0008 1646     		mov	r6, r2
 511:Core/Src/mainLoop.c ****   int32_t i = 0;
 1757              		.loc 1 511 3 is_stmt 1 view .LVU442
 1758              	.LVL189:
 512:Core/Src/mainLoop.c ****   int32_t N = ADC_BUF_T_SIZE;
 1759              		.loc 1 512 3 view .LVU443
 513:Core/Src/mainLoop.c ****   uint32_t allSum = 0;
 1760              		.loc 1 513 3 view .LVU444
 514:Core/Src/mainLoop.c ****   uint16_t forSaveAllSum = 0;
 1761              		.loc 1 514 3 view .LVU445
 515:Core/Src/mainLoop.c ****   uint32_t tmpUint32 = 0;
 1762              		.loc 1 515 3 view .LVU446
 516:Core/Src/mainLoop.c ****   int32_t deltNoisV = 0;
 1763              		.loc 1 516 3 view .LVU447
 517:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_SET);
 1764              		.loc 1 517 3 view .LVU448
 1765 000a 0122     		movs	r2, #1
 1766              	.LVL190:
 1767              		.loc 1 517 3 is_stmt 0 view .LVU449
 1768 000c 4FF48051 		mov	r1, #4096
 1769              	.LVL191:
 1770              		.loc 1 517 3 view .LVU450
 1771 0010 6D48     		ldr	r0, .L123+24
 1772              	.LVL192:
 1773              		.loc 1 517 3 view .LVU451
 1774 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1775              	.LVL193:
 518:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1776              		.loc 1 518 3 is_stmt 1 view .LVU452
 1777              		.loc 1 518 10 is_stmt 0 view .LVU453
 1778 0016 0023     		movs	r3, #0
 1779              	.LVL194:
 1780              	.L110:
 1781              		.loc 1 518 15 is_stmt 1 discriminator 1 view .LVU454
 1782              		.loc 1 518 3 is_stmt 0 discriminator 1 view .LVU455
ARM GAS  /tmp/ccKZYdRz.s 			page 43


 1783 0018 632B     		cmp	r3, #99
 1784 001a 01DC     		bgt	.L119
 519:Core/Src/mainLoop.c ****     allSum += (uint32_t)((adc_buf->buf[i] & 0x0fff));
 1785              		.loc 1 519 5 is_stmt 1 discriminator 3 view .LVU456
 520:Core/Src/mainLoop.c ****     allSum += (uint32_t)(((adc_buf->buf[i] >> 16) & 0x0fff));
 1786              		.loc 1 520 5 discriminator 3 view .LVU457
 518:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1787              		.loc 1 518 22 discriminator 3 view .LVU458
 518:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1788              		.loc 1 518 23 is_stmt 0 discriminator 3 view .LVU459
 1789 001c 0133     		adds	r3, r3, #1
 1790              	.LVL195:
 518:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 1791              		.loc 1 518 23 discriminator 3 view .LVU460
 1792 001e FBE7     		b	.L110
 1793              	.L119:
 521:Core/Src/mainLoop.c ****   }
 522:Core/Src/mainLoop.c ****   allSum = allSum / (N * 2);
 1794              		.loc 1 522 3 is_stmt 1 view .LVU461
 523:Core/Src/mainLoop.c ****   allSum = (adc_buf->buf[99] & 0x0fff);
 1795              		.loc 1 523 3 view .LVU462
 1796              		.loc 1 523 25 is_stmt 0 view .LVU463
 1797 0020 D4F89071 		ldr	r7, [r4, #400]
 1798              		.loc 1 523 10 view .LVU464
 1799 0024 C7F30B08 		ubfx	r8, r7, #0, #12
 1800              	.LVL196:
 524:Core/Src/mainLoop.c ****   forSaveAllSum = allSum;
 1801              		.loc 1 524 3 is_stmt 1 view .LVU465
 1802              		.loc 1 524 17 is_stmt 0 view .LVU466
 1803 0028 4746     		mov	r7, r8
 1804              	.LVL197:
 525:Core/Src/mainLoop.c ****   allSum = allSum - TARGET_CPV;
 1805              		.loc 1 525 3 is_stmt 1 view .LVU467
 1806              		.loc 1 525 10 is_stmt 0 view .LVU468
 1807 002a A8F61848 		subw	r8, r8, #3096
 1808              	.LVL198:
 526:Core/Src/mainLoop.c ****   insertMeanVal(allSum, adc_buf);
 1809              		.loc 1 526 3 is_stmt 1 view .LVU469
 1810 002e 2146     		mov	r1, r4
 1811 0030 4046     		mov	r0, r8
 1812 0032 FFF7FEFF 		bl	insertMeanVal
 1813              	.LVL199:
 527:Core/Src/mainLoop.c ****   meanVal_view = adc_buf->adcMeanVal;
 1814              		.loc 1 527 3 view .LVU470
 1815              		.loc 1 527 25 is_stmt 0 view .LVU471
 1816 0036 D4F89421 		ldr	r2, [r4, #404]
 1817              		.loc 1 527 16 view .LVU472
 1818 003a 644B     		ldr	r3, .L123+28
 1819 003c 1A60     		str	r2, [r3]
 528:Core/Src/mainLoop.c ****   difVal_view = adc_buf->adcDif2;
 1820              		.loc 1 528 3 is_stmt 1 view .LVU473
 1821              		.loc 1 528 24 is_stmt 0 view .LVU474
 1822 003e D4F89821 		ldr	r2, [r4, #408]
 1823              		.loc 1 528 15 view .LVU475
 1824 0042 634B     		ldr	r3, .L123+32
 1825 0044 1A60     		str	r2, [r3]
 529:Core/Src/mainLoop.c **** 
ARM GAS  /tmp/ccKZYdRz.s 			page 44


 530:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE - 1; i++) {
 1826              		.loc 1 530 3 is_stmt 1 view .LVU476
 1827              	.LVL200:
 1828              		.loc 1 530 10 is_stmt 0 view .LVU477
 1829 0046 0023     		movs	r3, #0
 1830              	.LVL201:
 1831              	.L112:
 1832              		.loc 1 530 15 is_stmt 1 discriminator 1 view .LVU478
 1833              		.loc 1 530 3 is_stmt 0 discriminator 1 view .LVU479
 1834 0048 40F2E632 		movw	r2, #998
 1835 004c 9342     		cmp	r3, r2
 1836 004e 07DC     		bgt	.L120
 531:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1837              		.loc 1 531 5 is_stmt 1 discriminator 3 view .LVU480
 1838              		.loc 1 531 36 is_stmt 0 discriminator 3 view .LVU481
 1839 0050 5A1C     		adds	r2, r3, #1
 1840              		.loc 1 531 33 discriminator 3 view .LVU482
 1841 0052 6049     		ldr	r1, .L123+36
 1842 0054 51F82200 		ldr	r0, [r1, r2, lsl #2]
 1843              		.loc 1 531 20 discriminator 3 view .LVU483
 1844 0058 41F82300 		str	r0, [r1, r3, lsl #2]
 530:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1845              		.loc 1 530 41 is_stmt 1 discriminator 3 view .LVU484
 1846              	.LVL202:
 530:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 1847              		.loc 1 530 42 is_stmt 0 discriminator 3 view .LVU485
 1848 005c 1346     		mov	r3, r2
 1849 005e F3E7     		b	.L112
 1850              	.LVL203:
 1851              	.L120:
 532:Core/Src/mainLoop.c ****   }
 533:Core/Src/mainLoop.c ****   adcSumArray[ADCSUMARRAY_SIZE - 1] = allSum;
 1852              		.loc 1 533 3 is_stmt 1 view .LVU486
 1853              		.loc 1 533 37 is_stmt 0 view .LVU487
 1854 0060 5C4B     		ldr	r3, .L123+36
 1855              	.LVL204:
 1856              		.loc 1 533 37 view .LVU488
 1857 0062 C3F89C8F 		str	r8, [r3, #3996]
 534:Core/Src/mainLoop.c **** 
 535:Core/Src/mainLoop.c ****   // pid
 536:Core/Src/mainLoop.c ****   pidP = adcSumArray[ADCSUMARRAY_SIZE - 1];
 1858              		.loc 1 536 3 is_stmt 1 view .LVU489
 1859              		.loc 1 536 8 is_stmt 0 view .LVU490
 1860 0066 5C4B     		ldr	r3, .L123+40
 1861 0068 C3F80080 		str	r8, [r3]
 537:Core/Src/mainLoop.c ****   pidI = 0;
 1862              		.loc 1 537 3 is_stmt 1 view .LVU491
 1863              		.loc 1 537 8 is_stmt 0 view .LVU492
 1864 006c 0023     		movs	r3, #0
 1865 006e 5B4A     		ldr	r2, .L123+44
 1866 0070 1360     		str	r3, [r2]
 538:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1867              		.loc 1 538 3 is_stmt 1 view .LVU493
 1868              	.LVL205:
 1869              	.L114:
 1870              		.loc 1 538 15 discriminator 1 view .LVU494
 1871              		.loc 1 538 3 is_stmt 0 discriminator 1 view .LVU495
ARM GAS  /tmp/ccKZYdRz.s 			page 45


 1872 0072 B3F57A7F 		cmp	r3, #1000
 1873 0076 08DA     		bge	.L121
 539:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 1874              		.loc 1 539 5 is_stmt 1 discriminator 3 view .LVU496
 1875              		.loc 1 539 24 is_stmt 0 discriminator 3 view .LVU497
 1876 0078 564A     		ldr	r2, .L123+36
 1877 007a 52F82300 		ldr	r0, [r2, r3, lsl #2]
 1878              		.loc 1 539 10 discriminator 3 view .LVU498
 1879 007e 5749     		ldr	r1, .L123+44
 1880 0080 0A68     		ldr	r2, [r1]
 1881 0082 0244     		add	r2, r2, r0
 1882 0084 0A60     		str	r2, [r1]
 538:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1883              		.loc 1 538 37 is_stmt 1 discriminator 3 view .LVU499
 538:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1884              		.loc 1 538 38 is_stmt 0 discriminator 3 view .LVU500
 1885 0086 0133     		adds	r3, r3, #1
 1886              	.LVL206:
 538:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 1887              		.loc 1 538 38 discriminator 3 view .LVU501
 1888 0088 F3E7     		b	.L114
 1889              	.L121:
 540:Core/Src/mainLoop.c ****   }
 541:Core/Src/mainLoop.c ****   pidI = pidI / ADCSUMARRAY_SIZE;
 1890              		.loc 1 541 3 is_stmt 1 view .LVU502
 1891              		.loc 1 541 15 is_stmt 0 view .LVU503
 1892 008a 5449     		ldr	r1, .L123+44
 1893 008c 0B68     		ldr	r3, [r1]
 1894              	.LVL207:
 1895              		.loc 1 541 15 view .LVU504
 1896 008e 544A     		ldr	r2, .L123+48
 1897 0090 82FB032A 		smull	r2, r10, r2, r3
 1898 0094 DB17     		asrs	r3, r3, #31
 1899 0096 C3EBAA1A 		rsb	r10, r3, r10, asr #6
 1900              		.loc 1 541 8 view .LVU505
 1901 009a C1F800A0 		str	r10, [r1]
 542:Core/Src/mainLoop.c ****   pidD = adcSumArray[ADCSUMARRAY_SIZE - 1] - adcSumArray[ADCSUMARRAY_SIZE - 2];
 1902              		.loc 1 542 3 is_stmt 1 view .LVU506
 1903              		.loc 1 542 57 is_stmt 0 view .LVU507
 1904 009e 4D4B     		ldr	r3, .L123+36
 1905 00a0 D3F8983F 		ldr	r3, [r3, #3992]
 1906              		.loc 1 542 44 view .LVU508
 1907 00a4 A8EB030B 		sub	fp, r8, r3
 1908              		.loc 1 542 8 view .LVU509
 1909 00a8 4E4B     		ldr	r3, .L123+52
 1910 00aa C3F800B0 		str	fp, [r3]
 543:Core/Src/mainLoop.c ****   dletDac = kP * ((float_t)pidP) + kI * ((float_t)pidI) + kD * ((float_t)pidD);
 1911              		.loc 1 543 3 is_stmt 1 view .LVU510
 1912              		.loc 1 543 19 is_stmt 0 view .LVU511
 1913 00ae 07EE908A 		vmov	s15, r8	@ int
 1914 00b2 F8EEE77A 		vcvt.f32.s32	s15, s15
 1915 00b6 17EE900A 		vmov	r0, s15
 1916 00ba FFF7FEFF 		bl	__aeabi_f2d
 1917              	.LVL208:
 1918              		.loc 1 543 16 view .LVU512
 1919 00be 3CA3     		adr	r3, .L123
 1920 00c0 D3E90023 		ldrd	r2, [r3]
ARM GAS  /tmp/ccKZYdRz.s 			page 46


 1921 00c4 FFF7FEFF 		bl	__aeabi_dmul
 1922              	.LVL209:
 1923 00c8 8046     		mov	r8, r0
 1924 00ca 8946     		mov	r9, r1
 1925              		.loc 1 543 42 view .LVU513
 1926 00cc 07EE90AA 		vmov	s15, r10	@ int
 1927 00d0 F8EEE77A 		vcvt.f32.s32	s15, s15
 1928 00d4 17EE900A 		vmov	r0, s15
 1929 00d8 FFF7FEFF 		bl	__aeabi_f2d
 1930              	.LVL210:
 1931              		.loc 1 543 39 view .LVU514
 1932 00dc 36A3     		adr	r3, .L123+8
 1933 00de D3E90023 		ldrd	r2, [r3]
 1934 00e2 FFF7FEFF 		bl	__aeabi_dmul
 1935              	.LVL211:
 1936 00e6 0246     		mov	r2, r0
 1937 00e8 0B46     		mov	r3, r1
 1938              		.loc 1 543 34 view .LVU515
 1939 00ea 4046     		mov	r0, r8
 1940 00ec 4946     		mov	r1, r9
 1941 00ee FFF7FEFF 		bl	__aeabi_dadd
 1942              	.LVL212:
 1943 00f2 8046     		mov	r8, r0
 1944 00f4 8946     		mov	r9, r1
 1945              		.loc 1 543 65 view .LVU516
 1946 00f6 07EE90BA 		vmov	s15, fp	@ int
 1947 00fa F8EEE77A 		vcvt.f32.s32	s15, s15
 1948 00fe 17EE900A 		vmov	r0, s15
 1949 0102 FFF7FEFF 		bl	__aeabi_f2d
 1950              	.LVL213:
 1951              		.loc 1 543 62 view .LVU517
 1952 0106 2EA3     		adr	r3, .L123+16
 1953 0108 D3E90023 		ldrd	r2, [r3]
 1954 010c FFF7FEFF 		bl	__aeabi_dmul
 1955              	.LVL214:
 1956 0110 0246     		mov	r2, r0
 1957 0112 0B46     		mov	r3, r1
 1958              		.loc 1 543 57 view .LVU518
 1959 0114 4046     		mov	r0, r8
 1960 0116 4946     		mov	r1, r9
 1961 0118 FFF7FEFF 		bl	__aeabi_dadd
 1962              	.LVL215:
 1963 011c FFF7FEFF 		bl	__aeabi_d2f
 1964              	.LVL216:
 1965 0120 07EE900A 		vmov	s15, r0
 1966              		.loc 1 543 11 view .LVU519
 1967 0124 304A     		ldr	r2, .L123+56
 1968 0126 1060     		str	r0, [r2]	@ float
 544:Core/Src/mainLoop.c ****   tmpUint32 = abs((int32_t)(dletDac));
 1969              		.loc 1 544 3 is_stmt 1 view .LVU520
 1970              		.loc 1 544 19 is_stmt 0 view .LVU521
 1971 0128 FDEEE77A 		vcvt.s32.f32	s15, s15
 1972              	.LVL217:
 545:Core/Src/mainLoop.c ****   // if(runTime500us < RUN_30S) { //nomal operate
 546:Core/Src/mainLoop.c ****   // 	deltNoisV = 0;
 547:Core/Src/mainLoop.c ****   // }else { //add noise
 548:Core/Src/mainLoop.c ****   // 	if((runTime500us&0x01) != 0){ //2ms
ARM GAS  /tmp/ccKZYdRz.s 			page 47


 549:Core/Src/mainLoop.c ****   // 		deltNoisV = 3;
 550:Core/Src/mainLoop.c ****   // 		HAL_GPIO_TogglePin(LED5_GPIO_Port, LED5_Pin);
 551:Core/Src/mainLoop.c ****   // 	}else{
 552:Core/Src/mainLoop.c ****   // 		deltNoisV = 0;
 553:Core/Src/mainLoop.c ****   // 		HAL_GPIO_TogglePin(LED5_GPIO_Port, LED5_Pin);
 554:Core/Src/mainLoop.c ****   // 	}
 555:Core/Src/mainLoop.c ****   // }
 556:Core/Src/mainLoop.c ****   deltNoisV = 0;
 1973              		.loc 1 556 3 is_stmt 1 view .LVU522
 557:Core/Src/mainLoop.c ****   (*dacP) += (int32_t)(dletDac);
 1974              		.loc 1 557 3 view .LVU523
 1975              		.loc 1 557 11 is_stmt 0 view .LVU524
 1976 012c 2B68     		ldr	r3, [r5]
 1977 012e 17EE901A 		vmov	r1, s15	@ int
 1978 0132 0B44     		add	r3, r3, r1
 1979 0134 2B60     		str	r3, [r5]
 558:Core/Src/mainLoop.c ****   (*dacN) -= (int32_t)(dletDac);
 1980              		.loc 1 558 3 is_stmt 1 view .LVU525
 1981              		.loc 1 558 14 is_stmt 0 view .LVU526
 1982 0136 D2ED007A 		vldr.32	s15, [r2]
 1983              	.LVL218:
 1984              		.loc 1 558 14 view .LVU527
 1985 013a FDEEE77A 		vcvt.s32.f32	s15, s15
 1986              		.loc 1 558 11 view .LVU528
 1987 013e 3368     		ldr	r3, [r6]
 1988 0140 17EE902A 		vmov	r2, s15	@ int
 1989 0144 9B1A     		subs	r3, r3, r2
 1990 0146 3360     		str	r3, [r6]
 559:Core/Src/mainLoop.c ****   (*dacP) += deltNoisV;
 1991              		.loc 1 559 3 is_stmt 1 view .LVU529
 1992              		.loc 1 559 11 is_stmt 0 view .LVU530
 1993 0148 2968     		ldr	r1, [r5]
 1994              	.LVL219:
 560:Core/Src/mainLoop.c ****   (*dacN) -= deltNoisV;
 1995              		.loc 1 560 3 is_stmt 1 view .LVU531
 561:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1, (*dacP) >> 12, max_outenable);
 1996              		.loc 1 561 3 view .LVU532
 1997 014a 0122     		movs	r2, #1
 1998 014c 090B     		lsrs	r1, r1, #12
 1999 014e 0620     		movs	r0, #6
 2000              	.LVL220:
 2001              		.loc 1 561 3 is_stmt 0 view .LVU533
 2002 0150 FFF7FEFF 		bl	max5307_w_chanel
 2003              	.LVL221:
 562:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1K, ((*dacP) & 0xfff), max_outenable);
 2004              		.loc 1 562 3 is_stmt 1 view .LVU534
 2005              		.loc 1 562 31 is_stmt 0 view .LVU535
 2006 0154 2968     		ldr	r1, [r5]
 2007              		.loc 1 562 3 view .LVU536
 2008 0156 0122     		movs	r2, #1
 2009 0158 C1F30B01 		ubfx	r1, r1, #0, #12
 2010 015c 0720     		movs	r0, #7
 2011 015e FFF7FEFF 		bl	max5307_w_chanel
 2012              	.LVL222:
 563:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1, (*dacN) >> 12, max_outenable);
 2013              		.loc 1 563 3 is_stmt 1 view .LVU537
 2014              		.loc 1 563 29 is_stmt 0 view .LVU538
ARM GAS  /tmp/ccKZYdRz.s 			page 48


 2015 0162 3168     		ldr	r1, [r6]
 2016              		.loc 1 563 3 view .LVU539
 2017 0164 0122     		movs	r2, #1
 2018 0166 090B     		lsrs	r1, r1, #12
 2019 0168 0520     		movs	r0, #5
 2020 016a FFF7FEFF 		bl	max5307_w_chanel
 2021              	.LVL223:
 564:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1K, ((*dacN) & 0xfff), max_outenable);
 2022              		.loc 1 564 3 is_stmt 1 view .LVU540
 2023              		.loc 1 564 31 is_stmt 0 view .LVU541
 2024 016e 3168     		ldr	r1, [r6]
 2025              		.loc 1 564 3 view .LVU542
 2026 0170 0122     		movs	r2, #1
 2027 0172 C1F30B01 		ubfx	r1, r1, #0, #12
 2028 0176 0420     		movs	r0, #4
 2029 0178 FFF7FEFF 		bl	max5307_w_chanel
 2030              	.LVL224:
 565:Core/Src/mainLoop.c **** 
 566:Core/Src/mainLoop.c ****   // clear buf
 567:Core/Src/mainLoop.c ****   for (i = 0; i < ADC_BUF_T_SIZE; i++) {
 2031              		.loc 1 567 3 is_stmt 1 view .LVU543
 2032              		.loc 1 567 10 is_stmt 0 view .LVU544
 2033 017c 0023     		movs	r3, #0
 2034              	.LVL225:
 2035              	.L116:
 2036              		.loc 1 567 15 is_stmt 1 discriminator 1 view .LVU545
 2037              		.loc 1 567 3 is_stmt 0 discriminator 1 view .LVU546
 2038 017e 632B     		cmp	r3, #99
 2039 0180 05DC     		bgt	.L122
 568:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2040              		.loc 1 568 5 is_stmt 1 discriminator 3 view .LVU547
 2041              		.loc 1 568 21 is_stmt 0 discriminator 3 view .LVU548
 2042 0182 04EB8302 		add	r2, r4, r3, lsl #2
 2043 0186 0021     		movs	r1, #0
 2044 0188 5160     		str	r1, [r2, #4]
 567:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2045              		.loc 1 567 35 is_stmt 1 discriminator 3 view .LVU549
 567:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2046              		.loc 1 567 36 is_stmt 0 discriminator 3 view .LVU550
 2047 018a 0133     		adds	r3, r3, #1
 2048              	.LVL226:
 567:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2049              		.loc 1 567 36 discriminator 3 view .LVU551
 2050 018c F7E7     		b	.L116
 2051              	.L122:
 569:Core/Src/mainLoop.c ****   }
 570:Core/Src/mainLoop.c ****   logPara.mean_adc_val = forSaveAllSum;
 2052              		.loc 1 570 3 is_stmt 1 view .LVU552
 2053              		.loc 1 570 24 is_stmt 0 view .LVU553
 2054 018e 174B     		ldr	r3, .L123+60
 2055              	.LVL227:
 2056              		.loc 1 570 24 view .LVU554
 2057 0190 A3F80170 		strh	r7, [r3, #1]	@ unaligned
 571:Core/Src/mainLoop.c ****   logPara.dac_val_n = (*dacN);
 2058              		.loc 1 571 3 is_stmt 1 view .LVU555
 2059              		.loc 1 571 24 is_stmt 0 view .LVU556
 2060 0194 3268     		ldr	r2, [r6]
ARM GAS  /tmp/ccKZYdRz.s 			page 49


 2061              		.loc 1 571 21 view .LVU557
 2062 0196 C3F80720 		str	r2, [r3, #7]	@ unaligned
 572:Core/Src/mainLoop.c ****   logPara.dac_val_p = (*dacP);
 2063              		.loc 1 572 3 is_stmt 1 view .LVU558
 2064              		.loc 1 572 24 is_stmt 0 view .LVU559
 2065 019a 2A68     		ldr	r2, [r5]
 2066              		.loc 1 572 21 view .LVU560
 2067 019c C3F80320 		str	r2, [r3, #3]	@ unaligned
 573:Core/Src/mainLoop.c ****   // HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 574:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_RESET);
 2068              		.loc 1 574 3 is_stmt 1 view .LVU561
 2069 01a0 0022     		movs	r2, #0
 2070 01a2 4FF48051 		mov	r1, #4096
 2071 01a6 0848     		ldr	r0, .L123+24
 2072 01a8 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2073              	.LVL228:
 575:Core/Src/mainLoop.c **** }
 2074              		.loc 1 575 1 is_stmt 0 view .LVU562
 2075 01ac BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2076              	.LVL229:
 2077              	.L124:
 2078              		.loc 1 575 1 view .LVU563
 2079              		.align	3
 2080              	.L123:
 2081 01b0 FCA9F1D2 		.word	3539053052
 2082 01b4 4D6240BF 		.word	-1086299571
 2083 01b8 88855AD3 		.word	3545925000
 2084 01bc BCE3743F 		.word	1064625084
 2085 01c0 0AD7A370 		.word	1889785610
 2086 01c4 3D0AF23F 		.word	1072826941
 2087 01c8 00080240 		.word	1073874944
 2088 01cc 00000000 		.word	.LANCHOR9
 2089 01d0 00000000 		.word	.LANCHOR10
 2090 01d4 00000000 		.word	adcSumArray
 2091 01d8 00000000 		.word	.LANCHOR4
 2092 01dc 00000000 		.word	.LANCHOR5
 2093 01e0 D34D6210 		.word	274877907
 2094 01e4 00000000 		.word	.LANCHOR6
 2095 01e8 00000000 		.word	.LANCHOR7
 2096 01ec 00000000 		.word	logPara
 2097              		.cfi_endproc
 2098              	.LFE147:
 2100              		.section	.text.cal_cp_output_dac_ext_1,"ax",%progbits
 2101              		.align	1
 2102              		.global	cal_cp_output_dac_ext_1
 2103              		.syntax unified
 2104              		.thumb
 2105              		.thumb_func
 2106              		.fpu fpv4-sp-d16
 2108              	cal_cp_output_dac_ext_1:
 2109              	.LVL230:
 2110              	.LFB148:
 576:Core/Src/mainLoop.c **** 
 577:Core/Src/mainLoop.c **** uint16_t forSaveAllSum = 0;
 578:Core/Src/mainLoop.c **** // 2024.4.26Ë∞ÉÊï¥Ë∑üË∏™ÁÆóÊ≥ïÔºå‰ª•ÂâçÁöÑÁÆóÊ≥ïÊúâÂèØËÉΩ‰ºöÂá∫Áé∞ÂêåÊ≠•Áé∞Ë±°
 579:Core/Src/mainLoop.c **** #define TARGET_CPV_1 (2048)
 580:Core/Src/mainLoop.c **** void cal_cp_output_dac_ext_1(struct adc_buf_t *adc_buf, uint32_t *dacP,
ARM GAS  /tmp/ccKZYdRz.s 			page 50


 581:Core/Src/mainLoop.c ****                              uint32_t *dacN, int32_t runTime500us) {
 2111              		.loc 1 581 68 is_stmt 1 view -0
 2112              		.cfi_startproc
 2113              		@ args = 0, pretend = 0, frame = 0
 2114              		@ frame_needed = 0, uses_anonymous_args = 0
 2115              		.loc 1 581 68 is_stmt 0 view .LVU565
 2116 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2117              	.LCFI18:
 2118              		.cfi_def_cfa_offset 32
 2119              		.cfi_offset 4, -32
 2120              		.cfi_offset 5, -28
 2121              		.cfi_offset 6, -24
 2122              		.cfi_offset 7, -20
 2123              		.cfi_offset 8, -16
 2124              		.cfi_offset 9, -12
 2125              		.cfi_offset 10, -8
 2126              		.cfi_offset 14, -4
 2127 0004 0546     		mov	r5, r0
 2128 0006 0E46     		mov	r6, r1
 2129 0008 1746     		mov	r7, r2
 582:Core/Src/mainLoop.c ****   int32_t i = 0;
 2130              		.loc 1 582 3 is_stmt 1 view .LVU566
 2131              	.LVL231:
 583:Core/Src/mainLoop.c ****   int32_t N = ADC_BUF_T_SIZE;
 2132              		.loc 1 583 3 view .LVU567
 584:Core/Src/mainLoop.c ****   int32_t allSum = 0;
 2133              		.loc 1 584 3 view .LVU568
 585:Core/Src/mainLoop.c **** 
 586:Core/Src/mainLoop.c ****   uint32_t tmpUint32 = 0;
 2134              		.loc 1 586 3 view .LVU569
 587:Core/Src/mainLoop.c ****   int32_t deltNoisV = 0;
 2135              		.loc 1 587 3 view .LVU570
 588:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_SET);
 2136              		.loc 1 588 3 view .LVU571
 2137 000a 0122     		movs	r2, #1
 2138              	.LVL232:
 2139              		.loc 1 588 3 is_stmt 0 view .LVU572
 2140 000c 4FF48051 		mov	r1, #4096
 2141              	.LVL233:
 2142              		.loc 1 588 3 view .LVU573
 2143 0010 6B48     		ldr	r0, .L139+24
 2144              	.LVL234:
 2145              		.loc 1 588 3 view .LVU574
 2146 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2147              	.LVL235:
 589:Core/Src/mainLoop.c **** 
 590:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 2148              		.loc 1 590 3 is_stmt 1 view .LVU575
 2149              		.loc 1 590 10 is_stmt 0 view .LVU576
 2150 0016 0023     		movs	r3, #0
 2151              	.LVL236:
 2152              	.L126:
 2153              		.loc 1 590 15 is_stmt 1 discriminator 1 view .LVU577
 2154              		.loc 1 590 3 is_stmt 0 discriminator 1 view .LVU578
 2155 0018 632B     		cmp	r3, #99
 2156 001a 01DC     		bgt	.L135
 591:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i] & 0x0fff));
ARM GAS  /tmp/ccKZYdRz.s 			page 51


 2157              		.loc 1 591 5 is_stmt 1 discriminator 3 view .LVU579
 592:Core/Src/mainLoop.c ****     allSum += (int32_t)(((adc_buf->buf[i] >> 16) & 0x0fff));
 2158              		.loc 1 592 5 discriminator 3 view .LVU580
 590:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i] & 0x0fff));
 2159              		.loc 1 590 22 discriminator 3 view .LVU581
 590:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i] & 0x0fff));
 2160              		.loc 1 590 23 is_stmt 0 discriminator 3 view .LVU582
 2161 001c 0133     		adds	r3, r3, #1
 2162              	.LVL237:
 590:Core/Src/mainLoop.c ****     allSum += (int32_t)((adc_buf->buf[i] & 0x0fff));
 2163              		.loc 1 590 23 discriminator 3 view .LVU583
 2164 001e FBE7     		b	.L126
 2165              	.L135:
 593:Core/Src/mainLoop.c ****   }
 594:Core/Src/mainLoop.c ****   allSum = allSum / (N * 2);
 2166              		.loc 1 594 3 is_stmt 1 view .LVU584
 595:Core/Src/mainLoop.c ****   allSum = adc_buf->buf[0];
 2167              		.loc 1 595 3 view .LVU585
 2168              		.loc 1 595 24 is_stmt 0 view .LVU586
 2169 0020 6868     		ldr	r0, [r5, #4]
 2170              	.LVL238:
 596:Core/Src/mainLoop.c ****   //  allSum = (adc_buf->buf[99]&0x0fff);
 597:Core/Src/mainLoop.c ****   forSaveAllSum = allSum;
 2171              		.loc 1 597 3 is_stmt 1 view .LVU587
 598:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACP_1,  (((adc_buf->buf[0]) >> 0)&0xfff), max_outenable);
 599:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACN_1,  (((adc_buf->buf[0]) >> 0)&0xfff), max_outenable);
 600:Core/Src/mainLoop.c ****   // return;
 601:Core/Src/mainLoop.c ****   // allSum = allSum - TARGET_CPV_1;
 602:Core/Src/mainLoop.c ****   forSaveAllSum = abs(allSum);
 2172              		.loc 1 602 3 view .LVU588
 2173              		.loc 1 602 19 is_stmt 0 view .LVU589
 2174 0022 80EAE072 		eor	r2, r0, r0, asr #31
 2175 0026 A2EBE072 		sub	r2, r2, r0, asr #31
 2176              		.loc 1 602 17 view .LVU590
 2177 002a 664B     		ldr	r3, .L139+28
 2178              	.LVL239:
 2179              		.loc 1 602 17 view .LVU591
 2180 002c 1A80     		strh	r2, [r3]	@ movhi
 603:Core/Src/mainLoop.c ****   // insertMeanVal(allSum,adc_buf);
 604:Core/Src/mainLoop.c ****   // meanVal_view = adc_buf->adcMeanVal;
 605:Core/Src/mainLoop.c ****   // difVal_view  = adc_buf->adcDif2;
 606:Core/Src/mainLoop.c **** 
 607:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE - 1; i++) {
 2181              		.loc 1 607 3 is_stmt 1 view .LVU592
 2182              	.LVL240:
 2183              		.loc 1 607 10 is_stmt 0 view .LVU593
 2184 002e 0023     		movs	r3, #0
 2185              	.LVL241:
 2186              	.L128:
 2187              		.loc 1 607 15 is_stmt 1 discriminator 1 view .LVU594
 2188              		.loc 1 607 3 is_stmt 0 discriminator 1 view .LVU595
 2189 0030 40F2E632 		movw	r2, #998
 2190 0034 9342     		cmp	r3, r2
 2191 0036 07DC     		bgt	.L136
 608:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 2192              		.loc 1 608 5 is_stmt 1 discriminator 3 view .LVU596
 2193              		.loc 1 608 36 is_stmt 0 discriminator 3 view .LVU597
ARM GAS  /tmp/ccKZYdRz.s 			page 52


 2194 0038 5A1C     		adds	r2, r3, #1
 2195              		.loc 1 608 33 discriminator 3 view .LVU598
 2196 003a 6349     		ldr	r1, .L139+32
 2197 003c 51F82240 		ldr	r4, [r1, r2, lsl #2]
 2198              		.loc 1 608 20 discriminator 3 view .LVU599
 2199 0040 41F82340 		str	r4, [r1, r3, lsl #2]
 607:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 2200              		.loc 1 607 41 is_stmt 1 discriminator 3 view .LVU600
 2201              	.LVL242:
 607:Core/Src/mainLoop.c ****     adcSumArray[i] = adcSumArray[i + 1];
 2202              		.loc 1 607 42 is_stmt 0 discriminator 3 view .LVU601
 2203 0044 1346     		mov	r3, r2
 2204 0046 F3E7     		b	.L128
 2205              	.LVL243:
 2206              	.L136:
 609:Core/Src/mainLoop.c ****   }
 610:Core/Src/mainLoop.c ****   adcSumArray[ADCSUMARRAY_SIZE - 1] = allSum;
 2207              		.loc 1 610 3 is_stmt 1 view .LVU602
 2208              		.loc 1 610 37 is_stmt 0 view .LVU603
 2209 0048 5F4B     		ldr	r3, .L139+32
 2210              	.LVL244:
 2211              		.loc 1 610 37 view .LVU604
 2212 004a C3F89C0F 		str	r0, [r3, #3996]
 611:Core/Src/mainLoop.c **** 
 612:Core/Src/mainLoop.c ****   // pid
 613:Core/Src/mainLoop.c ****   pidP = adcSumArray[ADCSUMARRAY_SIZE - 1];
 2213              		.loc 1 613 3 is_stmt 1 view .LVU605
 2214              		.loc 1 613 8 is_stmt 0 view .LVU606
 2215 004e 5F4B     		ldr	r3, .L139+36
 2216 0050 1860     		str	r0, [r3]
 614:Core/Src/mainLoop.c ****   pidI = 0;
 2217              		.loc 1 614 3 is_stmt 1 view .LVU607
 2218              		.loc 1 614 8 is_stmt 0 view .LVU608
 2219 0052 0023     		movs	r3, #0
 2220 0054 5E4A     		ldr	r2, .L139+40
 2221 0056 1360     		str	r3, [r2]
 615:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 2222              		.loc 1 615 3 is_stmt 1 view .LVU609
 2223              	.LVL245:
 2224              	.L130:
 2225              		.loc 1 615 15 discriminator 1 view .LVU610
 2226              		.loc 1 615 3 is_stmt 0 discriminator 1 view .LVU611
 2227 0058 B3F57A7F 		cmp	r3, #1000
 2228 005c 08DA     		bge	.L137
 616:Core/Src/mainLoop.c ****     pidI += adcSumArray[i];
 2229              		.loc 1 616 5 is_stmt 1 discriminator 3 view .LVU612
 2230              		.loc 1 616 24 is_stmt 0 discriminator 3 view .LVU613
 2231 005e 5A4A     		ldr	r2, .L139+32
 2232 0060 52F82310 		ldr	r1, [r2, r3, lsl #2]
 2233              		.loc 1 616 10 discriminator 3 view .LVU614
 2234 0064 5A4A     		ldr	r2, .L139+40
 2235 0066 1468     		ldr	r4, [r2]
 2236 0068 0C44     		add	r4, r4, r1
 2237 006a 1460     		str	r4, [r2]
 615:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 2238              		.loc 1 615 37 is_stmt 1 discriminator 3 view .LVU615
 615:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
ARM GAS  /tmp/ccKZYdRz.s 			page 53


 2239              		.loc 1 615 38 is_stmt 0 discriminator 3 view .LVU616
 2240 006c 0133     		adds	r3, r3, #1
 2241              	.LVL246:
 615:Core/Src/mainLoop.c ****   for (i = 0; i < ADCSUMARRAY_SIZE; i++) {
 2242              		.loc 1 615 38 discriminator 3 view .LVU617
 2243 006e F3E7     		b	.L130
 2244              	.L137:
 617:Core/Src/mainLoop.c ****   }
 618:Core/Src/mainLoop.c ****   pidI = pidI / ADCSUMARRAY_SIZE;
 2245              		.loc 1 618 3 is_stmt 1 view .LVU618
 2246              		.loc 1 618 15 is_stmt 0 view .LVU619
 2247 0070 5749     		ldr	r1, .L139+40
 2248 0072 0B68     		ldr	r3, [r1]
 2249              	.LVL247:
 2250              		.loc 1 618 15 view .LVU620
 2251 0074 574A     		ldr	r2, .L139+44
 2252 0076 82FB032A 		smull	r2, r10, r2, r3
 2253 007a DB17     		asrs	r3, r3, #31
 2254 007c C3EBAA1A 		rsb	r10, r3, r10, asr #6
 2255              		.loc 1 618 8 view .LVU621
 2256 0080 C1F800A0 		str	r10, [r1]
 619:Core/Src/mainLoop.c ****   pidD = adcSumArray[ADCSUMARRAY_SIZE - 1] - adcSumArray[ADCSUMARRAY_SIZE - 2];
 2257              		.loc 1 619 3 is_stmt 1 view .LVU622
 2258              		.loc 1 619 57 is_stmt 0 view .LVU623
 2259 0084 504B     		ldr	r3, .L139+32
 2260 0086 D3F8984F 		ldr	r4, [r3, #3992]
 2261              		.loc 1 619 44 view .LVU624
 2262 008a 041B     		subs	r4, r0, r4
 2263              		.loc 1 619 8 view .LVU625
 2264 008c 524B     		ldr	r3, .L139+48
 2265 008e 1C60     		str	r4, [r3]
 620:Core/Src/mainLoop.c **** 
 621:Core/Src/mainLoop.c **** #define kP_1 ( 0.000000100000105)
 622:Core/Src/mainLoop.c **** #define kI_1 (-0.00000010551)
 623:Core/Src/mainLoop.c **** #define kD_1 (-0.00026)
 624:Core/Src/mainLoop.c ****   // 1,1k,1M‰∏âÊÆµÂèØ‰ª•Êî∂Êïõ
 625:Core/Src/mainLoop.c ****   //  #define kP_1 (-1000.05)
 626:Core/Src/mainLoop.c ****   //  #define kI_1 (+1000.51)
 627:Core/Src/mainLoop.c ****   //  #define kD_1 (1000.1275)
 628:Core/Src/mainLoop.c ****   // 1,1k‰∏§ÊÆµÂèØ‰ª•Êî∂Êïõ
 629:Core/Src/mainLoop.c ****   //  #define kP (-0.0005)
 630:Core/Src/mainLoop.c ****   //  #define kI (+0.0051)
 631:Core/Src/mainLoop.c ****   //  #define kD (1.1275)
 632:Core/Src/mainLoop.c ****   dletDac = kP_1 * ((double_t)pidP) + kI_1 * ((double_t)pidI) +
 2266              		.loc 1 632 3 is_stmt 1 view .LVU626
 2267              		.loc 1 632 21 is_stmt 0 view .LVU627
 2268 0090 FFF7FEFF 		bl	__aeabi_i2d
 2269              	.LVL248:
 2270              		.loc 1 632 18 view .LVU628
 2271 0094 44A3     		adr	r3, .L139
 2272 0096 D3E90023 		ldrd	r2, [r3]
 2273 009a FFF7FEFF 		bl	__aeabi_dmul
 2274              	.LVL249:
 2275 009e 8046     		mov	r8, r0
 2276 00a0 8946     		mov	r9, r1
 2277              		.loc 1 632 47 view .LVU629
 2278 00a2 5046     		mov	r0, r10
ARM GAS  /tmp/ccKZYdRz.s 			page 54


 2279 00a4 FFF7FEFF 		bl	__aeabi_i2d
 2280              	.LVL250:
 2281              		.loc 1 632 44 view .LVU630
 2282 00a8 41A3     		adr	r3, .L139+8
 2283 00aa D3E90023 		ldrd	r2, [r3]
 2284 00ae FFF7FEFF 		bl	__aeabi_dmul
 2285              	.LVL251:
 2286 00b2 0246     		mov	r2, r0
 2287 00b4 0B46     		mov	r3, r1
 2288              		.loc 1 632 37 view .LVU631
 2289 00b6 4046     		mov	r0, r8
 2290 00b8 4946     		mov	r1, r9
 2291 00ba FFF7FEFF 		bl	__aeabi_dadd
 2292              	.LVL252:
 2293 00be 8046     		mov	r8, r0
 2294 00c0 8946     		mov	r9, r1
 633:Core/Src/mainLoop.c ****             kD_1 * ((double_t)pidD);
 2295              		.loc 1 633 21 view .LVU632
 2296 00c2 2046     		mov	r0, r4
 2297 00c4 FFF7FEFF 		bl	__aeabi_i2d
 2298              	.LVL253:
 2299              		.loc 1 633 18 view .LVU633
 2300 00c8 3BA3     		adr	r3, .L139+16
 2301 00ca D3E90023 		ldrd	r2, [r3]
 2302 00ce FFF7FEFF 		bl	__aeabi_dmul
 2303              	.LVL254:
 2304 00d2 0246     		mov	r2, r0
 2305 00d4 0B46     		mov	r3, r1
 632:Core/Src/mainLoop.c ****             kD_1 * ((double_t)pidD);
 2306              		.loc 1 632 63 view .LVU634
 2307 00d6 4046     		mov	r0, r8
 2308 00d8 4946     		mov	r1, r9
 2309 00da FFF7FEFF 		bl	__aeabi_dadd
 2310              	.LVL255:
 2311 00de FFF7FEFF 		bl	__aeabi_d2f
 2312              	.LVL256:
 2313 00e2 07EE900A 		vmov	s15, r0
 632:Core/Src/mainLoop.c ****             kD_1 * ((double_t)pidD);
 2314              		.loc 1 632 11 view .LVU635
 2315 00e6 3D4A     		ldr	r2, .L139+52
 2316 00e8 1060     		str	r0, [r2]	@ float
 634:Core/Src/mainLoop.c ****   tmpUint32 = abs((int32_t)(dletDac));
 2317              		.loc 1 634 3 is_stmt 1 view .LVU636
 2318              		.loc 1 634 19 is_stmt 0 view .LVU637
 2319 00ea FDEEE77A 		vcvt.s32.f32	s15, s15
 2320              	.LVL257:
 635:Core/Src/mainLoop.c **** 
 636:Core/Src/mainLoop.c ****   deltNoisV = 0;
 2321              		.loc 1 636 3 is_stmt 1 view .LVU638
 637:Core/Src/mainLoop.c **** 
 638:Core/Src/mainLoop.c ****   // (*dacP) += (int32_t)(dletDac);
 639:Core/Src/mainLoop.c ****   // (*dacN) -= (int32_t)(dletDac);
 640:Core/Src/mainLoop.c ****   // (*dacP) += deltNoisV;
 641:Core/Src/mainLoop.c ****   // (*dacN) -= deltNoisV;
 642:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACP_1, ((*dacP)  >> 12)&0xfff, max_outdisable);
 643:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACP_1K, (((*dacP)>>0) & 0xfff), max_outdisable);
 644:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACN_1, ((*dacN)  >> 12)&0xfff, max_outdisable);
ARM GAS  /tmp/ccKZYdRz.s 			page 55


 645:Core/Src/mainLoop.c ****   // max5307_w_chanel(DACN_1K, (((*dacN)>>0) & 0xfff), max_outdisable);
 646:Core/Src/mainLoop.c **** 
 647:Core/Src/mainLoop.c ****   (*dacP) += (int32_t)(dletDac);
 2322              		.loc 1 647 3 view .LVU639
 2323              		.loc 1 647 11 is_stmt 0 view .LVU640
 2324 00ee 3368     		ldr	r3, [r6]
 2325 00f0 17EE901A 		vmov	r1, s15	@ int
 2326 00f4 0B44     		add	r3, r3, r1
 2327 00f6 3360     		str	r3, [r6]
 648:Core/Src/mainLoop.c ****   (*dacN) -= (int32_t)(dletDac);
 2328              		.loc 1 648 3 is_stmt 1 view .LVU641
 2329              		.loc 1 648 14 is_stmt 0 view .LVU642
 2330 00f8 D2ED007A 		vldr.32	s15, [r2]
 2331              	.LVL258:
 2332              		.loc 1 648 14 view .LVU643
 2333 00fc FDEEE77A 		vcvt.s32.f32	s15, s15
 2334              		.loc 1 648 11 view .LVU644
 2335 0100 3B68     		ldr	r3, [r7]
 2336 0102 17EE902A 		vmov	r2, s15	@ int
 2337 0106 9B1A     		subs	r3, r3, r2
 2338 0108 3B60     		str	r3, [r7]
 649:Core/Src/mainLoop.c ****   (*dacP) += deltNoisV;
 2339              		.loc 1 649 3 is_stmt 1 view .LVU645
 2340              		.loc 1 649 11 is_stmt 0 view .LVU646
 2341 010a 3168     		ldr	r1, [r6]
 2342              	.LVL259:
 650:Core/Src/mainLoop.c ****   (*dacN) -= deltNoisV;
 2343              		.loc 1 650 3 is_stmt 1 view .LVU647
 651:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1, (((*dacP) >> 20) & 0xffc), max_outdisable);
 2344              		.loc 1 651 3 view .LVU648
 2345 010c 40F6FC74 		movw	r4, #4092
 2346 0110 0222     		movs	r2, #2
 2347 0112 04EA1151 		and	r1, r4, r1, lsr #20
 2348 0116 0620     		movs	r0, #6
 2349              	.LVL260:
 2350              		.loc 1 651 3 is_stmt 0 view .LVU649
 2351 0118 FFF7FEFF 		bl	max5307_w_chanel
 2352              	.LVL261:
 652:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1K, (((*dacP) >> 10) & 0xffc), max_outdisable);
 2353              		.loc 1 652 3 is_stmt 1 view .LVU650
 2354              		.loc 1 652 32 is_stmt 0 view .LVU651
 2355 011c 3168     		ldr	r1, [r6]
 2356              		.loc 1 652 3 view .LVU652
 2357 011e 0222     		movs	r2, #2
 2358 0120 04EA9121 		and	r1, r4, r1, lsr #10
 2359 0124 0720     		movs	r0, #7
 2360 0126 FFF7FEFF 		bl	max5307_w_chanel
 2361              	.LVL262:
 653:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1M, ((*dacP) & 0xfff) & 0xfff, max_outdisable);
 2362              		.loc 1 653 3 is_stmt 1 view .LVU653
 2363              		.loc 1 653 31 is_stmt 0 view .LVU654
 2364 012a 3168     		ldr	r1, [r6]
 2365              		.loc 1 653 3 view .LVU655
 2366 012c 0222     		movs	r2, #2
 2367 012e C1F30B01 		ubfx	r1, r1, #0, #12
 2368 0132 0820     		movs	r0, #8
 2369 0134 FFF7FEFF 		bl	max5307_w_chanel
ARM GAS  /tmp/ccKZYdRz.s 			page 56


 2370              	.LVL263:
 654:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1, (((*dacN) >> 20) & 0xffc), max_outdisable);
 2371              		.loc 1 654 3 is_stmt 1 view .LVU656
 2372              		.loc 1 654 31 is_stmt 0 view .LVU657
 2373 0138 3968     		ldr	r1, [r7]
 2374              		.loc 1 654 3 view .LVU658
 2375 013a 0222     		movs	r2, #2
 2376 013c 04EA1151 		and	r1, r4, r1, lsr #20
 2377 0140 0520     		movs	r0, #5
 2378 0142 FFF7FEFF 		bl	max5307_w_chanel
 2379              	.LVL264:
 655:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1K, (((*dacN) >> 10) & 0xffc), max_outdisable);
 2380              		.loc 1 655 3 is_stmt 1 view .LVU659
 2381              		.loc 1 655 32 is_stmt 0 view .LVU660
 2382 0146 3968     		ldr	r1, [r7]
 2383              		.loc 1 655 3 view .LVU661
 2384 0148 0222     		movs	r2, #2
 2385 014a 04EA9121 		and	r1, r4, r1, lsr #10
 2386 014e 0420     		movs	r0, #4
 2387 0150 FFF7FEFF 		bl	max5307_w_chanel
 2388              	.LVL265:
 656:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1M, ((*dacN) & 0xfff) & 0xfff, max_outdisable);
 2389              		.loc 1 656 3 is_stmt 1 view .LVU662
 2390              		.loc 1 656 31 is_stmt 0 view .LVU663
 2391 0154 3968     		ldr	r1, [r7]
 2392              		.loc 1 656 3 view .LVU664
 2393 0156 0222     		movs	r2, #2
 2394 0158 C1F30B01 		ubfx	r1, r1, #0, #12
 2395 015c 0320     		movs	r0, #3
 2396 015e FFF7FEFF 		bl	max5307_w_chanel
 2397              	.LVL266:
 657:Core/Src/mainLoop.c **** 
 658:Core/Src/mainLoop.c ****   do {
 2398              		.loc 1 658 3 is_stmt 1 view .LVU665
 2399              	.LBB5:
 659:Core/Src/mainLoop.c ****     uint16_t chanelNo = 0;
 2400              		.loc 1 659 5 view .LVU666
 660:Core/Src/mainLoop.c ****     chanelNo = 0x01 << (DACP_1 + 2) | 0x01 << (DACP_1K + 2) |
 2401              		.loc 1 660 5 view .LVU667
 661:Core/Src/mainLoop.c ****                0x01 << (DACP_1M + 2) | 0x01 << (DACN_1 + 2) |
 662:Core/Src/mainLoop.c ****                0x01 << (DACN_1K + 2) | 0x01 << (DACN_1M + 2);
 663:Core/Src/mainLoop.c ****     max5307_enable_ori_chanel(chanelNo);
 2402              		.loc 1 663 5 view .LVU668
 2403 0162 4FF4FC60 		mov	r0, #2016
 2404 0166 FFF7FEFF 		bl	max5307_enable_ori_chanel
 2405              	.LVL267:
 2406              	.LBE5:
 664:Core/Src/mainLoop.c ****   } while (0);
 2407              		.loc 1 664 11 view .LVU669
 665:Core/Src/mainLoop.c **** 
 666:Core/Src/mainLoop.c ****   // clear buf
 667:Core/Src/mainLoop.c ****   for (i = 0; i < ADC_BUF_T_SIZE; i++) {
 2408              		.loc 1 667 3 view .LVU670
 2409              		.loc 1 667 10 is_stmt 0 view .LVU671
 2410 016a 0023     		movs	r3, #0
 2411              	.LVL268:
 2412              	.L132:
ARM GAS  /tmp/ccKZYdRz.s 			page 57


 2413              		.loc 1 667 15 is_stmt 1 discriminator 1 view .LVU672
 2414              		.loc 1 667 3 is_stmt 0 discriminator 1 view .LVU673
 2415 016c 632B     		cmp	r3, #99
 2416 016e 05DC     		bgt	.L138
 668:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2417              		.loc 1 668 5 is_stmt 1 discriminator 3 view .LVU674
 2418              		.loc 1 668 21 is_stmt 0 discriminator 3 view .LVU675
 2419 0170 05EB8302 		add	r2, r5, r3, lsl #2
 2420 0174 0021     		movs	r1, #0
 2421 0176 5160     		str	r1, [r2, #4]
 667:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2422              		.loc 1 667 35 is_stmt 1 discriminator 3 view .LVU676
 667:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2423              		.loc 1 667 36 is_stmt 0 discriminator 3 view .LVU677
 2424 0178 0133     		adds	r3, r3, #1
 2425              	.LVL269:
 667:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2426              		.loc 1 667 36 discriminator 3 view .LVU678
 2427 017a F7E7     		b	.L132
 2428              	.L138:
 669:Core/Src/mainLoop.c ****   }
 670:Core/Src/mainLoop.c ****   logPara.mean_adc_val = forSaveAllSum;
 2429              		.loc 1 670 3 is_stmt 1 view .LVU679
 2430              		.loc 1 670 24 is_stmt 0 view .LVU680
 2431 017c 184B     		ldr	r3, .L139+56
 2432              	.LVL270:
 2433              		.loc 1 670 24 view .LVU681
 2434 017e 114A     		ldr	r2, .L139+28
 2435 0180 1288     		ldrh	r2, [r2]
 2436 0182 A3F80120 		strh	r2, [r3, #1]	@ unaligned
 671:Core/Src/mainLoop.c ****   // logPara.mean_adc_val = pidI;
 672:Core/Src/mainLoop.c ****   logPara.dac_val_n = (*dacN);
 2437              		.loc 1 672 3 is_stmt 1 view .LVU682
 2438              		.loc 1 672 24 is_stmt 0 view .LVU683
 2439 0186 3A68     		ldr	r2, [r7]
 2440              		.loc 1 672 21 view .LVU684
 2441 0188 C3F80720 		str	r2, [r3, #7]	@ unaligned
 673:Core/Src/mainLoop.c ****   logPara.dac_val_p = (*dacP);
 2442              		.loc 1 673 3 is_stmt 1 view .LVU685
 2443              		.loc 1 673 24 is_stmt 0 view .LVU686
 2444 018c 3268     		ldr	r2, [r6]
 2445              		.loc 1 673 21 view .LVU687
 2446 018e C3F80320 		str	r2, [r3, #3]	@ unaligned
 674:Core/Src/mainLoop.c ****   // HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 675:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_RESET);
 2447              		.loc 1 675 3 is_stmt 1 view .LVU688
 2448 0192 0022     		movs	r2, #0
 2449 0194 4FF48051 		mov	r1, #4096
 2450 0198 0948     		ldr	r0, .L139+24
 2451 019a FFF7FEFF 		bl	HAL_GPIO_WritePin
 2452              	.LVL271:
 676:Core/Src/mainLoop.c **** }
 2453              		.loc 1 676 1 is_stmt 0 view .LVU689
 2454 019e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2455              	.LVL272:
 2456              	.L140:
 2457              		.loc 1 676 1 view .LVU690
ARM GAS  /tmp/ccKZYdRz.s 			page 58


 2458 01a2 00BFAFF3 		.align	3
 2458      0080
 2459              	.L139:
 2460 01a8 54719D73 		.word	1939698004
 2461 01ac F4D77A3E 		.word	1048238068
 2462 01b0 8411AF8C 		.word	2360283524
 2463 01b4 97527CBE 		.word	-1099148649
 2464 01b8 43C5387F 		.word	2134426947
 2465 01bc 130A31BF 		.word	-1087305197
 2466 01c0 00080240 		.word	1073874944
 2467 01c4 00000000 		.word	.LANCHOR11
 2468 01c8 00000000 		.word	adcSumArray
 2469 01cc 00000000 		.word	.LANCHOR4
 2470 01d0 00000000 		.word	.LANCHOR5
 2471 01d4 D34D6210 		.word	274877907
 2472 01d8 00000000 		.word	.LANCHOR6
 2473 01dc 00000000 		.word	.LANCHOR7
 2474 01e0 00000000 		.word	logPara
 2475              		.cfi_endproc
 2476              	.LFE148:
 2478              		.section	.text.cal_cp_output_dac_ext_2,"ax",%progbits
 2479              		.align	1
 2480              		.global	cal_cp_output_dac_ext_2
 2481              		.syntax unified
 2482              		.thumb
 2483              		.thumb_func
 2484              		.fpu fpv4-sp-d16
 2486              	cal_cp_output_dac_ext_2:
 2487              	.LVL273:
 2488              	.LFB149:
 677:Core/Src/mainLoop.c **** 
 678:Core/Src/mainLoop.c **** // 2024.4.26Ë∞ÉÊï¥Ë∑üË∏™ÁÆóÊ≥ïÔºå‰ª•ÂâçÁöÑÁÆóÊ≥ïÊúâÂèØËÉΩ‰ºöÂá∫Áé∞ÂêåÊ≠•Áé∞Ë±°
 679:Core/Src/mainLoop.c **** // ÂáΩÊï∞Âêçvoid cal_cp_output_dac_ext_2
 680:Core/Src/mainLoop.c **** //(struct adc_buf_t *adc_buf, uint32_t *dacP,
 681:Core/Src/mainLoop.c **** //  uint32_t *dacN, int32_t runTime500us)
 682:Core/Src/mainLoop.c **** // ÂèÇÊï∞‰øùÊåÅ‰∏çÂèòÔºåÂè™ÊòØË∞ÉÊï¥‰∫ÜË∑üË∏™ÁÆóÊ≥ï
 683:Core/Src/mainLoop.c **** // ÂÖ∑‰ΩìÊÄùË∑ØÔºåÊ±ÇÂéüÂßãadc_bufÁöÑÂØºÊï∞ÔºåÊ†πÊçÆÊñúÁéáË∞ÉÊï¥dacËæìÂá∫
 684:Core/Src/mainLoop.c **** void cal_cp_output_dac_ext_2(struct adc_buf_t *adc_buf, uint32_t *dacP,
 685:Core/Src/mainLoop.c ****                              uint32_t *dacN, int32_t runTime500us) {
 2489              		.loc 1 685 68 is_stmt 1 view -0
 2490              		.cfi_startproc
 2491              		@ args = 0, pretend = 0, frame = 400
 2492              		@ frame_needed = 0, uses_anonymous_args = 0
 2493              		.loc 1 685 68 is_stmt 0 view .LVU692
 2494 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2495              	.LCFI19:
 2496              		.cfi_def_cfa_offset 20
 2497              		.cfi_offset 4, -20
 2498              		.cfi_offset 5, -16
 2499              		.cfi_offset 6, -12
 2500              		.cfi_offset 7, -8
 2501              		.cfi_offset 14, -4
 2502 0002 E5B0     		sub	sp, sp, #404
 2503              	.LCFI20:
 2504              		.cfi_def_cfa_offset 424
 2505 0004 0546     		mov	r5, r0
 2506 0006 0E46     		mov	r6, r1
ARM GAS  /tmp/ccKZYdRz.s 			page 59


 2507 0008 1746     		mov	r7, r2
 686:Core/Src/mainLoop.c ****   int32_t i = 0;
 2508              		.loc 1 686 3 is_stmt 1 view .LVU693
 2509              	.LVL274:
 687:Core/Src/mainLoop.c ****   int32_t N = ADC_BUF_T_SIZE;
 2510              		.loc 1 687 3 view .LVU694
 688:Core/Src/mainLoop.c **** 
 689:Core/Src/mainLoop.c ****   uint32_t tmpUint32 = 0;
 2511              		.loc 1 689 3 view .LVU695
 690:Core/Src/mainLoop.c ****   int32_t deltNoisV = 0;
 2512              		.loc 1 690 3 view .LVU696
 691:Core/Src/mainLoop.c ****   int32_t difAdcValBuf[ADC_BUF_T_SIZE];
 2513              		.loc 1 691 3 view .LVU697
 692:Core/Src/mainLoop.c ****   int32_t tmpdif1, tmpdif2;
 2514              		.loc 1 692 3 view .LVU698
 693:Core/Src/mainLoop.c ****   int32_t allSum = 0;
 2515              		.loc 1 693 3 view .LVU699
 694:Core/Src/mainLoop.c ****   float_t allSumF = 0;
 2516              		.loc 1 694 3 view .LVU700
 695:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_SET);
 2517              		.loc 1 695 3 view .LVU701
 2518 000a 0122     		movs	r2, #1
 2519              	.LVL275:
 2520              		.loc 1 695 3 is_stmt 0 view .LVU702
 2521 000c 4FF48051 		mov	r1, #4096
 2522              	.LVL276:
 2523              		.loc 1 695 3 view .LVU703
 2524 0010 4848     		ldr	r0, .L153
 2525              	.LVL277:
 2526              		.loc 1 695 3 view .LVU704
 2527 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 2528              	.LVL278:
 696:Core/Src/mainLoop.c **** 
 697:Core/Src/mainLoop.c ****   memset(difAdcValBuf, 0, sizeof(difAdcValBuf));
 2529              		.loc 1 697 3 is_stmt 1 view .LVU705
 2530 0016 4FF4C872 		mov	r2, #400
 2531 001a 0021     		movs	r1, #0
 2532 001c 6846     		mov	r0, sp
 2533 001e FFF7FEFF 		bl	memset
 2534              	.LVL279:
 698:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 2535              		.loc 1 698 3 view .LVU706
 2536              		.loc 1 698 10 is_stmt 0 view .LVU707
 2537 0022 0023     		movs	r3, #0
 2538              	.LVL280:
 2539              	.L142:
 2540              		.loc 1 698 15 is_stmt 1 discriminator 1 view .LVU708
 2541              		.loc 1 698 3 is_stmt 0 discriminator 1 view .LVU709
 2542 0024 632B     		cmp	r3, #99
 2543 0026 0BDC     		bgt	.L150
 699:Core/Src/mainLoop.c ****     tmpdif1 = (int32_t)((adc_buf->buf[i] & 0x0fff));
 2544              		.loc 1 699 5 is_stmt 1 discriminator 3 view .LVU710
 2545              		.loc 1 699 38 is_stmt 0 discriminator 3 view .LVU711
 2546 0028 05EB8302 		add	r2, r5, r3, lsl #2
 2547 002c 5468     		ldr	r4, [r2, #4]
 2548              		.loc 1 699 13 discriminator 3 view .LVU712
 2549 002e C4F30B02 		ubfx	r2, r4, #0, #12
ARM GAS  /tmp/ccKZYdRz.s 			page 60


 2550              	.LVL281:
 700:Core/Src/mainLoop.c ****     tmpdif2 = (int32_t)(((adc_buf->buf[i] >> 16) & 0x0fff));
 2551              		.loc 1 700 5 is_stmt 1 discriminator 3 view .LVU713
 2552              		.loc 1 700 13 is_stmt 0 discriminator 3 view .LVU714
 2553 0032 C4F30B44 		ubfx	r4, r4, #16, #12
 2554              	.LVL282:
 701:Core/Src/mainLoop.c ****     difAdcValBuf[i] = tmpdif1 - tmpdif2;
 2555              		.loc 1 701 5 is_stmt 1 discriminator 3 view .LVU715
 2556              		.loc 1 701 31 is_stmt 0 discriminator 3 view .LVU716
 2557 0036 141B     		subs	r4, r2, r4
 2558              	.LVL283:
 2559              		.loc 1 701 21 discriminator 3 view .LVU717
 2560 0038 4DF82340 		str	r4, [sp, r3, lsl #2]
 2561              	.LVL284:
 698:Core/Src/mainLoop.c ****     tmpdif1 = (int32_t)((adc_buf->buf[i] & 0x0fff));
 2562              		.loc 1 698 22 is_stmt 1 discriminator 3 view .LVU718
 698:Core/Src/mainLoop.c ****     tmpdif1 = (int32_t)((adc_buf->buf[i] & 0x0fff));
 2563              		.loc 1 698 23 is_stmt 0 discriminator 3 view .LVU719
 2564 003c 0133     		adds	r3, r3, #1
 2565              	.LVL285:
 698:Core/Src/mainLoop.c ****     tmpdif1 = (int32_t)((adc_buf->buf[i] & 0x0fff));
 2566              		.loc 1 698 23 discriminator 3 view .LVU720
 2567 003e F1E7     		b	.L142
 2568              	.LVL286:
 2569              	.L150:
 702:Core/Src/mainLoop.c ****   }
 703:Core/Src/mainLoop.c ****   // ËÆ°ÁÆóÂØºÊï∞ÁöÑÊñúÁéáÔºåÁªüËÆ°difAdcValBuf‰∏≠ÁöÑÊ≠£Ë¥üÂÄºÔºåÂπ∂‰ª•Ê≠£Ë¥üÂÄºÁöÑ‰∏™Êï∞Â∑ÆÂÄº‰Ωú‰
 704:Core/Src/mainLoop.c ****   // ÁªìËÆ∫ËøôÁßçÊÄùË∑Ø‰∏çË°å
 705:Core/Src/mainLoop.c ****   // allSum = 0;
 706:Core/Src/mainLoop.c ****   // for (i = 0; i < N; i++) {
 707:Core/Src/mainLoop.c ****   //   if (difAdcValBuf[i] > 0) {
 708:Core/Src/mainLoop.c ****   //     allSum += 1;
 709:Core/Src/mainLoop.c ****   //   } else if (difAdcValBuf[i] < 0) {
 710:Core/Src/mainLoop.c ****   //     allSum -= 1;
 711:Core/Src/mainLoop.c ****   //   }
 712:Core/Src/mainLoop.c ****   // }
 713:Core/Src/mainLoop.c ****   // allSumF = ((float_t)allSum) / N;
 714:Core/Src/mainLoop.c **** 
 715:Core/Src/mainLoop.c ****   //Á≠õÈÄâÂØºÊï∞ÂÄºÔºåÂè™‰øùÁïôÁªùÂØπÂÄºÂ∞è‰∫é100ÁöÑÂÄº
 716:Core/Src/mainLoop.c ****   allSum = 0;
 2570              		.loc 1 716 10 view .LVU721
 2571 0040 0020     		movs	r0, #0
 717:Core/Src/mainLoop.c ****   for (i = 0; i < N; i++) {
 2572              		.loc 1 717 10 view .LVU722
 2573 0042 0346     		mov	r3, r0
 2574              	.LVL287:
 2575              		.loc 1 717 10 view .LVU723
 2576 0044 00E0     		b	.L144
 2577              	.LVL288:
 2578              	.L145:
 2579              		.loc 1 717 22 is_stmt 1 discriminator 2 view .LVU724
 2580              		.loc 1 717 23 is_stmt 0 discriminator 2 view .LVU725
 2581 0046 0133     		adds	r3, r3, #1
 2582              	.LVL289:
 2583              	.L144:
 2584              		.loc 1 717 15 is_stmt 1 discriminator 1 view .LVU726
 2585              		.loc 1 717 3 is_stmt 0 discriminator 1 view .LVU727
ARM GAS  /tmp/ccKZYdRz.s 			page 61


 2586 0048 632B     		cmp	r3, #99
 2587 004a 07DC     		bgt	.L151
 718:Core/Src/mainLoop.c ****     if (abs(difAdcValBuf[i]) < 50) {
 2588              		.loc 1 718 5 is_stmt 1 view .LVU728
 2589              	.LBB6:
 2590              		.loc 1 718 25 is_stmt 0 view .LVU729
 2591 004c 5DF82320 		ldr	r2, [sp, r3, lsl #2]
 2592              		.loc 1 718 30 view .LVU730
 2593 0050 02F13101 		add	r1, r2, #49
 2594              		.loc 1 718 8 view .LVU731
 2595 0054 6229     		cmp	r1, #98
 2596 0056 F6D8     		bhi	.L145
 719:Core/Src/mainLoop.c ****       allSum += difAdcValBuf[i];
 2597              		.loc 1 719 7 is_stmt 1 view .LVU732
 2598              		.loc 1 719 14 is_stmt 0 view .LVU733
 2599 0058 1044     		add	r0, r0, r2
 2600              	.LVL290:
 2601              		.loc 1 719 14 view .LVU734
 2602 005a F4E7     		b	.L145
 2603              	.L151:
 2604              		.loc 1 719 14 view .LVU735
 2605              	.LBE6:
 720:Core/Src/mainLoop.c ****     }
 721:Core/Src/mainLoop.c ****   }
 722:Core/Src/mainLoop.c ****   allSumF = ((float_t)allSum) / N;
 2606              		.loc 1 722 3 is_stmt 1 view .LVU736
 2607              		.loc 1 722 14 is_stmt 0 view .LVU737
 2608 005c 07EE900A 		vmov	s15, r0	@ int
 2609 0060 F8EEE77A 		vcvt.f32.s32	s15, s15
 2610              		.loc 1 722 11 view .LVU738
 2611 0064 DFED346A 		vldr.32	s13, .L153+4
 2612 0068 87EEA67A 		vdiv.f32	s14, s15, s13
 2613              	.LVL291:
 723:Core/Src/mainLoop.c **** 
 724:Core/Src/mainLoop.c ****   // Ê†πÊçÆÊñúÁéáË∞ÉÊï¥dacËæìÂá∫
 725:Core/Src/mainLoop.c **** #define kP_2 (+5.0)
 726:Core/Src/mainLoop.c ****   dletDac = ((float_t)allSumF) * kP_2;
 2614              		.loc 1 726 3 is_stmt 1 view .LVU739
 2615              		.loc 1 726 11 is_stmt 0 view .LVU740
 2616 006c F1EE047A 		vmov.f32	s15, #5.0e+0
 2617 0070 67EE277A 		vmul.f32	s15, s14, s15
 2618 0074 314A     		ldr	r2, .L153+8
 2619 0076 C2ED007A 		vstr.32	s15, [r2]
 727:Core/Src/mainLoop.c **** 
 728:Core/Src/mainLoop.c ****   tmpUint32 = abs((int32_t)(dletDac));
 2620              		.loc 1 728 3 is_stmt 1 view .LVU741
 2621              		.loc 1 728 19 is_stmt 0 view .LVU742
 2622 007a FDEEE77A 		vcvt.s32.f32	s15, s15
 2623              	.LVL292:
 729:Core/Src/mainLoop.c **** 
 730:Core/Src/mainLoop.c ****   deltNoisV = 0;
 2624              		.loc 1 730 3 is_stmt 1 view .LVU743
 731:Core/Src/mainLoop.c **** 
 732:Core/Src/mainLoop.c ****   (*dacP) += (int32_t)(dletDac);
 2625              		.loc 1 732 3 view .LVU744
 2626              		.loc 1 732 11 is_stmt 0 view .LVU745
 2627 007e 3368     		ldr	r3, [r6]
ARM GAS  /tmp/ccKZYdRz.s 			page 62


 2628              	.LVL293:
 2629              		.loc 1 732 11 view .LVU746
 2630 0080 17EE901A 		vmov	r1, s15	@ int
 2631 0084 0B44     		add	r3, r3, r1
 2632 0086 3360     		str	r3, [r6]
 733:Core/Src/mainLoop.c ****   (*dacN) -= (int32_t)(dletDac);
 2633              		.loc 1 733 3 is_stmt 1 view .LVU747
 2634              		.loc 1 733 14 is_stmt 0 view .LVU748
 2635 0088 D2ED007A 		vldr.32	s15, [r2]
 2636              	.LVL294:
 2637              		.loc 1 733 14 view .LVU749
 2638 008c FDEEE77A 		vcvt.s32.f32	s15, s15
 2639              		.loc 1 733 11 view .LVU750
 2640 0090 3B68     		ldr	r3, [r7]
 2641 0092 17EE902A 		vmov	r2, s15	@ int
 2642 0096 9B1A     		subs	r3, r3, r2
 2643 0098 3B60     		str	r3, [r7]
 734:Core/Src/mainLoop.c ****   (*dacP) += deltNoisV;
 2644              		.loc 1 734 3 is_stmt 1 view .LVU751
 2645              		.loc 1 734 11 is_stmt 0 view .LVU752
 2646 009a 3168     		ldr	r1, [r6]
 2647              	.LVL295:
 735:Core/Src/mainLoop.c ****   (*dacN) -= deltNoisV;
 2648              		.loc 1 735 3 is_stmt 1 view .LVU753
 736:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1, (((*dacP) >> 20) & 0xffc), max_outdisable);
 2649              		.loc 1 736 3 view .LVU754
 2650 009c 40F6FC74 		movw	r4, #4092
 2651 00a0 0222     		movs	r2, #2
 2652 00a2 04EA1151 		and	r1, r4, r1, lsr #20
 2653 00a6 0620     		movs	r0, #6
 2654              	.LVL296:
 2655              		.loc 1 736 3 is_stmt 0 view .LVU755
 2656 00a8 FFF7FEFF 		bl	max5307_w_chanel
 2657              	.LVL297:
 737:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1K, (((*dacP) >> 10) & 0xffc), max_outdisable);
 2658              		.loc 1 737 3 is_stmt 1 view .LVU756
 2659              		.loc 1 737 32 is_stmt 0 view .LVU757
 2660 00ac 3168     		ldr	r1, [r6]
 2661              		.loc 1 737 3 view .LVU758
 2662 00ae 0222     		movs	r2, #2
 2663 00b0 04EA9121 		and	r1, r4, r1, lsr #10
 2664 00b4 0720     		movs	r0, #7
 2665 00b6 FFF7FEFF 		bl	max5307_w_chanel
 2666              	.LVL298:
 738:Core/Src/mainLoop.c ****   max5307_w_chanel(DACP_1M, ((*dacP) & 0xfff) & 0xfff, max_outdisable);
 2667              		.loc 1 738 3 is_stmt 1 view .LVU759
 2668              		.loc 1 738 31 is_stmt 0 view .LVU760
 2669 00ba 3168     		ldr	r1, [r6]
 2670              		.loc 1 738 3 view .LVU761
 2671 00bc 0222     		movs	r2, #2
 2672 00be C1F30B01 		ubfx	r1, r1, #0, #12
 2673 00c2 0820     		movs	r0, #8
 2674 00c4 FFF7FEFF 		bl	max5307_w_chanel
 2675              	.LVL299:
 739:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1, (((*dacN) >> 20) & 0xffc), max_outdisable);
 2676              		.loc 1 739 3 is_stmt 1 view .LVU762
 2677              		.loc 1 739 31 is_stmt 0 view .LVU763
ARM GAS  /tmp/ccKZYdRz.s 			page 63


 2678 00c8 3968     		ldr	r1, [r7]
 2679              		.loc 1 739 3 view .LVU764
 2680 00ca 0222     		movs	r2, #2
 2681 00cc 04EA1151 		and	r1, r4, r1, lsr #20
 2682 00d0 0520     		movs	r0, #5
 2683 00d2 FFF7FEFF 		bl	max5307_w_chanel
 2684              	.LVL300:
 740:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1K, (((*dacN) >> 10) & 0xffc), max_outdisable);
 2685              		.loc 1 740 3 is_stmt 1 view .LVU765
 2686              		.loc 1 740 32 is_stmt 0 view .LVU766
 2687 00d6 3968     		ldr	r1, [r7]
 2688              		.loc 1 740 3 view .LVU767
 2689 00d8 0222     		movs	r2, #2
 2690 00da 04EA9121 		and	r1, r4, r1, lsr #10
 2691 00de 0420     		movs	r0, #4
 2692 00e0 FFF7FEFF 		bl	max5307_w_chanel
 2693              	.LVL301:
 741:Core/Src/mainLoop.c ****   max5307_w_chanel(DACN_1M, ((*dacN) & 0xfff) & 0xfff, max_outdisable);
 2694              		.loc 1 741 3 is_stmt 1 view .LVU768
 2695              		.loc 1 741 31 is_stmt 0 view .LVU769
 2696 00e4 3968     		ldr	r1, [r7]
 2697              		.loc 1 741 3 view .LVU770
 2698 00e6 0222     		movs	r2, #2
 2699 00e8 C1F30B01 		ubfx	r1, r1, #0, #12
 2700 00ec 0320     		movs	r0, #3
 2701 00ee FFF7FEFF 		bl	max5307_w_chanel
 2702              	.LVL302:
 742:Core/Src/mainLoop.c **** 
 743:Core/Src/mainLoop.c ****   do {
 2703              		.loc 1 743 3 is_stmt 1 view .LVU771
 2704              	.LBB7:
 744:Core/Src/mainLoop.c ****     uint16_t chanelNo = 0;
 2705              		.loc 1 744 5 view .LVU772
 745:Core/Src/mainLoop.c ****     chanelNo = 0x01 << (DACP_1 + 2) | 0x01 << (DACP_1K + 2) |
 2706              		.loc 1 745 5 view .LVU773
 746:Core/Src/mainLoop.c ****                0x01 << (DACP_1M + 2) | 0x01 << (DACN_1 + 2) |
 747:Core/Src/mainLoop.c ****                0x01 << (DACN_1K + 2) | 0x01 << (DACN_1M + 2);
 748:Core/Src/mainLoop.c ****     max5307_enable_ori_chanel(chanelNo);
 2707              		.loc 1 748 5 view .LVU774
 2708 00f2 4FF4FC60 		mov	r0, #2016
 2709 00f6 FFF7FEFF 		bl	max5307_enable_ori_chanel
 2710              	.LVL303:
 2711              	.LBE7:
 749:Core/Src/mainLoop.c ****   } while (0);
 2712              		.loc 1 749 11 view .LVU775
 750:Core/Src/mainLoop.c **** 
 751:Core/Src/mainLoop.c ****   // clear buf
 752:Core/Src/mainLoop.c ****   for (i = 0; i < ADC_BUF_T_SIZE; i++) {
 2713              		.loc 1 752 3 view .LVU776
 2714              		.loc 1 752 10 is_stmt 0 view .LVU777
 2715 00fa 0023     		movs	r3, #0
 2716              	.LVL304:
 2717              	.L147:
 2718              		.loc 1 752 15 is_stmt 1 discriminator 1 view .LVU778
 2719              		.loc 1 752 3 is_stmt 0 discriminator 1 view .LVU779
 2720 00fc 632B     		cmp	r3, #99
 2721 00fe 05DC     		bgt	.L152
ARM GAS  /tmp/ccKZYdRz.s 			page 64


 753:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2722              		.loc 1 753 5 is_stmt 1 discriminator 3 view .LVU780
 2723              		.loc 1 753 21 is_stmt 0 discriminator 3 view .LVU781
 2724 0100 05EB8302 		add	r2, r5, r3, lsl #2
 2725 0104 0021     		movs	r1, #0
 2726 0106 5160     		str	r1, [r2, #4]
 752:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2727              		.loc 1 752 35 is_stmt 1 discriminator 3 view .LVU782
 752:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2728              		.loc 1 752 36 is_stmt 0 discriminator 3 view .LVU783
 2729 0108 0133     		adds	r3, r3, #1
 2730              	.LVL305:
 752:Core/Src/mainLoop.c ****     adc_buf->buf[i] = 0;
 2731              		.loc 1 752 36 discriminator 3 view .LVU784
 2732 010a F7E7     		b	.L147
 2733              	.L152:
 754:Core/Src/mainLoop.c ****   }
 755:Core/Src/mainLoop.c ****   logPara.mean_adc_val = forSaveAllSum;
 2734              		.loc 1 755 3 is_stmt 1 view .LVU785
 2735              		.loc 1 755 24 is_stmt 0 view .LVU786
 2736 010c 0C4B     		ldr	r3, .L153+12
 2737              	.LVL306:
 2738              		.loc 1 755 24 view .LVU787
 2739 010e 0D4A     		ldr	r2, .L153+16
 2740 0110 1288     		ldrh	r2, [r2]
 2741 0112 A3F80120 		strh	r2, [r3, #1]	@ unaligned
 756:Core/Src/mainLoop.c ****   // logPara.mean_adc_val = pidI;
 757:Core/Src/mainLoop.c ****   logPara.dac_val_n = (*dacN);
 2742              		.loc 1 757 3 is_stmt 1 view .LVU788
 2743              		.loc 1 757 24 is_stmt 0 view .LVU789
 2744 0116 3A68     		ldr	r2, [r7]
 2745              		.loc 1 757 21 view .LVU790
 2746 0118 C3F80720 		str	r2, [r3, #7]	@ unaligned
 758:Core/Src/mainLoop.c ****   logPara.dac_val_p = (*dacP);
 2747              		.loc 1 758 3 is_stmt 1 view .LVU791
 2748              		.loc 1 758 24 is_stmt 0 view .LVU792
 2749 011c 3268     		ldr	r2, [r6]
 2750              		.loc 1 758 21 view .LVU793
 2751 011e C3F80320 		str	r2, [r3, #3]	@ unaligned
 759:Core/Src/mainLoop.c ****   // HAL_GPIO_TogglePin(LED4_GPIO_Port, LED4_Pin);
 760:Core/Src/mainLoop.c ****   HAL_GPIO_WritePin(LED4_GPIO_Port, LED4_Pin, GPIO_PIN_RESET);
 2752              		.loc 1 760 3 is_stmt 1 view .LVU794
 2753 0122 0022     		movs	r2, #0
 2754 0124 4FF48051 		mov	r1, #4096
 2755 0128 0248     		ldr	r0, .L153
 2756 012a FFF7FEFF 		bl	HAL_GPIO_WritePin
 2757              	.LVL307:
 761:Core/Src/mainLoop.c **** }
 2758              		.loc 1 761 1 is_stmt 0 view .LVU795
 2759 012e 65B0     		add	sp, sp, #404
 2760              	.LCFI21:
 2761              		.cfi_def_cfa_offset 20
 2762              		@ sp needed
 2763 0130 F0BD     		pop	{r4, r5, r6, r7, pc}
 2764              	.LVL308:
 2765              	.L154:
 2766              		.loc 1 761 1 view .LVU796
ARM GAS  /tmp/ccKZYdRz.s 			page 65


 2767 0132 00BF     		.align	2
 2768              	.L153:
 2769 0134 00080240 		.word	1073874944
 2770 0138 0000C842 		.word	1120403456
 2771 013c 00000000 		.word	.LANCHOR7
 2772 0140 00000000 		.word	logPara
 2773 0144 00000000 		.word	.LANCHOR11
 2774              		.cfi_endproc
 2775              	.LFE149:
 2777              		.section	.text.cal_cp_output_dac_ext_3,"ax",%progbits
 2778              		.align	1
 2779              		.global	cal_cp_output_dac_ext_3
 2780              		.syntax unified
 2781              		.thumb
 2782              		.thumb_func
 2783              		.fpu fpv4-sp-d16
 2785              	cal_cp_output_dac_ext_3:
 2786              	.LVL309:
 2787              	.LFB150:
 762:Core/Src/mainLoop.c **** 
 763:Core/Src/mainLoop.c **** //
 764:Core/Src/mainLoop.c **** void cal_cp_output_dac_ext_3(struct adc_buf_t *adc_buf, uint32_t *dacP,
 765:Core/Src/mainLoop.c ****                              uint32_t *dacN, int32_t runTime500us){
 2788              		.loc 1 765 67 is_stmt 1 view -0
 2789              		.cfi_startproc
 2790              		@ args = 0, pretend = 0, frame = 0
 2791              		@ frame_needed = 0, uses_anonymous_args = 0
 2792              		@ link register save eliminated.
 766:Core/Src/mainLoop.c **** 
 767:Core/Src/mainLoop.c **** }
 2793              		.loc 1 767 1 view .LVU798
 2794 0000 7047     		bx	lr
 2795              		.cfi_endproc
 2796              	.LFE150:
 2798              		.section	.text.fakeDelay,"ax",%progbits
 2799              		.align	1
 2800              		.global	fakeDelay
 2801              		.syntax unified
 2802              		.thumb
 2803              		.thumb_func
 2804              		.fpu fpv4-sp-d16
 2806              	fakeDelay:
 2807              	.LVL310:
 2808              	.LFB151:
 768:Core/Src/mainLoop.c **** 
 769:Core/Src/mainLoop.c **** 
 770:Core/Src/mainLoop.c **** uint32_t adc1_ok = 0, adc2_ok = 0;
 771:Core/Src/mainLoop.c **** #define MID_CP_VALUE (2048)
 772:Core/Src/mainLoop.c **** // uint32_t value_dacP = 0x8020200, value_dacN = 0x8020200;
 773:Core/Src/mainLoop.c **** uint32_t value_dacP = 0x80200800, value_dacN = 0x80200800;
 774:Core/Src/mainLoop.c **** int32_t mainCp = 0, mainCpLast = 0;
 775:Core/Src/mainLoop.c **** struct adc_buf_t adc1_t1, adc1_t2;
 776:Core/Src/mainLoop.c **** 
 777:Core/Src/mainLoop.c **** void fakeDelay(int32_t delay) {
 2809              		.loc 1 777 31 view -0
 2810              		.cfi_startproc
 2811              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccKZYdRz.s 			page 66


 2812              		@ frame_needed = 0, uses_anonymous_args = 0
 2813              		@ link register save eliminated.
 2814              		.loc 1 777 31 is_stmt 0 view .LVU800
 2815 0000 0146     		mov	r1, r0
 778:Core/Src/mainLoop.c ****   int32_t i = 0, k = 0;
 2816              		.loc 1 778 3 is_stmt 1 view .LVU801
 2817              	.LVL311:
 779:Core/Src/mainLoop.c ****   int32_t tmp = 0;
 2818              		.loc 1 779 3 view .LVU802
 780:Core/Src/mainLoop.c ****   for (k = 0; k < delay; k++) {
 2819              		.loc 1 780 3 view .LVU803
 2820              		.loc 1 780 10 is_stmt 0 view .LVU804
 2821 0002 0022     		movs	r2, #0
 2822              		.loc 1 780 3 view .LVU805
 2823 0004 00E0     		b	.L157
 2824              	.LVL312:
 2825              	.L162:
 2826              		.loc 1 780 26 is_stmt 1 discriminator 2 view .LVU806
 2827              		.loc 1 780 27 is_stmt 0 discriminator 2 view .LVU807
 2828 0006 0132     		adds	r2, r2, #1
 2829              	.LVL313:
 2830              	.L157:
 2831              		.loc 1 780 15 is_stmt 1 discriminator 1 view .LVU808
 2832              		.loc 1 780 3 is_stmt 0 discriminator 1 view .LVU809
 2833 0008 8A42     		cmp	r2, r1
 2834 000a 04DA     		bge	.L161
 781:Core/Src/mainLoop.c ****     for (i = 0; i < 100; i++) {
 2835              		.loc 1 781 12 view .LVU810
 2836 000c 0023     		movs	r3, #0
 2837              	.L159:
 2838              	.LVL314:
 2839              		.loc 1 781 17 is_stmt 1 discriminator 1 view .LVU811
 2840              		.loc 1 781 5 is_stmt 0 discriminator 1 view .LVU812
 2841 000e 632B     		cmp	r3, #99
 2842 0010 F9DC     		bgt	.L162
 782:Core/Src/mainLoop.c ****       tmp++;
 2843              		.loc 1 782 7 is_stmt 1 discriminator 3 view .LVU813
 781:Core/Src/mainLoop.c ****     for (i = 0; i < 100; i++) {
 2844              		.loc 1 781 26 discriminator 3 view .LVU814
 781:Core/Src/mainLoop.c ****     for (i = 0; i < 100; i++) {
 2845              		.loc 1 781 27 is_stmt 0 discriminator 3 view .LVU815
 2846 0012 0133     		adds	r3, r3, #1
 2847              	.LVL315:
 781:Core/Src/mainLoop.c ****     for (i = 0; i < 100; i++) {
 2848              		.loc 1 781 27 discriminator 3 view .LVU816
 2849 0014 FBE7     		b	.L159
 2850              	.LVL316:
 2851              	.L161:
 783:Core/Src/mainLoop.c ****     }
 784:Core/Src/mainLoop.c ****   }
 785:Core/Src/mainLoop.c **** }
 2852              		.loc 1 785 1 view .LVU817
 2853 0016 7047     		bx	lr
 2854              		.cfi_endproc
 2855              	.LFE151:
 2857              		.section	.text.preMainLoop1,"ax",%progbits
 2858              		.align	1
ARM GAS  /tmp/ccKZYdRz.s 			page 67


 2859              		.global	preMainLoop1
 2860              		.syntax unified
 2861              		.thumb
 2862              		.thumb_func
 2863              		.fpu fpv4-sp-d16
 2865              	preMainLoop1:
 2866              	.LFB152:
 786:Core/Src/mainLoop.c **** 
 787:Core/Src/mainLoop.c **** extern SPI_HandleTypeDef hspi1;
 788:Core/Src/mainLoop.c **** void preMainLoop1(void) {
 2867              		.loc 1 788 25 is_stmt 1 view -0
 2868              		.cfi_startproc
 2869              		@ args = 0, pretend = 0, frame = 0
 2870              		@ frame_needed = 0, uses_anonymous_args = 0
 2871 0000 08B5     		push	{r3, lr}
 2872              	.LCFI22:
 2873              		.cfi_def_cfa_offset 8
 2874              		.cfi_offset 3, -8
 2875              		.cfi_offset 14, -4
 789:Core/Src/mainLoop.c ****   do {
 2876              		.loc 1 789 3 view .LVU819
 790:Core/Src/mainLoop.c ****     hspi1.Instance = SPI1;
 2877              		.loc 1 790 5 view .LVU820
 2878              		.loc 1 790 20 is_stmt 0 view .LVU821
 2879 0002 1048     		ldr	r0, .L167
 2880 0004 104B     		ldr	r3, .L167+4
 2881 0006 0360     		str	r3, [r0]
 791:Core/Src/mainLoop.c ****     hspi1.Init.Mode = SPI_MODE_MASTER;
 2882              		.loc 1 791 5 is_stmt 1 view .LVU822
 2883              		.loc 1 791 21 is_stmt 0 view .LVU823
 2884 0008 4FF48273 		mov	r3, #260
 2885 000c 4360     		str	r3, [r0, #4]
 792:Core/Src/mainLoop.c ****     hspi1.Init.Direction = SPI_DIRECTION_2LINES;
 2886              		.loc 1 792 5 is_stmt 1 view .LVU824
 2887              		.loc 1 792 26 is_stmt 0 view .LVU825
 2888 000e 0023     		movs	r3, #0
 2889 0010 8360     		str	r3, [r0, #8]
 793:Core/Src/mainLoop.c ****     hspi1.Init.DataSize = SPI_DATASIZE_16BIT;
 2890              		.loc 1 793 5 is_stmt 1 view .LVU826
 2891              		.loc 1 793 25 is_stmt 0 view .LVU827
 2892 0012 4FF40062 		mov	r2, #2048
 2893 0016 C260     		str	r2, [r0, #12]
 794:Core/Src/mainLoop.c ****     hspi1.Init.CLKPolarity = SPI_POLARITY_LOW;
 2894              		.loc 1 794 5 is_stmt 1 view .LVU828
 2895              		.loc 1 794 28 is_stmt 0 view .LVU829
 2896 0018 0361     		str	r3, [r0, #16]
 795:Core/Src/mainLoop.c ****     hspi1.Init.CLKPhase = SPI_PHASE_1EDGE;
 2897              		.loc 1 795 5 is_stmt 1 view .LVU830
 2898              		.loc 1 795 25 is_stmt 0 view .LVU831
 2899 001a 4361     		str	r3, [r0, #20]
 796:Core/Src/mainLoop.c ****     hspi1.Init.NSS = SPI_NSS_SOFT;
 2900              		.loc 1 796 5 is_stmt 1 view .LVU832
 2901              		.loc 1 796 20 is_stmt 0 view .LVU833
 2902 001c 4FF40072 		mov	r2, #512
 2903 0020 8261     		str	r2, [r0, #24]
 797:Core/Src/mainLoop.c ****     hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_128;
 2904              		.loc 1 797 5 is_stmt 1 view .LVU834
ARM GAS  /tmp/ccKZYdRz.s 			page 68


 2905              		.loc 1 797 34 is_stmt 0 view .LVU835
 2906 0022 3022     		movs	r2, #48
 2907 0024 C261     		str	r2, [r0, #28]
 798:Core/Src/mainLoop.c ****     hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 2908              		.loc 1 798 5 is_stmt 1 view .LVU836
 2909              		.loc 1 798 25 is_stmt 0 view .LVU837
 2910 0026 0362     		str	r3, [r0, #32]
 799:Core/Src/mainLoop.c ****     hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
 2911              		.loc 1 799 5 is_stmt 1 view .LVU838
 2912              		.loc 1 799 23 is_stmt 0 view .LVU839
 2913 0028 4362     		str	r3, [r0, #36]
 800:Core/Src/mainLoop.c ****     hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 2914              		.loc 1 800 5 is_stmt 1 view .LVU840
 2915              		.loc 1 800 31 is_stmt 0 view .LVU841
 2916 002a 8362     		str	r3, [r0, #40]
 801:Core/Src/mainLoop.c ****     hspi1.Init.CRCPolynomial = 10;
 2917              		.loc 1 801 5 is_stmt 1 view .LVU842
 2918              		.loc 1 801 30 is_stmt 0 view .LVU843
 2919 002c 0A23     		movs	r3, #10
 2920 002e C362     		str	r3, [r0, #44]
 802:Core/Src/mainLoop.c ****     if (HAL_SPI_Init(&hspi1) != HAL_OK) {
 2921              		.loc 1 802 5 is_stmt 1 view .LVU844
 2922              		.loc 1 802 9 is_stmt 0 view .LVU845
 2923 0030 FFF7FEFF 		bl	HAL_SPI_Init
 2924              	.LVL317:
 2925              		.loc 1 802 8 view .LVU846
 2926 0034 10B9     		cbnz	r0, .L166
 2927              	.L164:
 803:Core/Src/mainLoop.c ****       Error_Handler();
 804:Core/Src/mainLoop.c ****     }
 805:Core/Src/mainLoop.c ****   } while (0);
 2928              		.loc 1 805 11 is_stmt 1 view .LVU847
 806:Core/Src/mainLoop.c ****   init_ad9520();
 2929              		.loc 1 806 3 view .LVU848
 2930 0036 FFF7FEFF 		bl	init_ad9520
 2931              	.LVL318:
 807:Core/Src/mainLoop.c **** }
 2932              		.loc 1 807 1 is_stmt 0 view .LVU849
 2933 003a 08BD     		pop	{r3, pc}
 2934              	.L166:
 803:Core/Src/mainLoop.c ****       Error_Handler();
 2935              		.loc 1 803 7 is_stmt 1 view .LVU850
 2936 003c FFF7FEFF 		bl	Error_Handler
 2937              	.LVL319:
 2938 0040 F9E7     		b	.L164
 2939              	.L168:
 2940 0042 00BF     		.align	2
 2941              	.L167:
 2942 0044 00000000 		.word	hspi1
 2943 0048 00300140 		.word	1073819648
 2944              		.cfi_endproc
 2945              	.LFE152:
 2947              		.section	.text.mainLoop1,"ax",%progbits
 2948              		.align	1
 2949              		.global	mainLoop1
 2950              		.syntax unified
 2951              		.thumb
ARM GAS  /tmp/ccKZYdRz.s 			page 69


 2952              		.thumb_func
 2953              		.fpu fpv4-sp-d16
 2955              	mainLoop1:
 2956              	.LFB153:
 808:Core/Src/mainLoop.c **** 
 809:Core/Src/mainLoop.c **** struct log_para_t logBufDma;
 810:Core/Src/mainLoop.c **** uint16_t ad9520_reg = 0;
 811:Core/Src/mainLoop.c **** uint32_t locked = 0;
 812:Core/Src/mainLoop.c **** uint32_t adcVal, lastAdcVal;
 813:Core/Src/mainLoop.c **** void mainLoop1(void) {
 2957              		.loc 1 813 22 view -0
 2958              		.cfi_startproc
 2959              		@ args = 0, pretend = 0, frame = 40
 2960              		@ frame_needed = 0, uses_anonymous_args = 0
 2961 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2962              	.LCFI23:
 2963              		.cfi_def_cfa_offset 24
 2964              		.cfi_offset 4, -24
 2965              		.cfi_offset 5, -20
 2966              		.cfi_offset 6, -16
 2967              		.cfi_offset 7, -12
 2968              		.cfi_offset 8, -8
 2969              		.cfi_offset 14, -4
 2970 0004 8AB0     		sub	sp, sp, #40
 2971              	.LCFI24:
 2972              		.cfi_def_cfa_offset 64
 814:Core/Src/mainLoop.c **** #define CONST_DELTDA (0X000)
 815:Core/Src/mainLoop.c ****   uint32_t dac_default_val[8] = {0, 0, 0, 0, 0, 0, 0, 0};
 2973              		.loc 1 815 3 view .LVU852
 2974              		.loc 1 815 12 is_stmt 0 view .LVU853
 2975 0006 2022     		movs	r2, #32
 2976 0008 0021     		movs	r1, #0
 2977 000a 02A8     		add	r0, sp, #8
 2978 000c FFF7FEFF 		bl	memset
 2979              	.LVL320:
 816:Core/Src/mainLoop.c ****   int32_t runTimes =
 2980              		.loc 1 816 3 is_stmt 1 view .LVU854
 817:Core/Src/mainLoop.c ****       0;  // log 30s, for example 0.5ms*2000=1s, runtimes=2000*60=1min
 818:Core/Src/mainLoop.c ****   int32_t xyz = 0;
 2981              		.loc 1 818 3 view .LVU855
 819:Core/Src/mainLoop.c ****   adc1_t1.adc_cap_ok = CALOK;
 2982              		.loc 1 819 3 view .LVU856
 2983              		.loc 1 819 22 is_stmt 0 view .LVU857
 2984 0010 4FF6FF73 		movw	r3, #65535
 2985 0014 514A     		ldr	r2, .L178
 2986 0016 1360     		str	r3, [r2]
 820:Core/Src/mainLoop.c ****   adc1_t2.adc_cap_ok = CALOK;
 2987              		.loc 1 820 3 is_stmt 1 view .LVU858
 2988              		.loc 1 820 22 is_stmt 0 view .LVU859
 2989 0018 514A     		ldr	r2, .L178+4
 2990 001a 1360     		str	r3, [r2]
 821:Core/Src/mainLoop.c ****   /* USER CODE BEGIN 2 */
 822:Core/Src/mainLoop.c ****   // SystemClock_Config();//from main.c
 823:Core/Src/mainLoop.c ****   // MX_USART2_UART_Init();
 824:Core/Src/mainLoop.c ****   init_max5307();
 2991              		.loc 1 824 3 is_stmt 1 view .LVU860
 2992 001c FFF7FEFF 		bl	init_max5307
ARM GAS  /tmp/ccKZYdRz.s 			page 70


 2993              	.LVL321:
 825:Core/Src/mainLoop.c ****   set_dac_initVal(dac_default_val);
 2994              		.loc 1 825 3 view .LVU861
 2995 0020 02A8     		add	r0, sp, #8
 2996 0022 FFF7FEFF 		bl	set_dac_initVal
 2997              	.LVL322:
 826:Core/Src/mainLoop.c ****   max5307_w_chanel(max_ch8, 2048, max_outenable);
 2998              		.loc 1 826 3 view .LVU862
 2999 0026 0122     		movs	r2, #1
 3000 0028 4FF40061 		mov	r1, #2048
 3001 002c 0920     		movs	r0, #9
 3002 002e FFF7FEFF 		bl	max5307_w_chanel
 3003              	.LVL323:
 827:Core/Src/mainLoop.c ****   do {  // set 1.5v
 3004              		.loc 1 827 3 view .LVU863
 828:Core/Src/mainLoop.c ****     value_dacP -= CONST_DELTDA;
 3005              		.loc 1 828 5 view .LVU864
 3006              		.loc 1 828 16 is_stmt 0 view .LVU865
 3007 0032 4C4D     		ldr	r5, .L178+8
 3008 0034 2968     		ldr	r1, [r5]
 829:Core/Src/mainLoop.c ****     value_dacN += CONST_DELTDA;
 3009              		.loc 1 829 5 is_stmt 1 view .LVU866
 830:Core/Src/mainLoop.c ****     max5307_w_chanel(DACP_1, (value_dacP >> 12), max_outenable);
 3010              		.loc 1 830 5 view .LVU867
 3011 0036 0122     		movs	r2, #1
 3012 0038 090B     		lsrs	r1, r1, #12
 3013 003a 0620     		movs	r0, #6
 3014 003c FFF7FEFF 		bl	max5307_w_chanel
 3015              	.LVL324:
 831:Core/Src/mainLoop.c ****     max5307_w_chanel(DACP_1K, (value_dacP & 0XFFF), max_outenable);
 3016              		.loc 1 831 5 view .LVU868
 3017 0040 2968     		ldr	r1, [r5]
 3018 0042 0122     		movs	r2, #1
 3019 0044 C1F30B01 		ubfx	r1, r1, #0, #12
 3020 0048 0720     		movs	r0, #7
 3021 004a FFF7FEFF 		bl	max5307_w_chanel
 3022              	.LVL325:
 832:Core/Src/mainLoop.c ****     max5307_w_chanel(DACN_1, (value_dacN >> 12), max_outenable);
 3023              		.loc 1 832 5 view .LVU869
 3024 004e 464C     		ldr	r4, .L178+12
 3025 0050 2168     		ldr	r1, [r4]
 3026 0052 0122     		movs	r2, #1
 3027 0054 090B     		lsrs	r1, r1, #12
 3028 0056 0520     		movs	r0, #5
 3029 0058 FFF7FEFF 		bl	max5307_w_chanel
 3030              	.LVL326:
 833:Core/Src/mainLoop.c ****     max5307_w_chanel(DACN_1K, (value_dacN & 0xFFF), max_outenable);
 3031              		.loc 1 833 5 view .LVU870
 3032 005c 2168     		ldr	r1, [r4]
 3033 005e 0122     		movs	r2, #1
 3034 0060 C1F30B01 		ubfx	r1, r1, #0, #12
 3035 0064 0420     		movs	r0, #4
 3036 0066 FFF7FEFF 		bl	max5307_w_chanel
 3037              	.LVL327:
 834:Core/Src/mainLoop.c ****   } while (0);
 3038              		.loc 1 834 11 view .LVU871
 835:Core/Src/mainLoop.c **** 
ARM GAS  /tmp/ccKZYdRz.s 			page 71


 836:Core/Src/mainLoop.c ****   init_ad9520();
 3039              		.loc 1 836 3 view .LVU872
 3040 006a FFF7FEFF 		bl	init_ad9520
 3041              	.LVL328:
 837:Core/Src/mainLoop.c ****   // SystemClock_Config();
 838:Core/Src/mainLoop.c ****   // MX_USART2_UART_Init();
 839:Core/Src/mainLoop.c ****   // fprintf(logBufDma,"helloworld");
 840:Core/Src/mainLoop.c ****   //  for(int i=0;i<10;i++){
 841:Core/Src/mainLoop.c ****   //  	logBufDma[i] = 65 + i;
 842:Core/Src/mainLoop.c ****   //  }
 843:Core/Src/mainLoop.c ****   logBufDma.sbs = 35;  //'#'
 3042              		.loc 1 843 3 view .LVU873
 3043              		.loc 1 843 17 is_stmt 0 view .LVU874
 3044 006e 3F4F     		ldr	r7, .L178+16
 3045 0070 2323     		movs	r3, #35
 3046 0072 3B70     		strb	r3, [r7]
 844:Core/Src/mainLoop.c **** 
 845:Core/Src/mainLoop.c ****   HAL_UART_IRQHandler(&huart2);  // must add this, ornot uart2 dma not work
 3047              		.loc 1 845 3 is_stmt 1 view .LVU875
 3048 0074 3E4E     		ldr	r6, .L178+20
 3049 0076 3046     		mov	r0, r6
 3050 0078 FFF7FEFF 		bl	HAL_UART_IRQHandler
 3051              	.LVL329:
 846:Core/Src/mainLoop.c ****   HAL_UART_Transmit_DMA(&huart2, (uint8_t *)&logBufDma,
 3052              		.loc 1 846 3 view .LVU876
 3053 007c 0B22     		movs	r2, #11
 3054 007e 3946     		mov	r1, r7
 3055 0080 3046     		mov	r0, r6
 3056 0082 FFF7FEFF 		bl	HAL_UART_Transmit_DMA
 3057              	.LVL330:
 847:Core/Src/mainLoop.c ****                         sizeof(struct log_para_t));
 848:Core/Src/mainLoop.c **** 
 849:Core/Src/mainLoop.c ****   HAL_Delay(1);
 3058              		.loc 1 849 3 view .LVU877
 3059 0086 0120     		movs	r0, #1
 3060 0088 FFF7FEFF 		bl	HAL_Delay
 3061              	.LVL331:
 850:Core/Src/mainLoop.c ****   adc1_ok = 0;
 3062              		.loc 1 850 3 view .LVU878
 3063              		.loc 1 850 11 is_stmt 0 view .LVU879
 3064 008c 0027     		movs	r7, #0
 3065 008e 394B     		ldr	r3, .L178+24
 3066 0090 1F60     		str	r7, [r3]
 851:Core/Src/mainLoop.c ****   adc2_ok = 0;
 3067              		.loc 1 851 3 is_stmt 1 view .LVU880
 3068              		.loc 1 851 11 is_stmt 0 view .LVU881
 3069 0092 394B     		ldr	r3, .L178+28
 3070 0094 1F60     		str	r7, [r3]
 852:Core/Src/mainLoop.c ****   //Âú®‰∏ãÈù¢ÁöÑ‰ª£Á†Å‰∏≠‰ΩøÁî®while(1)Âæ™ÁéØÊµãËØïadcÈááÊ†∑ÔºådacËæìÂá∫ÔºåËøôÊòØ‰∏ÄÊÆµ‰∏¥Êó∂ÊµãËØï
 853:Core/Src/mainLoop.c ****     //HAL_ADC_Start(&hadc2);
 854:Core/Src/mainLoop.c ****     uint32_t adcVal = 0;
 3071              		.loc 1 854 5 is_stmt 1 view .LVU882
 3072              		.loc 1 854 14 is_stmt 0 view .LVU883
 3073 0096 0197     		str	r7, [sp, #4]
 855:Core/Src/mainLoop.c ****     int32_t adcCalVal = 0;
 3074              		.loc 1 855 5 is_stmt 1 view .LVU884
 3075              	.LVL332:
ARM GAS  /tmp/ccKZYdRz.s 			page 72


 856:Core/Src/mainLoop.c ****     int32_t nowVal=0,lastVal=0;
 3076              		.loc 1 856 5 view .LVU885
 857:Core/Src/mainLoop.c ****     double adcValF = 0;
 3077              		.loc 1 857 5 view .LVU886
 858:Core/Src/mainLoop.c ****     uint32_t dacP=value_dacP, dacN=value_dacN;
 3078              		.loc 1 858 5 view .LVU887
 3079              		.loc 1 858 14 is_stmt 0 view .LVU888
 3080 0098 2E68     		ldr	r6, [r5]
 3081              	.LVL333:
 3082              		.loc 1 858 31 view .LVU889
 3083 009a 2568     		ldr	r5, [r4]
 3084              	.LVL334:
 859:Core/Src/mainLoop.c ****     HAL_ADC_Start_DMA(&hadc2, (uint32_t *)(&adcVal), 1);
 3085              		.loc 1 859 5 is_stmt 1 view .LVU890
 3086 009c 0122     		movs	r2, #1
 3087 009e 01A9     		add	r1, sp, #4
 3088 00a0 3648     		ldr	r0, .L178+32
 3089 00a2 FFF7FEFF 		bl	HAL_ADC_Start_DMA
 3090              	.LVL335:
 3091 00a6 30E0     		b	.L174
 3092              	.LVL336:
 3093              	.L176:
 860:Core/Src/mainLoop.c ****     while(1){
 861:Core/Src/mainLoop.c ****       
 862:Core/Src/mainLoop.c ****       if(adc1_t1.adc_cap_ok == ADCCAPOK){
 863:Core/Src/mainLoop.c ****         adc1_t1.adc_cap_ok = ADCCAPWAIT;
 864:Core/Src/mainLoop.c ****         lastVal = nowVal;
 865:Core/Src/mainLoop.c ****         nowVal = (adcVal&0xfff);
 866:Core/Src/mainLoop.c ****         adcCalVal = (int32_t)nowVal - (int32_t)lastVal;
 867:Core/Src/mainLoop.c ****         HAL_ADC_Start_DMA(&hadc2, (uint32_t *)(&adcVal), 1);
 868:Core/Src/mainLoop.c ****       #define kP_3 (-5000.0)
 869:Core/Src/mainLoop.c ****       #define DELV (10)
 870:Core/Src/mainLoop.c ****         if(adcCalVal < 20){
 871:Core/Src/mainLoop.c ****           dletDac = ((float_t)adcCalVal) * kP_2;
 872:Core/Src/mainLoop.c ****           if(dletDac>0){
 873:Core/Src/mainLoop.c ****             (dacP) += DELV;
 874:Core/Src/mainLoop.c ****             (dacN) -= DELV;
 875:Core/Src/mainLoop.c ****           }else{
 876:Core/Src/mainLoop.c ****             (dacP) -= DELV;
 3094              		.loc 1 876 13 view .LVU891
 3095              		.loc 1 876 20 is_stmt 0 view .LVU892
 3096 00a8 0A3E     		subs	r6, r6, #10
 3097              	.LVL337:
 877:Core/Src/mainLoop.c ****             (dacN) += DELV;
 3098              		.loc 1 877 13 is_stmt 1 view .LVU893
 3099              		.loc 1 877 20 is_stmt 0 view .LVU894
 3100 00aa 0A35     		adds	r5, r5, #10
 3101              	.LVL338:
 3102              	.L171:
 878:Core/Src/mainLoop.c ****           }
 879:Core/Src/mainLoop.c ****         }
 880:Core/Src/mainLoop.c ****         //int32_t tmpUint32 = abs((int32_t)(dletDac));
 881:Core/Src/mainLoop.c ****         // (dacP) += (int32_t)(dletDac);
 882:Core/Src/mainLoop.c ****         // (dacN) -= (int32_t)(dletDac);
 883:Core/Src/mainLoop.c ****         
 884:Core/Src/mainLoop.c ****       // (dacP) += deltNoisV;
 885:Core/Src/mainLoop.c ****       // (dacN) -= deltNoisV;
ARM GAS  /tmp/ccKZYdRz.s 			page 73


 886:Core/Src/mainLoop.c ****         max5307_w_chanel(DACP_1, (((dacP) >> 10) & 0xffc), max_outdisable);
 3103              		.loc 1 886 9 is_stmt 1 view .LVU895
 3104 00ac 40F6FC74 		movw	r4, #4092
 3105              	.LVL339:
 3106              		.loc 1 886 9 is_stmt 0 view .LVU896
 3107 00b0 04EA9628 		and	r8, r4, r6, lsr #10
 3108 00b4 0222     		movs	r2, #2
 3109 00b6 4146     		mov	r1, r8
 3110 00b8 0620     		movs	r0, #6
 3111 00ba FFF7FEFF 		bl	max5307_w_chanel
 3112              	.LVL340:
 887:Core/Src/mainLoop.c ****         max5307_w_chanel(DACP_1K, (((dacP) >> 10) & 0xffc), max_outdisable);
 3113              		.loc 1 887 9 is_stmt 1 view .LVU897
 3114 00be 0222     		movs	r2, #2
 3115 00c0 4146     		mov	r1, r8
 3116 00c2 0720     		movs	r0, #7
 3117 00c4 FFF7FEFF 		bl	max5307_w_chanel
 3118              	.LVL341:
 888:Core/Src/mainLoop.c ****         max5307_w_chanel(DACP_1M, ((dacP) & 0xfff) & 0xfff, max_outdisable);
 3119              		.loc 1 888 9 view .LVU898
 3120 00c8 0222     		movs	r2, #2
 3121 00ca C6F30B01 		ubfx	r1, r6, #0, #12
 3122 00ce 0820     		movs	r0, #8
 3123 00d0 FFF7FEFF 		bl	max5307_w_chanel
 3124              	.LVL342:
 889:Core/Src/mainLoop.c ****         max5307_w_chanel(DACN_1, (((dacN) >> 10) & 0xffc), max_outdisable);
 3125              		.loc 1 889 9 view .LVU899
 3126 00d4 04EA9524 		and	r4, r4, r5, lsr #10
 3127 00d8 0222     		movs	r2, #2
 3128 00da 2146     		mov	r1, r4
 3129 00dc 0520     		movs	r0, #5
 3130 00de FFF7FEFF 		bl	max5307_w_chanel
 3131              	.LVL343:
 890:Core/Src/mainLoop.c ****         max5307_w_chanel(DACN_1K, (((dacN) >> 10) & 0xffc), max_outdisable);
 3132              		.loc 1 890 9 view .LVU900
 3133 00e2 0222     		movs	r2, #2
 3134 00e4 2146     		mov	r1, r4
 3135 00e6 0420     		movs	r0, #4
 3136 00e8 FFF7FEFF 		bl	max5307_w_chanel
 3137              	.LVL344:
 891:Core/Src/mainLoop.c ****         max5307_w_chanel(DACN_1M, ((dacN) & 0xfff) & 0xfff, max_outdisable);
 3138              		.loc 1 891 9 view .LVU901
 3139 00ec 0222     		movs	r2, #2
 3140 00ee C5F30B01 		ubfx	r1, r5, #0, #12
 3141 00f2 0320     		movs	r0, #3
 3142 00f4 FFF7FEFF 		bl	max5307_w_chanel
 3143              	.LVL345:
 892:Core/Src/mainLoop.c **** 
 893:Core/Src/mainLoop.c ****         do {
 3144              		.loc 1 893 9 view .LVU902
 3145              	.LBB8:
 894:Core/Src/mainLoop.c ****           uint16_t chanelNo = 0;
 3146              		.loc 1 894 11 view .LVU903
 895:Core/Src/mainLoop.c ****           chanelNo = 0x01 << (DACP_1 + 2) | 0x01 << (DACP_1K + 2) |
 3147              		.loc 1 895 11 view .LVU904
 896:Core/Src/mainLoop.c ****                      0x01 << (DACP_1M + 2) | 0x01 << (DACN_1 + 2) |
 897:Core/Src/mainLoop.c ****                      0x01 << (DACN_1K + 2) | 0x01 << (DACN_1M + 2);
ARM GAS  /tmp/ccKZYdRz.s 			page 74


 898:Core/Src/mainLoop.c ****           max5307_enable_ori_chanel(chanelNo);
 3148              		.loc 1 898 11 view .LVU905
 3149 00f8 4FF4FC60 		mov	r0, #2016
 3150 00fc FFF7FEFF 		bl	max5307_enable_ori_chanel
 3151              	.LVL346:
 3152              	.LBE8:
 899:Core/Src/mainLoop.c ****         } while (0);
 3153              		.loc 1 899 17 view .LVU906
 900:Core/Src/mainLoop.c ****         // max5307_w_chanel(DACP_1,  (((adcCalVal) >> 0)&0xfff), max_outenable);
 901:Core/Src/mainLoop.c ****         HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 3154              		.loc 1 901 9 view .LVU907
 3155 0100 4FF40061 		mov	r1, #2048
 3156 0104 1E48     		ldr	r0, .L178+36
 3157 0106 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 3158              	.LVL347:
 3159              	.L174:
 856:Core/Src/mainLoop.c ****     double adcValF = 0;
 3160              		.loc 1 856 13 is_stmt 0 view .LVU908
 3161 010a 3C46     		mov	r4, r7
 3162              	.L170:
 3163              	.LVL348:
 860:Core/Src/mainLoop.c ****       
 3164              		.loc 1 860 5 is_stmt 1 view .LVU909
 862:Core/Src/mainLoop.c ****         adc1_t1.adc_cap_ok = ADCCAPWAIT;
 3165              		.loc 1 862 7 view .LVU910
 862:Core/Src/mainLoop.c ****         adc1_t1.adc_cap_ok = ADCCAPWAIT;
 3166              		.loc 1 862 17 is_stmt 0 view .LVU911
 3167 010c 134B     		ldr	r3, .L178
 3168 010e 1A68     		ldr	r2, [r3]
 862:Core/Src/mainLoop.c ****         adc1_t1.adc_cap_ok = ADCCAPWAIT;
 3169              		.loc 1 862 9 view .LVU912
 3170 0110 45F25553 		movw	r3, #21845
 3171 0114 9A42     		cmp	r2, r3
 3172 0116 F9D1     		bne	.L170
 863:Core/Src/mainLoop.c ****         lastVal = nowVal;
 3173              		.loc 1 863 9 is_stmt 1 view .LVU913
 863:Core/Src/mainLoop.c ****         lastVal = nowVal;
 3174              		.loc 1 863 28 is_stmt 0 view .LVU914
 3175 0118 104B     		ldr	r3, .L178
 3176 011a 43F23332 		movw	r2, #13107
 3177 011e 1A60     		str	r2, [r3]
 864:Core/Src/mainLoop.c ****         nowVal = (adcVal&0xfff);
 3178              		.loc 1 864 9 is_stmt 1 view .LVU915
 3179              	.LVL349:
 865:Core/Src/mainLoop.c ****         adcCalVal = (int32_t)nowVal - (int32_t)lastVal;
 3180              		.loc 1 865 9 view .LVU916
 865:Core/Src/mainLoop.c ****         adcCalVal = (int32_t)nowVal - (int32_t)lastVal;
 3181              		.loc 1 865 25 is_stmt 0 view .LVU917
 3182 0120 019F     		ldr	r7, [sp, #4]
 865:Core/Src/mainLoop.c ****         adcCalVal = (int32_t)nowVal - (int32_t)lastVal;
 3183              		.loc 1 865 16 view .LVU918
 3184 0122 C7F30B07 		ubfx	r7, r7, #0, #12
 3185              	.LVL350:
 866:Core/Src/mainLoop.c ****         HAL_ADC_Start_DMA(&hadc2, (uint32_t *)(&adcVal), 1);
 3186              		.loc 1 866 9 is_stmt 1 view .LVU919
 866:Core/Src/mainLoop.c ****         HAL_ADC_Start_DMA(&hadc2, (uint32_t *)(&adcVal), 1);
 3187              		.loc 1 866 19 is_stmt 0 view .LVU920
ARM GAS  /tmp/ccKZYdRz.s 			page 75


 3188 0126 3C1B     		subs	r4, r7, r4
 3189              	.LVL351:
 867:Core/Src/mainLoop.c ****       #define kP_3 (-5000.0)
 3190              		.loc 1 867 9 is_stmt 1 view .LVU921
 3191 0128 0122     		movs	r2, #1
 3192 012a 01A9     		add	r1, sp, #4
 3193 012c 1348     		ldr	r0, .L178+32
 3194 012e FFF7FEFF 		bl	HAL_ADC_Start_DMA
 3195              	.LVL352:
 870:Core/Src/mainLoop.c ****           dletDac = ((float_t)adcCalVal) * kP_2;
 3196              		.loc 1 870 9 view .LVU922
 870:Core/Src/mainLoop.c ****           dletDac = ((float_t)adcCalVal) * kP_2;
 3197              		.loc 1 870 11 is_stmt 0 view .LVU923
 3198 0132 132C     		cmp	r4, #19
 3199 0134 BADC     		bgt	.L171
 871:Core/Src/mainLoop.c ****           if(dletDac>0){
 3200              		.loc 1 871 11 is_stmt 1 view .LVU924
 871:Core/Src/mainLoop.c ****           if(dletDac>0){
 3201              		.loc 1 871 22 is_stmt 0 view .LVU925
 3202 0136 07EE904A 		vmov	s15, r4	@ int
 3203 013a F8EEE77A 		vcvt.f32.s32	s15, s15
 871:Core/Src/mainLoop.c ****           if(dletDac>0){
 3204              		.loc 1 871 19 view .LVU926
 3205 013e B1EE047A 		vmov.f32	s14, #5.0e+0
 3206 0142 67EE877A 		vmul.f32	s15, s15, s14
 3207 0146 0F4B     		ldr	r3, .L178+40
 3208 0148 C3ED007A 		vstr.32	s15, [r3]
 872:Core/Src/mainLoop.c ****             (dacP) += DELV;
 3209              		.loc 1 872 11 is_stmt 1 view .LVU927
 872:Core/Src/mainLoop.c ****             (dacP) += DELV;
 3210              		.loc 1 872 13 is_stmt 0 view .LVU928
 3211 014c F5EEC07A 		vcmpe.f32	s15, #0
 3212 0150 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 3213 0154 A8DD     		ble	.L176
 873:Core/Src/mainLoop.c ****             (dacN) -= DELV;
 3214              		.loc 1 873 13 is_stmt 1 view .LVU929
 873:Core/Src/mainLoop.c ****             (dacN) -= DELV;
 3215              		.loc 1 873 20 is_stmt 0 view .LVU930
 3216 0156 0A36     		adds	r6, r6, #10
 3217              	.LVL353:
 874:Core/Src/mainLoop.c ****           }else{
 3218              		.loc 1 874 13 is_stmt 1 view .LVU931
 874:Core/Src/mainLoop.c ****           }else{
 3219              		.loc 1 874 20 is_stmt 0 view .LVU932
 3220 0158 0A3D     		subs	r5, r5, #10
 3221              	.LVL354:
 874:Core/Src/mainLoop.c ****           }else{
 3222              		.loc 1 874 20 view .LVU933
 3223 015a A7E7     		b	.L171
 3224              	.L179:
 3225              		.align	2
 3226              	.L178:
 3227 015c 00000000 		.word	adc1_t1
 3228 0160 00000000 		.word	adc1_t2
 3229 0164 00000000 		.word	.LANCHOR12
 3230 0168 00000000 		.word	.LANCHOR13
 3231 016c 00000000 		.word	logBufDma
ARM GAS  /tmp/ccKZYdRz.s 			page 76


 3232 0170 00000000 		.word	huart2
 3233 0174 00000000 		.word	.LANCHOR14
 3234 0178 00000000 		.word	.LANCHOR15
 3235 017c 00000000 		.word	hadc2
 3236 0180 00080240 		.word	1073874944
 3237 0184 00000000 		.word	.LANCHOR7
 3238              		.cfi_endproc
 3239              	.LFE153:
 3241              		.section	.text.HAL_ADC_ConvCpltCallback,"ax",%progbits
 3242              		.align	1
 3243              		.global	HAL_ADC_ConvCpltCallback
 3244              		.syntax unified
 3245              		.thumb
 3246              		.thumb_func
 3247              		.fpu fpv4-sp-d16
 3249              	HAL_ADC_ConvCpltCallback:
 3250              	.LVL355:
 3251              	.LFB154:
 902:Core/Src/mainLoop.c ****       }
 903:Core/Src/mainLoop.c ****    }
 904:Core/Src/mainLoop.c **** 
 905:Core/Src/mainLoop.c ****   HAL_ADC_Start_DMA(&hadc2, (uint32_t *)adc1_t1.buf, ADC_BUF_T_SIZE * 2);
 906:Core/Src/mainLoop.c ****   int32_t deltaDAC = 0;
 907:Core/Src/mainLoop.c ****   while (0) {
 908:Core/Src/mainLoop.c ****     value_dacP += deltaDAC;
 909:Core/Src/mainLoop.c ****     value_dacN -= deltaDAC;
 910:Core/Src/mainLoop.c ****     deltaDAC += 1;
 911:Core/Src/mainLoop.c **** 
 912:Core/Src/mainLoop.c ****     // max5307_w_chanel(DACP_1, (value_dacP  >> 12)&0xffc, max_outdisable);
 913:Core/Src/mainLoop.c ****     // max5307_w_chanel(DACP_1K, ((value_dacP>>0) & 0xfff), max_outdisable);
 914:Core/Src/mainLoop.c ****     // max5307_w_chanel(DACN_1, (value_dacN  >> 12)&0xffc, max_outdisable);
 915:Core/Src/mainLoop.c ****     // max5307_w_chanel(DACN_1K, ((value_dacN>>0) & 0xfff), max_outdisable);
 916:Core/Src/mainLoop.c **** 
 917:Core/Src/mainLoop.c ****     max5307_w_chanel(DACP_1, (((value_dacP) >> 20) & 0xffc), max_outdisable);
 918:Core/Src/mainLoop.c ****     max5307_w_chanel(DACP_1K, (((value_dacP) >> 10) & 0xffc), max_outdisable);
 919:Core/Src/mainLoop.c ****     max5307_w_chanel(DACP_1M, ((value_dacP) & 0xfff) & 0xfff, max_outdisable);
 920:Core/Src/mainLoop.c ****     max5307_w_chanel(DACN_1, (((value_dacN) >> 20) & 0xffc), max_outdisable);
 921:Core/Src/mainLoop.c ****     max5307_w_chanel(DACN_1K, (((value_dacN) >> 10) & 0xffc), max_outdisable);
 922:Core/Src/mainLoop.c ****     max5307_w_chanel(DACN_1M, ((value_dacN) & 0xfff) & 0xfff, max_outdisable);
 923:Core/Src/mainLoop.c **** 
 924:Core/Src/mainLoop.c ****     do {
 925:Core/Src/mainLoop.c ****       uint16_t chanelNo = 0;
 926:Core/Src/mainLoop.c ****       chanelNo = 0x01 << (DACP_1 + 2) | 0x01 << (DACP_1K + 2) |
 927:Core/Src/mainLoop.c ****                  0x01 << (DACP_1M + 2) | 0x01 << (DACN_1 + 2) |
 928:Core/Src/mainLoop.c ****                  0x01 << (DACN_1K + 2) | 0x01 << (DACN_1M + 2);
 929:Core/Src/mainLoop.c ****       max5307_enable_ori_chanel(chanelNo);
 930:Core/Src/mainLoop.c ****     } while (0);
 931:Core/Src/mainLoop.c ****     // HAL_Delay(1);
 932:Core/Src/mainLoop.c ****   }
 933:Core/Src/mainLoop.c **** 
 934:Core/Src/mainLoop.c ****   /* USER CODE END 2 */
 935:Core/Src/mainLoop.c **** 
 936:Core/Src/mainLoop.c ****   while (1) {
 937:Core/Src/mainLoop.c ****     if (adc1_t1.adc_cap_ok == ADCCAPOK) {
 938:Core/Src/mainLoop.c ****       // cal t1
 939:Core/Src/mainLoop.c ****       // HAL_ADC_Start_DMA(&hadc1,(uint32_t*)adc1_t2.buf ,ADC_BUF_T_SIZE*2);
 940:Core/Src/mainLoop.c ****       // cal_cp_output_dac(&adc1_t1, &value_dacP, &value_dacN);
ARM GAS  /tmp/ccKZYdRz.s 			page 77


 941:Core/Src/mainLoop.c ****       cal_cp_output_dac_ext_2(&adc1_t1, &value_dacP, &value_dacN, runTimes);
 942:Core/Src/mainLoop.c ****       adc1_t1.adc_cap_ok = CALOK;
 943:Core/Src/mainLoop.c ****       runTimes++;  // log run time runTimes+1 = 500us,
 944:Core/Src/mainLoop.c **** 
 945:Core/Src/mainLoop.c ****     } else if (adc1_t2.adc_cap_ok == ADCCAPOK) {
 946:Core/Src/mainLoop.c ****       // cal t2
 947:Core/Src/mainLoop.c ****       // HAL_ADC_Start_DMA(&hadc1,(uint32_t*)adc1_t1.buf ,ADC_BUF_T_SIZE*2);
 948:Core/Src/mainLoop.c ****       // cal_cp_output_dac(&adc1_t2, &value_dacP, &value_dacN);
 949:Core/Src/mainLoop.c ****       cal_cp_output_dac_ext_2(&adc1_t2, &value_dacP, &value_dacN, runTimes);
 950:Core/Src/mainLoop.c ****       adc1_t2.adc_cap_ok = CALOK;
 951:Core/Src/mainLoop.c ****       runTimes++;  // log run time runTimes+1 = 500us,
 952:Core/Src/mainLoop.c ****     }
 953:Core/Src/mainLoop.c ****     // printf("hello stm32 detect vel\n");
 954:Core/Src/mainLoop.c ****     // HAL_Delay(100);
 955:Core/Src/mainLoop.c ****   }
 956:Core/Src/mainLoop.c **** }
 957:Core/Src/mainLoop.c **** 
 958:Core/Src/mainLoop.c **** //Áî®‰∫éÂø´ÈÄüadcÈááÊ†∑ÔºåÈááÁî®dmaÊñπÂºèÔºåÊØèÊ¨°Âè™ÈááÊ†∑‰∏Ä‰∏™Êï∞ÂÄºÔºådma‰∏≠Êñ≠‰ª£Á†Å‰∏≠ËÆæÁΩÆÊ
 959:Core/Src/mainLoop.c **** //‰∏ªÁ®ãÂ∫èÊé•Êî∂Âà∞Ê†áÂøóÂêéÔºåÂèØ‰ª•ËØªÂèñadcÈááÊ†∑ÂÄºÔºåÂπ∂ÂºÄÂêØ‰∏ã‰∏ÄÊ¨°adc dmaÈááÊ†∑
 960:Core/Src/mainLoop.c **** void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef *hadc) {
 3252              		.loc 1 960 56 is_stmt 1 view -0
 3253              		.cfi_startproc
 3254              		@ args = 0, pretend = 0, frame = 0
 3255              		@ frame_needed = 0, uses_anonymous_args = 0
 3256              		.loc 1 960 56 is_stmt 0 view .LVU935
 3257 0000 10B5     		push	{r4, lr}
 3258              	.LCFI25:
 3259              		.cfi_def_cfa_offset 8
 3260              		.cfi_offset 4, -8
 3261              		.cfi_offset 14, -4
 3262 0002 0446     		mov	r4, r0
 961:Core/Src/mainLoop.c **** 
 962:Core/Src/mainLoop.c ****   if (hadc == &hadc1) {
 3263              		.loc 1 962 3 is_stmt 1 view .LVU936
 3264              		.loc 1 962 6 is_stmt 0 view .LVU937
 3265 0004 0A4B     		ldr	r3, .L186
 3266 0006 9842     		cmp	r0, r3
 3267 0008 03D0     		beq	.L184
 3268              	.LVL356:
 3269              	.L181:
 963:Core/Src/mainLoop.c ****     adc1_ok = 1;
 964:Core/Src/mainLoop.c ****     HAL_ADC_Start_DMA(&hadc1, (uint32_t *)adc1_t1.buf, ADC_BUF_T_SIZE * 2);
 965:Core/Src/mainLoop.c ****   }
 966:Core/Src/mainLoop.c ****   if (hadc == &hadc2) {
 3270              		.loc 1 966 3 is_stmt 1 view .LVU938
 3271              		.loc 1 966 6 is_stmt 0 view .LVU939
 3272 000a 0A4B     		ldr	r3, .L186+4
 3273 000c 9C42     		cmp	r4, r3
 3274 000e 09D0     		beq	.L185
 3275              	.L180:
 967:Core/Src/mainLoop.c ****     adc1_t1.adc_cap_ok = ADCCAPOK;
 968:Core/Src/mainLoop.c ****     
 969:Core/Src/mainLoop.c ****   }
 970:Core/Src/mainLoop.c **** }
 3276              		.loc 1 970 1 view .LVU940
 3277 0010 10BD     		pop	{r4, pc}
 3278              	.LVL357:
ARM GAS  /tmp/ccKZYdRz.s 			page 78


 3279              	.L184:
 963:Core/Src/mainLoop.c ****     adc1_ok = 1;
 3280              		.loc 1 963 5 is_stmt 1 view .LVU941
 963:Core/Src/mainLoop.c ****     adc1_ok = 1;
 3281              		.loc 1 963 13 is_stmt 0 view .LVU942
 3282 0012 094B     		ldr	r3, .L186+8
 3283 0014 0122     		movs	r2, #1
 3284 0016 1A60     		str	r2, [r3]
 964:Core/Src/mainLoop.c ****   }
 3285              		.loc 1 964 5 is_stmt 1 view .LVU943
 3286 0018 C822     		movs	r2, #200
 3287 001a 0849     		ldr	r1, .L186+12
 3288 001c 0448     		ldr	r0, .L186
 3289              	.LVL358:
 964:Core/Src/mainLoop.c ****   }
 3290              		.loc 1 964 5 is_stmt 0 view .LVU944
 3291 001e FFF7FEFF 		bl	HAL_ADC_Start_DMA
 3292              	.LVL359:
 3293 0022 F2E7     		b	.L181
 3294              	.L185:
 967:Core/Src/mainLoop.c ****     adc1_t1.adc_cap_ok = ADCCAPOK;
 3295              		.loc 1 967 5 is_stmt 1 view .LVU945
 967:Core/Src/mainLoop.c ****     adc1_t1.adc_cap_ok = ADCCAPOK;
 3296              		.loc 1 967 24 is_stmt 0 view .LVU946
 3297 0024 064B     		ldr	r3, .L186+16
 3298 0026 45F25552 		movw	r2, #21845
 3299 002a 1A60     		str	r2, [r3]
 3300              		.loc 1 970 1 view .LVU947
 3301 002c F0E7     		b	.L180
 3302              	.L187:
 3303 002e 00BF     		.align	2
 3304              	.L186:
 3305 0030 00000000 		.word	hadc1
 3306 0034 00000000 		.word	hadc2
 3307 0038 00000000 		.word	.LANCHOR14
 3308 003c 04000000 		.word	adc1_t1+4
 3309 0040 00000000 		.word	adc1_t1
 3310              		.cfi_endproc
 3311              	.LFE154:
 3313              		.section	.text.HAL_UART_TxCpltCallback,"ax",%progbits
 3314              		.align	1
 3315              		.global	HAL_UART_TxCpltCallback
 3316              		.syntax unified
 3317              		.thumb
 3318              		.thumb_func
 3319              		.fpu fpv4-sp-d16
 3321              	HAL_UART_TxCpltCallback:
 3322              	.LVL360:
 3323              	.LFB155:
 971:Core/Src/mainLoop.c **** 
 972:Core/Src/mainLoop.c **** 
 973:Core/Src/mainLoop.c **** // void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef *hadc) {
 974:Core/Src/mainLoop.c **** //   // ËøôÈáåÊòØÂΩìADCËΩ¨Êç¢ÂÆåÊàêÊó∂ÊâßË°åÁöÑ‰ª£Á†Å
 975:Core/Src/mainLoop.c **** //   // ÂèØ‰ª•ËÆæÁΩÆÊ†áÂøóÔºåÈÄöÁü•‰∏ªÁ®ãÂ∫èÈááÊ†∑Â∑≤ÁªèÂÆåÊàê
 976:Core/Src/mainLoop.c **** //   if (hadc == &hadc1) {
 977:Core/Src/mainLoop.c **** //     adc2_ok = 1;
 978:Core/Src/mainLoop.c **** //     HAL_ADC_Start_DMA(&hadc1, (uint32_t *)value_adc2, ADC_TIMES_N);
ARM GAS  /tmp/ccKZYdRz.s 			page 79


 979:Core/Src/mainLoop.c **** //   }
 980:Core/Src/mainLoop.c **** //   if (hadc == &hadc2) {
 981:Core/Src/mainLoop.c **** //     if (adc1_t1.adc_cap_ok == CALOK) {
 982:Core/Src/mainLoop.c **** //       HAL_ADC_Start_DMA(&hadc2, (uint32_t *)adc1_t1.buf, ADC_BUF_T_SIZE * 2);
 983:Core/Src/mainLoop.c **** //       adc1_t1.adc_cap_ok = ADCCAPOK;
 984:Core/Src/mainLoop.c **** //     } else if (adc1_t2.adc_cap_ok == CALOK) {
 985:Core/Src/mainLoop.c **** //       HAL_ADC_Start_DMA(&hadc2, (uint32_t *)adc1_t2.buf, ADC_BUF_T_SIZE * 2);
 986:Core/Src/mainLoop.c **** //       adc1_t2.adc_cap_ok = ADCCAPOK;
 987:Core/Src/mainLoop.c **** //     } else {
 988:Core/Src/mainLoop.c **** //     }
 989:Core/Src/mainLoop.c **** //     HAL_GPIO_TogglePin(LED3_GPIO_Port, LED3_Pin);
 990:Core/Src/mainLoop.c **** //   }
 991:Core/Src/mainLoop.c **** // }
 992:Core/Src/mainLoop.c **** 
 993:Core/Src/mainLoop.c **** // void HAL_UART_TxHalfCpltCallback(UART_HandleTypeDef *huart){
 994:Core/Src/mainLoop.c **** void HAL_UART_TxCpltCallback(UART_HandleTypeDef *huart) {
 3324              		.loc 1 994 57 is_stmt 1 view -0
 3325              		.cfi_startproc
 3326              		@ args = 0, pretend = 0, frame = 0
 3327              		@ frame_needed = 0, uses_anonymous_args = 0
 3328              		.loc 1 994 57 is_stmt 0 view .LVU949
 3329 0000 08B5     		push	{r3, lr}
 3330              	.LCFI26:
 3331              		.cfi_def_cfa_offset 8
 3332              		.cfi_offset 3, -8
 3333              		.cfi_offset 14, -4
 995:Core/Src/mainLoop.c ****   if (huart == &huart2) {
 3334              		.loc 1 995 3 is_stmt 1 view .LVU950
 3335              		.loc 1 995 6 is_stmt 0 view .LVU951
 3336 0002 0B4B     		ldr	r3, .L192
 3337 0004 8342     		cmp	r3, r0
 3338 0006 00D0     		beq	.L191
 3339              	.LVL361:
 3340              	.L188:
 996:Core/Src/mainLoop.c ****     // uint16_t *padcv = (uint16_t *)(&logBufDma[1]);
 997:Core/Src/mainLoop.c ****     // uint32_t *pdacp = (uint32_t *)(&logBufDma[3]);
 998:Core/Src/mainLoop.c ****     // uint32_t *pdacn = (uint32_t *)(&logBufDma[7]);
 999:Core/Src/mainLoop.c ****     logBufDma.mean_adc_val = logPara.mean_adc_val;
1000:Core/Src/mainLoop.c ****     logBufDma.dac_val_p = logPara.dac_val_p;
1001:Core/Src/mainLoop.c ****     logBufDma.dac_val_n = logPara.dac_val_n;
1002:Core/Src/mainLoop.c **** 
1003:Core/Src/mainLoop.c ****     HAL_UART_Transmit_DMA(&huart2, (uint8_t *)&logBufDma,
1004:Core/Src/mainLoop.c ****                           sizeof(struct log_para_t));
1005:Core/Src/mainLoop.c ****   }
1006:Core/Src/mainLoop.c **** }...
 3341              		.loc 1 1006 1 view .LVU952
 3342 0008 08BD     		pop	{r3, pc}
 3343              	.LVL362:
 3344              	.L191:
 999:Core/Src/mainLoop.c ****     logBufDma.mean_adc_val = logPara.mean_adc_val;
 3345              		.loc 1 999 5 is_stmt 1 view .LVU953
 999:Core/Src/mainLoop.c ****     logBufDma.mean_adc_val = logPara.mean_adc_val;
 3346              		.loc 1 999 37 is_stmt 0 view .LVU954
 3347 000a 0A4B     		ldr	r3, .L192+4
 3348 000c B3F80120 		ldrh	r2, [r3, #1]	@ unaligned
 999:Core/Src/mainLoop.c ****     logBufDma.mean_adc_val = logPara.mean_adc_val;
 3349              		.loc 1 999 28 view .LVU955
ARM GAS  /tmp/ccKZYdRz.s 			page 80


 3350 0010 0949     		ldr	r1, .L192+8
 3351 0012 A1F80120 		strh	r2, [r1, #1]	@ unaligned
1000:Core/Src/mainLoop.c ****     logBufDma.dac_val_p = logPara.dac_val_p;
 3352              		.loc 1 1000 5 is_stmt 1 view .LVU956
1000:Core/Src/mainLoop.c ****     logBufDma.dac_val_p = logPara.dac_val_p;
 3353              		.loc 1 1000 34 is_stmt 0 view .LVU957
 3354 0016 D3F80320 		ldr	r2, [r3, #3]	@ unaligned
1000:Core/Src/mainLoop.c ****     logBufDma.dac_val_p = logPara.dac_val_p;
 3355              		.loc 1 1000 25 view .LVU958
 3356 001a C1F80320 		str	r2, [r1, #3]	@ unaligned
1001:Core/Src/mainLoop.c ****     logBufDma.dac_val_n = logPara.dac_val_n;
 3357              		.loc 1 1001 5 is_stmt 1 view .LVU959
1001:Core/Src/mainLoop.c ****     logBufDma.dac_val_n = logPara.dac_val_n;
 3358              		.loc 1 1001 34 is_stmt 0 view .LVU960
 3359 001e D3F80730 		ldr	r3, [r3, #7]	@ unaligned
1001:Core/Src/mainLoop.c ****     logBufDma.dac_val_n = logPara.dac_val_n;
 3360              		.loc 1 1001 25 view .LVU961
 3361 0022 C1F80730 		str	r3, [r1, #7]	@ unaligned
1003:Core/Src/mainLoop.c ****     HAL_UART_Transmit_DMA(&huart2, (uint8_t *)&logBufDma,
 3362              		.loc 1 1003 5 is_stmt 1 view .LVU962
 3363 0026 0B22     		movs	r2, #11
 3364 0028 0148     		ldr	r0, .L192
 3365              	.LVL363:
1003:Core/Src/mainLoop.c ****     HAL_UART_Transmit_DMA(&huart2, (uint8_t *)&logBufDma,
 3366              		.loc 1 1003 5 is_stmt 0 view .LVU963
 3367 002a FFF7FEFF 		bl	HAL_UART_Transmit_DMA
 3368              	.LVL364:
 3369              		.loc 1 1006 1 view .LVU964
 3370 002e EBE7     		b	.L188
 3371              	.L193:
 3372              		.align	2
 3373              	.L192:
 3374 0030 00000000 		.word	huart2
 3375 0034 00000000 		.word	logPara
 3376 0038 00000000 		.word	logBufDma
 3377              		.cfi_endproc
 3378              	.LFE155:
 3380              		.comm	lastAdcVal,4,4
 3381              		.comm	adcVal,4,4
 3382              		.global	locked
 3383              		.global	ad9520_reg
 3384              		.comm	logBufDma,11,4
 3385              		.comm	adc1_t2,412,4
 3386              		.comm	adc1_t1,412,4
 3387              		.global	mainCpLast
 3388              		.global	mainCp
 3389              		.global	value_dacN
 3390              		.global	value_dacP
 3391              		.global	adc2_ok
 3392              		.global	adc1_ok
 3393              		.global	forSaveAllSum
 3394              		.global	difVal_view
 3395              		.global	meanVal_view
 3396              		.comm	logPara,11,4
 3397              		.comm	valMeanArray,80,4
 3398              		.global	dletDac
 3399              		.global	pidD
ARM GAS  /tmp/ccKZYdRz.s 			page 81


 3400              		.global	pidI
 3401              		.global	pidP
 3402              		.comm	adcSumArray,4000,4
 3403              		.comm	value_cp,32000,4
 3404              		.comm	value_adc2,16000,4
 3405              		.comm	value_adc1,16000,4
 3406              		.global	Wave_LUT
 3407              		.comm	tmp,8,8
 3408              		.comm	dacV,4,4
 3409              		.comm	v_dianya,4,4
 3410              		.comm	buf,4,4
 3411              		.comm	yy_cnt,4,4
 3412              		.comm	xx_cnt,4,4
 3413              		.comm	complete_sign,4,4
 3414              		.comm	yy,4,4
 3415              		.comm	xx,4,4
 3416              		.global	fre_dif
 3417              		.global	f
 3418              		.global	i
 3419              		.global	chanl2_midx
 3420              		.global	chanl1_midx
 3421              		.global	average_xNum2
 3422              		.global	average_xNum1
 3423              		.global	chanl2_completed
 3424              		.global	chanl1_completed
 3425              		.comm	chanl2_capNum_f,400,4
 3426              		.comm	chanl1_capNum_f,400,4
 3427              		.comm	chanl2_xNum,400,4
 3428              		.comm	chanl1_xNum,400,4
 3429              		.comm	chanl2_capNum,400,4
 3430              		.comm	chanl1_capNum,400,4
 3431              		.section	.bss.ad9520_reg,"aw",%nobits
 3432              		.align	1
 3435              	ad9520_reg:
 3436 0000 0000     		.space	2
 3437              		.section	.bss.adc1_ok,"aw",%nobits
 3438              		.align	2
 3439              		.set	.LANCHOR14,. + 0
 3442              	adc1_ok:
 3443 0000 00000000 		.space	4
 3444              		.section	.bss.adc2_ok,"aw",%nobits
 3445              		.align	2
 3446              		.set	.LANCHOR15,. + 0
 3449              	adc2_ok:
 3450 0000 00000000 		.space	4
 3451              		.section	.bss.average_xNum1,"aw",%nobits
 3452              		.align	2
 3455              	average_xNum1:
 3456 0000 00000000 		.space	4
 3457              		.section	.bss.average_xNum2,"aw",%nobits
 3458              		.align	2
 3461              	average_xNum2:
 3462 0000 00000000 		.space	4
 3463              		.section	.bss.chanl1_completed,"aw",%nobits
 3464              		.align	2
 3467              	chanl1_completed:
 3468 0000 00000000 		.space	4
ARM GAS  /tmp/ccKZYdRz.s 			page 82


 3469              		.section	.bss.chanl1_midx,"aw",%nobits
 3470              		.align	2
 3471              		.set	.LANCHOR2,. + 0
 3474              	chanl1_midx:
 3475 0000 00000000 		.space	4
 3476              		.section	.bss.chanl2_completed,"aw",%nobits
 3477              		.align	2
 3480              	chanl2_completed:
 3481 0000 00000000 		.space	4
 3482              		.section	.bss.chanl2_midx,"aw",%nobits
 3483              		.align	2
 3484              		.set	.LANCHOR3,. + 0
 3487              	chanl2_midx:
 3488 0000 00000000 		.space	4
 3489              		.section	.bss.currentP.10304,"aw",%nobits
 3490              		.align	2
 3491              		.set	.LANCHOR8,. + 0
 3494              	currentP.10304:
 3495 0000 00000000 		.space	4
 3496              		.section	.bss.difVal_view,"aw",%nobits
 3497              		.align	2
 3498              		.set	.LANCHOR10,. + 0
 3501              	difVal_view:
 3502 0000 00000000 		.space	4
 3503              		.section	.bss.dletDac,"aw",%nobits
 3504              		.align	2
 3505              		.set	.LANCHOR7,. + 0
 3508              	dletDac:
 3509 0000 00000000 		.space	4
 3510              		.section	.bss.forSaveAllSum,"aw",%nobits
 3511              		.align	1
 3512              		.set	.LANCHOR11,. + 0
 3515              	forSaveAllSum:
 3516 0000 0000     		.space	2
 3517              		.section	.bss.fre_dif,"aw",%nobits
 3518              		.align	2
 3519              		.set	.LANCHOR0,. + 0
 3522              	fre_dif:
 3523 0000 00000000 		.space	4
 3524              		.section	.bss.i,"aw",%nobits
 3525              		.align	2
 3526              		.set	.LANCHOR1,. + 0
 3529              	i:
 3530 0000 00000000 		.space	4
 3531              		.section	.bss.locked,"aw",%nobits
 3532              		.align	2
 3535              	locked:
 3536 0000 00000000 		.space	4
 3537              		.section	.bss.mainCp,"aw",%nobits
 3538              		.align	2
 3541              	mainCp:
 3542 0000 00000000 		.space	4
 3543              		.section	.bss.mainCpLast,"aw",%nobits
 3544              		.align	2
 3547              	mainCpLast:
 3548 0000 00000000 		.space	4
 3549              		.section	.bss.meanVal_view,"aw",%nobits
ARM GAS  /tmp/ccKZYdRz.s 			page 83


 3550              		.align	2
 3551              		.set	.LANCHOR9,. + 0
 3554              	meanVal_view:
 3555 0000 00000000 		.space	4
 3556              		.section	.bss.pidD,"aw",%nobits
 3557              		.align	2
 3558              		.set	.LANCHOR6,. + 0
 3561              	pidD:
 3562 0000 00000000 		.space	4
 3563              		.section	.bss.pidI,"aw",%nobits
 3564              		.align	2
 3565              		.set	.LANCHOR5,. + 0
 3568              	pidI:
 3569 0000 00000000 		.space	4
 3570              		.section	.bss.pidP,"aw",%nobits
 3571              		.align	2
 3572              		.set	.LANCHOR4,. + 0
 3575              	pidP:
 3576 0000 00000000 		.space	4
 3577              		.section	.data.Wave_LUT,"aw"
 3578              		.align	2
 3581              	Wave_LUT:
 3582 0000 00080000 		.word	2048
 3583 0004 65080000 		.word	2149
 3584 0008 CA080000 		.word	2250
 3585 000c 2E090000 		.word	2350
 3586 0010 92090000 		.word	2450
 3587 0014 F5090000 		.word	2549
 3588 0018 560A0000 		.word	2646
 3589 001c B60A0000 		.word	2742
 3590 0020 150B0000 		.word	2837
 3591 0024 710B0000 		.word	2929
 3592 0028 CC0B0000 		.word	3020
 3593 002c 240C0000 		.word	3108
 3594 0030 790C0000 		.word	3193
 3595 0034 CB0C0000 		.word	3275
 3596 0038 1B0D0000 		.word	3355
 3597 003c 670D0000 		.word	3431
 3598 0040 B00D0000 		.word	3504
 3599 0044 F60D0000 		.word	3574
 3600 0048 370E0000 		.word	3639
 3601 004c 750E0000 		.word	3701
 3602 0050 AF0E0000 		.word	3759
 3603 0054 E40E0000 		.word	3812
 3604 0058 150F0000 		.word	3861
 3605 005c 420F0000 		.word	3906
 3606 0060 6A0F0000 		.word	3946
 3607 0064 8E0F0000 		.word	3982
 3608 0068 AD0F0000 		.word	4013
 3609 006c C70F0000 		.word	4039
 3610 0070 DC0F0000 		.word	4060
 3611 0074 EC0F0000 		.word	4076
 3612 0078 F70F0000 		.word	4087
 3613 007c FE0F0000 		.word	4094
 3614 0080 FF0F0000 		.word	4095
 3615 0084 FB0F0000 		.word	4091
 3616 0088 F20F0000 		.word	4082
ARM GAS  /tmp/ccKZYdRz.s 			page 84


 3617 008c E50F0000 		.word	4069
 3618 0090 D20F0000 		.word	4050
 3619 0094 BA0F0000 		.word	4026
 3620 0098 9E0F0000 		.word	3998
 3621 009c 7D0F0000 		.word	3965
 3622 00a0 570F0000 		.word	3927
 3623 00a4 2C0F0000 		.word	3884
 3624 00a8 FD0E0000 		.word	3837
 3625 00ac CA0E0000 		.word	3786
 3626 00b0 920E0000 		.word	3730
 3627 00b4 570E0000 		.word	3671
 3628 00b8 170E0000 		.word	3607
 3629 00bc D30D0000 		.word	3539
 3630 00c0 8C0D0000 		.word	3468
 3631 00c4 420D0000 		.word	3394
 3632 00c8 F40C0000 		.word	3316
 3633 00cc A30C0000 		.word	3235
 3634 00d0 4F0C0000 		.word	3151
 3635 00d4 F80B0000 		.word	3064
 3636 00d8 9F0B0000 		.word	2975
 3637 00dc 430B0000 		.word	2883
 3638 00e0 E60A0000 		.word	2790
 3639 00e4 870A0000 		.word	2695
 3640 00e8 260A0000 		.word	2598
 3641 00ec C4090000 		.word	2500
 3642 00f0 60090000 		.word	2400
 3643 00f4 FC080000 		.word	2300
 3644 00f8 97080000 		.word	2199
 3645 00fc 32080000 		.word	2098
 3646 0100 CD070000 		.word	1997
 3647 0104 68070000 		.word	1896
 3648 0108 03070000 		.word	1795
 3649 010c 9F060000 		.word	1695
 3650 0110 3B060000 		.word	1595
 3651 0114 D9050000 		.word	1497
 3652 0118 78050000 		.word	1400
 3653 011c 19050000 		.word	1305
 3654 0120 BC040000 		.word	1212
 3655 0124 60040000 		.word	1120
 3656 0128 07040000 		.word	1031
 3657 012c B0030000 		.word	944
 3658 0130 5C030000 		.word	860
 3659 0134 0B030000 		.word	779
 3660 0138 BD020000 		.word	701
 3661 013c 73020000 		.word	627
 3662 0140 2C020000 		.word	556
 3663 0144 E8010000 		.word	488
 3664 0148 A8010000 		.word	424
 3665 014c 6D010000 		.word	365
 3666 0150 35010000 		.word	309
 3667 0154 02010000 		.word	258
 3668 0158 D3000000 		.word	211
 3669 015c A8000000 		.word	168
 3670 0160 82000000 		.word	130
 3671 0164 61000000 		.word	97
 3672 0168 45000000 		.word	69
 3673 016c 2D000000 		.word	45
ARM GAS  /tmp/ccKZYdRz.s 			page 85


 3674 0170 1A000000 		.word	26
 3675 0174 0D000000 		.word	13
 3676 0178 04000000 		.word	4
 3677 017c 00000000 		.word	0
 3678 0180 01000000 		.word	1
 3679 0184 08000000 		.word	8
 3680 0188 13000000 		.word	19
 3681 018c 23000000 		.word	35
 3682 0190 38000000 		.word	56
 3683 0194 52000000 		.word	82
 3684 0198 71000000 		.word	113
 3685 019c 95000000 		.word	149
 3686 01a0 BD000000 		.word	189
 3687 01a4 EA000000 		.word	234
 3688 01a8 1B010000 		.word	283
 3689 01ac 50010000 		.word	336
 3690 01b0 8A010000 		.word	394
 3691 01b4 C8010000 		.word	456
 3692 01b8 09020000 		.word	521
 3693 01bc 4F020000 		.word	591
 3694 01c0 98020000 		.word	664
 3695 01c4 E4020000 		.word	740
 3696 01c8 34030000 		.word	820
 3697 01cc 86030000 		.word	902
 3698 01d0 DB030000 		.word	987
 3699 01d4 33040000 		.word	1075
 3700 01d8 8E040000 		.word	1166
 3701 01dc EA040000 		.word	1258
 3702 01e0 49050000 		.word	1353
 3703 01e4 A9050000 		.word	1449
 3704 01e8 0A060000 		.word	1546
 3705 01ec 6D060000 		.word	1645
 3706 01f0 D1060000 		.word	1745
 3707 01f4 35070000 		.word	1845
 3708 01f8 9A070000 		.word	1946
 3709 01fc FF070000 		.word	2047
 3710              		.section	.data.f,"aw"
 3711              		.align	2
 3714              	f:
 3715 0000 C3F54840 		.word	1078523331
 3716              		.section	.data.value_dacN,"aw"
 3717              		.align	2
 3718              		.set	.LANCHOR13,. + 0
 3721              	value_dacN:
 3722 0000 00082080 		.word	-2145384448
 3723              		.section	.data.value_dacP,"aw"
 3724              		.align	2
 3725              		.set	.LANCHOR12,. + 0
 3728              	value_dacP:
 3729 0000 00082080 		.word	-2145384448
 3730              		.text
 3731              	.Letext0:
 3732              		.file 2 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/inc
 3733              		.file 3 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/inc
 3734              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 3735              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 3736              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
ARM GAS  /tmp/ccKZYdRz.s 			page 86


 3737              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 3738              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 3739              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 3740              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 3741              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_adc.h"
 3742              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dac.h"
 3743              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 3744              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 3745              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
 3746              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 3747              		.file 17 "Core/Inc/mainLoop.h"
 3748              		.file 18 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/lib/gcc/arm-none
 3749              		.file 19 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/in
 3750              		.file 20 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/in
 3751              		.file 21 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/in
 3752              		.file 22 "/home/cahill/stm32cubeMx/install_bin/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/in
 3753              		.file 23 "Core/Inc/max5307.h"
 3754              		.file 24 "<built-in>"
 3755              		.file 25 "Core/Inc/ad9520_function.h"
 3756              		.file 26 "Core/Inc/main.h"
ARM GAS  /tmp/ccKZYdRz.s 			page 87


DEFINED SYMBOLS
                            *ABS*:0000000000000000 mainLoop.c
     /tmp/ccKZYdRz.s:18     .text._write:0000000000000000 $t
     /tmp/ccKZYdRz.s:26     .text._write:0000000000000000 _write
     /tmp/ccKZYdRz.s:60     .text._write:0000000000000014 $d
     /tmp/ccKZYdRz.s:65     .text.transform_capNum_to_xNum:0000000000000000 $t
     /tmp/ccKZYdRz.s:72     .text.transform_capNum_to_xNum:0000000000000000 transform_capNum_to_xNum
     /tmp/ccKZYdRz.s:133    .text.cal_average_xNum:0000000000000000 $t
     /tmp/ccKZYdRz.s:140    .text.cal_average_xNum:0000000000000000 cal_average_xNum
     /tmp/ccKZYdRz.s:209    .text.enable_tim4_capture_Iterrupt:0000000000000000 $t
     /tmp/ccKZYdRz.s:216    .text.enable_tim4_capture_Iterrupt:0000000000000000 enable_tim4_capture_Iterrupt
     /tmp/ccKZYdRz.s:244    .text.enable_tim4_capture_Iterrupt:0000000000000018 $d
     /tmp/ccKZYdRz.s:254    .text.generateSinWave:0000000000000000 $t
     /tmp/ccKZYdRz.s:261    .text.generateSinWave:0000000000000000 generateSinWave
     /tmp/ccKZYdRz.s:307    .text.generateSinWave:0000000000000038 $d
                            *COM*:0000000000000008 tmp
     /tmp/ccKZYdRz.s:318    .text.mainLoop:0000000000000000 $t
     /tmp/ccKZYdRz.s:325    .text.mainLoop:0000000000000000 mainLoop
     /tmp/ccKZYdRz.s:561    .text.mainLoop:0000000000000150 $d
                            *COM*:0000000000000004 complete_sign
                            *COM*:0000000000000004 xx
                            *COM*:0000000000000004 yy
                            *COM*:0000000000000004 xx_cnt
                            *COM*:0000000000000004 yy_cnt
                            *COM*:0000000000000004 v_dianya
                            *COM*:0000000000000004 buf
                            *COM*:0000000000000190 chanl1_capNum
                            *COM*:0000000000000190 chanl2_capNum
     /tmp/ccKZYdRz.s:585    .text.HAL_TIM_IC_CaptureCallback:0000000000000000 $t
     /tmp/ccKZYdRz.s:592    .text.HAL_TIM_IC_CaptureCallback:0000000000000000 HAL_TIM_IC_CaptureCallback
     /tmp/ccKZYdRz.s:663    .text.HAL_TIM_IC_CaptureCallback:0000000000000044 $d
     /tmp/ccKZYdRz.s:673    .text.HAL_TIM_PeriodElapsedCallback:0000000000000000 $t
     /tmp/ccKZYdRz.s:680    .text.HAL_TIM_PeriodElapsedCallback:0000000000000000 HAL_TIM_PeriodElapsedCallback
     /tmp/ccKZYdRz.s:741    .text.HAL_TIM_PeriodElapsedCallback:0000000000000034 $d
     /tmp/ccKZYdRz.s:755    .text.HAL_UART_RxCpltCallback:0000000000000000 $t
     /tmp/ccKZYdRz.s:762    .text.HAL_UART_RxCpltCallback:0000000000000000 HAL_UART_RxCpltCallback
     /tmp/ccKZYdRz.s:974    .text.HAL_UART_RxCpltCallback:0000000000000130 $d
     /tmp/ccKZYdRz.s:989    .text.set_dac_initVal:0000000000000000 $t
     /tmp/ccKZYdRz.s:996    .text.set_dac_initVal:0000000000000000 set_dac_initVal
     /tmp/ccKZYdRz.s:1070   .text.cal_k_value_cp:0000000000000000 $t
     /tmp/ccKZYdRz.s:1077   .text.cal_k_value_cp:0000000000000000 cal_k_value_cp
     /tmp/ccKZYdRz.s:1193   .text.cal_k_value_cp:000000000000005c $d
                            *COM*:0000000000007d00 value_cp
     /tmp/ccKZYdRz.s:1198   .text.cal_value_cp:0000000000000000 $t
     /tmp/ccKZYdRz.s:1205   .text.cal_value_cp:0000000000000000 cal_value_cp
     /tmp/ccKZYdRz.s:1260   .text.cal_value_cp:000000000000002c $d
                            *COM*:0000000000003e80 value_adc1
     /tmp/ccKZYdRz.s:1266   .text.cal_cp_output_dac:0000000000000000 $t
     /tmp/ccKZYdRz.s:1273   .text.cal_cp_output_dac:0000000000000000 cal_cp_output_dac
     /tmp/ccKZYdRz.s:1576   .text.cal_cp_output_dac:0000000000000180 $d
                            *COM*:0000000000000fa0 adcSumArray
     /tmp/ccKZYdRz.s:1593   .text.insertMeanVal:0000000000000000 $t
     /tmp/ccKZYdRz.s:1600   .text.insertMeanVal:0000000000000000 insertMeanVal
     /tmp/ccKZYdRz.s:1719   .text.insertMeanVal:000000000000006c $d
                            *COM*:0000000000000050 valMeanArray
     /tmp/ccKZYdRz.s:1726   .text.cal_cp_output_dac_ext:0000000000000000 $t
     /tmp/ccKZYdRz.s:1733   .text.cal_cp_output_dac_ext:0000000000000000 cal_cp_output_dac_ext
ARM GAS  /tmp/ccKZYdRz.s 			page 88


     /tmp/ccKZYdRz.s:2081   .text.cal_cp_output_dac_ext:00000000000001b0 $d
                            *COM*:000000000000000b logPara
     /tmp/ccKZYdRz.s:2101   .text.cal_cp_output_dac_ext_1:0000000000000000 $t
     /tmp/ccKZYdRz.s:2108   .text.cal_cp_output_dac_ext_1:0000000000000000 cal_cp_output_dac_ext_1
     /tmp/ccKZYdRz.s:2460   .text.cal_cp_output_dac_ext_1:00000000000001a8 $d
     /tmp/ccKZYdRz.s:2479   .text.cal_cp_output_dac_ext_2:0000000000000000 $t
     /tmp/ccKZYdRz.s:2486   .text.cal_cp_output_dac_ext_2:0000000000000000 cal_cp_output_dac_ext_2
     /tmp/ccKZYdRz.s:2769   .text.cal_cp_output_dac_ext_2:0000000000000134 $d
     /tmp/ccKZYdRz.s:2778   .text.cal_cp_output_dac_ext_3:0000000000000000 $t
     /tmp/ccKZYdRz.s:2785   .text.cal_cp_output_dac_ext_3:0000000000000000 cal_cp_output_dac_ext_3
     /tmp/ccKZYdRz.s:2799   .text.fakeDelay:0000000000000000 $t
     /tmp/ccKZYdRz.s:2806   .text.fakeDelay:0000000000000000 fakeDelay
     /tmp/ccKZYdRz.s:2858   .text.preMainLoop1:0000000000000000 $t
     /tmp/ccKZYdRz.s:2865   .text.preMainLoop1:0000000000000000 preMainLoop1
     /tmp/ccKZYdRz.s:2942   .text.preMainLoop1:0000000000000044 $d
     /tmp/ccKZYdRz.s:2948   .text.mainLoop1:0000000000000000 $t
     /tmp/ccKZYdRz.s:2955   .text.mainLoop1:0000000000000000 mainLoop1
     /tmp/ccKZYdRz.s:3227   .text.mainLoop1:000000000000015c $d
                            *COM*:000000000000019c adc1_t1
                            *COM*:000000000000019c adc1_t2
                            *COM*:000000000000000b logBufDma
     /tmp/ccKZYdRz.s:3242   .text.HAL_ADC_ConvCpltCallback:0000000000000000 $t
     /tmp/ccKZYdRz.s:3249   .text.HAL_ADC_ConvCpltCallback:0000000000000000 HAL_ADC_ConvCpltCallback
     /tmp/ccKZYdRz.s:3305   .text.HAL_ADC_ConvCpltCallback:0000000000000030 $d
     /tmp/ccKZYdRz.s:3314   .text.HAL_UART_TxCpltCallback:0000000000000000 $t
     /tmp/ccKZYdRz.s:3321   .text.HAL_UART_TxCpltCallback:0000000000000000 HAL_UART_TxCpltCallback
     /tmp/ccKZYdRz.s:3374   .text.HAL_UART_TxCpltCallback:0000000000000030 $d
                            *COM*:0000000000000004 lastAdcVal
                            *COM*:0000000000000004 adcVal
     /tmp/ccKZYdRz.s:3535   .bss.locked:0000000000000000 locked
     /tmp/ccKZYdRz.s:3435   .bss.ad9520_reg:0000000000000000 ad9520_reg
     /tmp/ccKZYdRz.s:3547   .bss.mainCpLast:0000000000000000 mainCpLast
     /tmp/ccKZYdRz.s:3541   .bss.mainCp:0000000000000000 mainCp
     /tmp/ccKZYdRz.s:3721   .data.value_dacN:0000000000000000 value_dacN
     /tmp/ccKZYdRz.s:3728   .data.value_dacP:0000000000000000 value_dacP
     /tmp/ccKZYdRz.s:3449   .bss.adc2_ok:0000000000000000 adc2_ok
     /tmp/ccKZYdRz.s:3442   .bss.adc1_ok:0000000000000000 adc1_ok
     /tmp/ccKZYdRz.s:3515   .bss.forSaveAllSum:0000000000000000 forSaveAllSum
     /tmp/ccKZYdRz.s:3501   .bss.difVal_view:0000000000000000 difVal_view
     /tmp/ccKZYdRz.s:3554   .bss.meanVal_view:0000000000000000 meanVal_view
     /tmp/ccKZYdRz.s:3508   .bss.dletDac:0000000000000000 dletDac
     /tmp/ccKZYdRz.s:3561   .bss.pidD:0000000000000000 pidD
     /tmp/ccKZYdRz.s:3568   .bss.pidI:0000000000000000 pidI
     /tmp/ccKZYdRz.s:3575   .bss.pidP:0000000000000000 pidP
                            *COM*:0000000000003e80 value_adc2
     /tmp/ccKZYdRz.s:3581   .data.Wave_LUT:0000000000000000 Wave_LUT
                            *COM*:0000000000000004 dacV
     /tmp/ccKZYdRz.s:3522   .bss.fre_dif:0000000000000000 fre_dif
     /tmp/ccKZYdRz.s:3714   .data.f:0000000000000000 f
     /tmp/ccKZYdRz.s:3529   .bss.i:0000000000000000 i
     /tmp/ccKZYdRz.s:3487   .bss.chanl2_midx:0000000000000000 chanl2_midx
     /tmp/ccKZYdRz.s:3474   .bss.chanl1_midx:0000000000000000 chanl1_midx
     /tmp/ccKZYdRz.s:3461   .bss.average_xNum2:0000000000000000 average_xNum2
     /tmp/ccKZYdRz.s:3455   .bss.average_xNum1:0000000000000000 average_xNum1
     /tmp/ccKZYdRz.s:3480   .bss.chanl2_completed:0000000000000000 chanl2_completed
     /tmp/ccKZYdRz.s:3467   .bss.chanl1_completed:0000000000000000 chanl1_completed
                            *COM*:0000000000000190 chanl2_capNum_f
ARM GAS  /tmp/ccKZYdRz.s 			page 89


                            *COM*:0000000000000190 chanl1_capNum_f
                            *COM*:0000000000000190 chanl2_xNum
                            *COM*:0000000000000190 chanl1_xNum
     /tmp/ccKZYdRz.s:3432   .bss.ad9520_reg:0000000000000000 $d
     /tmp/ccKZYdRz.s:3438   .bss.adc1_ok:0000000000000000 $d
     /tmp/ccKZYdRz.s:3445   .bss.adc2_ok:0000000000000000 $d
     /tmp/ccKZYdRz.s:3452   .bss.average_xNum1:0000000000000000 $d
     /tmp/ccKZYdRz.s:3458   .bss.average_xNum2:0000000000000000 $d
     /tmp/ccKZYdRz.s:3464   .bss.chanl1_completed:0000000000000000 $d
     /tmp/ccKZYdRz.s:3470   .bss.chanl1_midx:0000000000000000 $d
     /tmp/ccKZYdRz.s:3477   .bss.chanl2_completed:0000000000000000 $d
     /tmp/ccKZYdRz.s:3483   .bss.chanl2_midx:0000000000000000 $d
     /tmp/ccKZYdRz.s:3490   .bss.currentP.10304:0000000000000000 $d
     /tmp/ccKZYdRz.s:3494   .bss.currentP.10304:0000000000000000 currentP.10304
     /tmp/ccKZYdRz.s:3497   .bss.difVal_view:0000000000000000 $d
     /tmp/ccKZYdRz.s:3504   .bss.dletDac:0000000000000000 $d
     /tmp/ccKZYdRz.s:3511   .bss.forSaveAllSum:0000000000000000 $d
     /tmp/ccKZYdRz.s:3518   .bss.fre_dif:0000000000000000 $d
     /tmp/ccKZYdRz.s:3525   .bss.i:0000000000000000 $d
     /tmp/ccKZYdRz.s:3532   .bss.locked:0000000000000000 $d
     /tmp/ccKZYdRz.s:3538   .bss.mainCp:0000000000000000 $d
     /tmp/ccKZYdRz.s:3544   .bss.mainCpLast:0000000000000000 $d
     /tmp/ccKZYdRz.s:3550   .bss.meanVal_view:0000000000000000 $d
     /tmp/ccKZYdRz.s:3557   .bss.pidD:0000000000000000 $d
     /tmp/ccKZYdRz.s:3564   .bss.pidI:0000000000000000 $d
     /tmp/ccKZYdRz.s:3571   .bss.pidP:0000000000000000 $d
     /tmp/ccKZYdRz.s:3578   .data.Wave_LUT:0000000000000000 $d
     /tmp/ccKZYdRz.s:3711   .data.f:0000000000000000 $d
     /tmp/ccKZYdRz.s:3717   .data.value_dacN:0000000000000000 $d
     /tmp/ccKZYdRz.s:3724   .data.value_dacP:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_UART_Transmit
huart2
HAL_TIM_Base_Start_IT
htim5
htim4
htim1
__aeabi_i2d
__aeabi_dmul
__aeabi_dadd
sin
__aeabi_f2d
__aeabi_ddiv
__aeabi_d2uiz
init_max5307
max5307_w_chanel
HAL_DAC_Start
HAL_DAC_SetValue
HAL_UART_Receive_IT
init_ad9520
HAL_GPIO_TogglePin
HAL_Delay
check_ad9520_status
round
hdac
__aeabi_d2f
ARM GAS  /tmp/ccKZYdRz.s 			page 90


__aeabi_dsub
max5307_loadpin
HAL_GPIO_WritePin
max5307_enable_ori_chanel
memset
HAL_SPI_Init
Error_Handler
hspi1
HAL_UART_IRQHandler
HAL_UART_Transmit_DMA
HAL_ADC_Start_DMA
hadc2
hadc1
